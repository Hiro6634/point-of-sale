/*! For license information please see main.af95e29e.js.LICENSE.txt */
!function(){var e={163:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=163,e.exports=t},610:function(e,t,n){"use strict";n.r(t),n.d(t,{createBrowserHistory:function(){return I},createHashHistory:function(){return N},createLocation:function(){return y},createMemoryHistory:function(){return O},createPath:function(){return v},locationsAreEqual:function(){return m},parsePath:function(){return p}});var r=n(462);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&i(e),s=t&&i(t),c=u||s;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?a(o,h):".."===d?(a(o,h),f++):f&&(a(o,h),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=u(t),i=u(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(554);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function v(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function y(e,t,n,i){var a;"string"===typeof e?(a=p(e)).state=t:(void 0===(a=(0,r.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var k=!("undefined"===typeof window||!window.document||!window.document.createElement);function w(e,t){t(window.confirm(e))}var b="popstate",x="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),k||(0,c.Z)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,u=void 0!==o&&o,s=a.getUserConfirmation,f=void 0===s?w:s,p=a.keyLength,m=void 0===p?6:p,I=e.basename?d(l(e.basename)):"";function _(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return I&&(a=h(a,I)),y(a,r,n)}function S(){return Math.random().toString(36).substr(2,m)}var T=g();function C(e){(0,r.Z)(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(_(e.state))}function N(){O(_(E()))}var D=!1;function O(e){if(D)D=!1,C();else{T.confirmTransitionTo(e,"POP",f,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(D=!0,M(i))}(e)}))}}var P=_(E()),R=[P.key];function L(e){return I+v(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(b,A),i&&window.addEventListener(x,N)):0===F&&(window.removeEventListener(b,A),i&&window.removeEventListener(x,N))}var j=!1;var V={length:t.length,action:"POP",location:P,createHref:L,push:function(e,r){var i="PUSH",a=y(e,r,S(),V.location);T.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=R.indexOf(V.location.key),l=R.slice(0,c+1);l.push(a.key),R=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=y(e,r,S(),V.location);T.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=R.indexOf(V.location.key);-1!==c&&(R[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var _="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function C(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function A(e){window.location.replace(T(window.location.href)+"#"+e)}function N(e){void 0===e&&(e={}),k||(0,c.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?w:i,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?d(l(e.basename)):"",f=S[u],p=f.encodePath,m=f.decodePath;function b(){var e=m(C());return s&&(e=h(e,s)),y(e)}var x=g();function E(e){(0,r.Z)(V,e),V.length=t.length,x.notifyListeners(V.location,V.action)}var I=!1,N=null;function D(){var e,t,n=C(),r=p(n);if(n!==r)A(r);else{var i=b(),o=V.location;if(!I&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(N===v(i))return;N=null,function(e){if(I)I=!1,E();else{var t="POP";x.confirmTransitionTo(e,t,a,(function(n){n?E({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(v(t));-1===n&&(n=0);var r=L.lastIndexOf(v(e));-1===r&&(r=0);var i=n-r;i&&(I=!0,M(i))}(e)}))}}(i)}}var O=C(),P=p(O);O!==P&&A(P);var R=b(),L=[v(R)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(_,D):0===F&&window.removeEventListener(_,D)}var j=!1;var V={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+p(s+v(e))},push:function(e,t){var n="PUSH",r=y(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=v(r),i=p(s+t);if(C()!==i){N=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(v(V.location)),o=L.slice(0,a+1);o.push(t),L=o,E({action:n,location:r})}else E()}}))},replace:function(e,t){var n="REPLACE",r=y(e,void 0,void 0,V.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=v(r),i=p(s+t);C()!==i&&(N=t,A(i));var a=L.indexOf(v(V.location));-1!==a&&(L[a]=t),E({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=x.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function D(e,t,n){return Math.min(Math.max(e,t),n)}function O(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=g();function f(e){(0,r.Z)(w,e),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=D(u,0,a.length-1),p=a.map((function(e){return y(e,void 0,"string"===typeof e?h():e.key||h())})),m=v;function k(e){var t=D(w.index+e,0,w.entries.length-1),r=w.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var w={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:m,push:function(e,t){var r="PUSH",i=y(e,t,h(),w.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=y(e,t,h(),w.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(w.entries[w.index]=i,f({action:r,location:i}))}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return w}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},571:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},151:function(e,t,n){var r=n(571);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,E="?"===k||"*"===k,I=n[2]||l,_=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:E,repeat:x,partial:b,asterisk:!!w,pattern:_?c(_):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,I=60107,_=60108,S=60114,T=60109,C=60110,A=60112,N=60113,D=60120,O=60115,P=60116,R=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),E=j("react.portal"),I=j("react.fragment"),_=j("react.strict_mode"),S=j("react.profiler"),T=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),N=j("react.suspense"),D=j("react.suspense_list"),O=j("react.memo"),P=j("react.lazy"),R=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function q(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var H=!1;function K(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function G(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return W(e.type);case R:return W(e._render);case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function De(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ae||(Le(),Oe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Be=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ye){Be=!1}function qe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var He=!1,Ke=null,Ge=!1,We=null,Qe={onError:function(e){He=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,u,s){He=!1,Ke=null,qe.apply(Qe,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Xe(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ze(i),e;if(a===r)return Ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},_t={},St={};function Tt(e){if(_t[e])return _t[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return _t[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=Tt("animationend"),At=Tt("animationiteration"),Nt=Tt("animationstart"),Dt=Tt("transitionend"),Ot=new Map,Pt=new Map,Rt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Wt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){Fe||Le();var i=Zt,a=Fe;Fe=!0;try{Re(i,e,t,n,r)}finally{(Fe=a)||je()}}function Jt(e,t,n,r){Qt(Wt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Se(r);if(null!==(i=ni(i))){var a=Xe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),En=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),Dn=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Rn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Fn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Qn(e,t,n,r){De(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Jn(e){Ar(e,0)}function Zn(e){if(J(ii(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Xn=Yn=null)}function ar(e){if("value"===e.propertyName&&Zn(Xn)){var t=[];if(Qn(t,Xn,e,Se(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Xn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Xn)}function sr(e,t){if("click"===e)return Zn(t)}function cr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==Z(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<Ir.length;_r++)Pt.set(Ir[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ye.apply(this,arguments),He){if(!He)throw Error(o(198));var l=Ke;He=!1,Ke=null,Ge||(Ge=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Ge)throw e=We,Ge=!1,We=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Dr]||(e[Dr]=!0,u.forEach((function(t){Tr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Rr(a,e,i,t),o.add(u))}function Rr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=Jt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case At:case Nt:s=wn;break;case Dt:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Dn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Dn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(m=Fr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Hn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&qn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,zr=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Jr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Jr,$r="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Zr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Zr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[$r]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,W(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ei=null,Ii=null,_i=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ai?Ai:function(){},ji=null,Vi=null,Bi=!1,zi=Ni(),qi=1e4>zi?Ni:function(){return Ni()-zi};function Hi(){switch(Di()){case Oi:return 99;case Pi:return 98;case Ri:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Oi;case 98:return Pi;case 97:return Ri;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),_i(e,t)}function Wi(e,t,n){return e=Ki(e),Si(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}Yi()}function Yi(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Oi,Qi),n}finally{Bi=!1}}}var Xi=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zi=ci(null),$i=null,ea=null,ta=null;function na(){ta=ea=$i=null}function ra(e){var t=Zi.current;li(Zi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$i=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$i)throw Error(o(308));ea=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _a(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Ws(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ws(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||z(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(xa(n)||z(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=z(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ws(a.type,a.key,a.props,null,e.mode,s)).ref=Ea(e,r,a),s.return=e,e=s)}return u(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xs(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(z(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Sa=_a(!0),Ta=_a(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Da=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Da,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Ra(){li(Aa),li(Na),li(Da)}function La(e){Oa(Da.current);var t=Oa(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,Ba=!1;function za(e,t){var n=Hs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ha(e){if(Ba){var t=Va;if(t){var n=t;if(!qa(e,t)){if(!(t=Qr(n.nextSibling))||!qa(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);za(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ga(e){if(e!==ja)return!1;if(!Ba)return Ka(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Wa(){Va=ja=null,Ba=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Xa=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Za=0,$a=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Za=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=null===e||null===e.memoizedState?Po:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Xa.current=Lo,e=n(r,i)}while(ro)}if(Xa.current=Oo,t=null!==eo&&null!==eo.next,Za=0,to=eo=$a=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$a.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$a.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$a.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Za&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,$a.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Xa.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=$a;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Ht(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Do.bind(null,$a,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Do.bind(null,$a,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();$a.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}$a.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function _o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,_o.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Hi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Do(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===$a||null!==o&&o===$a)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Do.bind(null,$a,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,mo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Sa(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ks(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ws(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Gs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ho(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ko(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Wo(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,Yo,Xo,Jo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ha(t),e=i.children,a=i.fallback,o?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Gs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gs(o,u),null!==e?r=Gs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Da.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Aa.current),Ga(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Zr]=t,r[$r]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Nr(Sr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":X(r),re(r,u,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Zr]=t,e[$r]=r,Qo(e,t),t.stateNode=e,c=_e(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Nr(Sr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Da.current),Oa(Aa.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&Bu)&&0===(134217727&zu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Gu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Gu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return Es(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return Es(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Aa.current);var o,u=null;switch(n){case"input":a=$(e,a),r=$(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zu?Zu=new Set([this]):Zu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:_u(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Eu(e,n,t):Iu(e,n,t)}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function _u(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),_e(e,i),t=_e(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ku=qi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=zs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Du=b.ReactCurrentOwner,Ou=0,Pu=null,Ru=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,ju=null,Vu=0,Bu=0,zu=0,qu=0,Hu=null,Ku=0,Gu=1/0;function Wu(){Gu=qi()+500}var Qu,Yu=null,Xu=!1,Ju=null,Zu=null,$u=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?qi():-1!==us?us:us=qi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===ss&&(ss=Vu),0!==Xi.transition){0!==cs&&(cs=null!==Hu?Hu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Ou)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;qt(e,t,n),e===Pu&&(zu|=t,4===Uu&&gs(e,Lu));var r=Hi();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ys(e,n),0===Ou&&(Wu(),Qi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Hu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Ht(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Si(Oi,Yi)):ji.push(n),n=Fi):14===t?n=Wi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Wi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ss();for(Pu===e&&Lu===r||(Wu(),Is(e,r));;)try{As();break}catch(s){_s(e,s)}if(na(),Nu.current=a,Ou=i,null!==Ru?r=0:(Pu=null,Lu=0,r=Uu),0!==(Vu&zu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=ju,Is(e,0),gs(e,n),ys(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Ku+500-qi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Ht(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Kr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ys(e,qi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~qu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&zu)&&(n=Ts(e,t=Ut(e,t)))}else n=Ts(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=ju,Is(e,0),gs(e,t),ys(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ys(e,qi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Qi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Vu|=t}function Es(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Ra();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Es()}n=n.return}Pu=e,Ru=Gs(e.current,null),Lu=Mu=Vu=t,Uu=0,ju=null,qu=zu=Bu=0}function _s(e,t){for(;;){var n=Ru;try{if(na(),Xa.current=Oo,no){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Za=0,to=eo=$a=null,ro=!1,Du.current=null,null===n||null===n.return){Uu=1,ju=t,Ru=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((W(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Zu||!Zu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(E){t=E,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function Ss(){var e=Nu.current;return Nu.current=Oo,null===e?Oo:e}function Ts(e,t){var n=Ou;Ou|=16;var r=Ss();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){_s(e,i)}if(na(),Ou=n,Nu.current=r,null!==Ru)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Ru;)Ns(Ru)}function As(){for(;null!==Ru&&!Ci();)Ns(Ru)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Ru=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ru=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ru=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Uu&&(Uu=5)}function Os(e){var t=Hi();return Gi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Ht(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ru=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Du.current=null,Br=Yt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;zr={focusedElem:u,selectionRange:s},Yt=!1,ls=null,fs=!1,Yu=r;do{try{Rs()}catch(S){if(null===Yu)throw Error(o(330));Vs(Yu,S),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ge(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu(Yu),Yu.flags&=-3;break;case 6:xu(Yu),Yu.flags&=-3,Su(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Su(Yu.alternate,Yu);break;case 4:Su(Yu.alternate,Yu);break;case 8:_u(u,s=Yu);var x=s.alternate;wu(s),null!==x&&wu(x)}Yu=Yu.nextEffect}}catch(S){if(null===Yu)throw Error(o(330));Vs(Yu,S),Yu=Yu.nextEffect}}while(null!==Yu);if(b=zr,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Yt=!!Br,zr=Br=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var E=Yu.flags;if(36&E&&mu(k,Yu.alternate,Yu),128&E){w=void 0;var I=Yu.ref;if(null!==I){var _=Yu.stateNode;Yu.tag,w=_,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(S){if(null===Yu)throw Error(o(330));Vs(Yu,S),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Ui(),Ou=i}else e.current=n;if($u)$u=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((E=Yu).sibling=null,E.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Zu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(S){}if(ys(e,qi()),Xu)throw Xu=!1,e=Ju,Ju=null,e;return 0!==(8&Ou)||Qi(),null}function Rs(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?et(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&et(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&yu(e,Yu),0===(512&t)||$u||($u=!0,Wi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Gi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),$u||($u=!0,Wi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),$u||($u=!0,Wi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(qt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zu||!Zu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))qt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zu||!Zu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>qi()-Ku?Is(e,0):qu|=n),ys(e,t)}function zs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(qt(e,t,n),ys(e,n))}function qs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(e,t,n,r){return new qs(e,t,n,r)}function Ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gs(e,t){var n=e.alternate;return null===n?((n=Hs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ws(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ks(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case _:u=8,i|=1;break;case S:return(e=Hs(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case N:return(e=Hs(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case D:return(e=Hs(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return Ys(n,i,a,t);case U:return(e=Hs(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case A:u=11;break e;case O:u=14;break e;case P:u=16,r=null;break e;case R:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hs(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Hs(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Hs(23,e,r,t)).elementType=F,e.lanes=n,e}function Xs(e,t,n){return(e=Hs(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Hs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function $s(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zs(e,t,null!=n&&!0===n.hydrate),t=Hs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return $s(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Wo(t),Wa();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Zo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ho(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Wo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Wa(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Wa();t=t.child}return t;case 5:return La(t),null===e&&Ha(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Hr(r,i)?u=null:null!==a&&Hr(r,a)&&(t.flags|=16),qo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ha(t),null;case 13:return Zo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Zi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Vo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Re=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Wu(),Qi())}},Le=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,qi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Qi())}};var sc={Events:[ri,ii,ai,De,Oe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ou=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===u||e===o||e===h||e===d||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===s||e.$$typeof===c||e.$$typeof===f||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=m},441:function(e,t,n){"use strict";e.exports=n(372)},459:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===s}},900:function(e,t,n){"use strict";e.exports=n(459)},542:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(880),a=r(n(791)),o=n(610);n(7),n(501);var u=r(n(90));function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}var h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return a.createElement(i.Router,{history:this.history,children:this.props.children})},t}(a.Component),p=function(e,t){return"function"==typeof e?e(t):e},v=function(e,t){return"string"==typeof e?o.createLocation(e,null,null,t):e},y=function(e){return e},m=a.forwardRef;void 0===m&&(m=y);var g=m((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=f(e,["innerRef","navigate","onClick"]),u=o.target,c=s({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return c.ref=y!==m&&t||n,a.createElement("a",c)})),k=m((function(e,t){var n=e.component,r=void 0===n?g:n,c=e.replace,l=e.to,h=e.innerRef,d=f(e,["component","replace","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=e.history,i=v(p(l,e.location),e.location),f=i?n.createHref(i):"",g=s({},d,{href:f,navigate:function(){var t=p(l,e.location),r=o.createPath(e.location)===o.createPath(v(t));(c||r?n.replace:n.push)(t)}});return y!==m?g.ref=t||h:g.innerRef=h,a.createElement(r,g)}))})),w=function(e){return e},b=a.forwardRef;void 0===b&&(b=w);var x=b((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,c=void 0===o?"active":o,l=e.activeStyle,h=e.className,d=e.exact,y=e.isActive,m=e.location,g=e.sensitive,x=e.strict,E=e.style,I=e.to,_=e.innerRef,S=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(i.__RouterContext.Consumer,null,(function(e){e||u(!1);var n=m||e.location,o=v(p(I,n),n),f=o.pathname,T=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=T?i.matchPath(n.pathname,{path:T,exact:d,sensitive:g,strict:x}):null,A=!!(y?y(C,n):C),N="function"==typeof h?h(A):h,D="function"==typeof E?E(A):E;A&&(N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(N,c),D=s({},D,l));var O=s({"aria-current":A&&r||null,className:N,style:D,to:o},S);return w!==b?O.ref=t||_:O.innerRef=_,a.createElement(k,O)}))}));Object.defineProperty(t,"EN",{enumerable:!0,get:function(){return i.withRouter}})},880:function(e,t,n){"use strict";n.r(t),n.d(t,{MemoryRouter:function(){return E},Prompt:function(){return _},Redirect:function(){return A},Route:function(){return P},Router:function(){return x},StaticRouter:function(){return j},Switch:function(){return V},__HistoryContext:function(){return w},__RouterContext:function(){return b},generatePath:function(){return C},matchPath:function(){return O},useHistory:function(){return q},useLocation:function(){return H},useParams:function(){return K},useRouteMatch:function(){return G},withRouter:function(){return B}});var r=n(578),i=n(791),a=n(7),o=n.n(a),u=n(610),s=n(554),c=n(462),l=n(151),f=n.n(l),h=(n(228),n(366)),d=n(110),p=n.n(d),v=1073741823,y="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function m(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var g=i.createContext||function(e,t){var n,a,u="__create-react-context-"+function(){var e="__global_unique_id__";return y[e]=(y[e]||0)+1}()+"__",s=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=m(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[u]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):v,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},i.render=function(){return this.props.children},n}(i.Component);s.childContextTypes=((n={})[u]=o().object.isRequired,n);var c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?v:t},i.componentDidMount=function(){this.context[u]&&this.context[u].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?v:e},i.componentWillUnmount=function(){this.context[u]&&this.context[u].off(this.onUpdate)},i.getValue=function(){return this.context[u]?this.context[u].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return c.contextTypes=((a={})[u]=o().object,a),{Provider:s,Consumer:c}},k=function(e){var t=g();return t.displayName=e,t},w=k("Router-History"),b=k("Router"),x=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(b.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(w.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,u.createMemoryHistory)(t.props),t}return(0,r.Z)(t,e),t.prototype.render=function(){return i.createElement(x,{history:this.history,children:this.props.children})},t}(i.Component);var I=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function _(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(b.Consumer,null,(function(e){if(e||(0,s.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(I,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var S={},T=0;function C(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(S[e])return S[e];var t=f().compile(e);return T<1e4&&(S[e]=t,T++),t}(e)(t,{pretty:!0})}function A(e){var t=e.computedMatch,n=e.to,r=e.push,a=void 0!==r&&r;return i.createElement(b.Consumer,null,(function(e){e||(0,s.Z)(!1);var r=e.history,o=e.staticContext,l=a?r.push:r.replace,f=(0,u.createLocation)(t?"string"===typeof n?C(n,t.params):(0,c.Z)({},n,{pathname:C(n.pathname,t.params)}):n);return o?(l(f),null):i.createElement(I,{onMount:function(){l(f)},onUpdate:function(e,t){var n=(0,u.createLocation)(t.to);(0,u.locationsAreEqual)(n,(0,c.Z)({},f,{key:n.key}))||l(f)},to:n})}))}var N={},D=0;function O(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=N[n]||(N[n]={});if(r[e])return r[e];var i=[],a={regexp:f()(e,i,t),keys:i};return D<1e4&&(r[e]=a,D++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],h=s.slice(1),d=e===l;return a&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var P=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(b.Consumer,null,(function(t){t||(0,s.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?O(n.pathname,e.props):t.match,a=(0,c.Z)({},t,{location:n,match:r}),o=e.props,u=o.children,l=o.component,f=o.render;return Array.isArray(u)&&function(e){return 0===i.Children.count(e)}(u)&&(u=null),i.createElement(b.Provider,{value:a},a.match?u?"function"===typeof u?u(a):u:l?i.createElement(l,a):f?f(a):null:"function"===typeof u?u(a):null)}))},t}(i.Component);function R(e){return"/"===e.charAt(0)?e:"/"+e}function L(e,t){if(!e)return t;var n=R(e);return 0!==t.pathname.indexOf(n)?t:(0,c.Z)({},t,{pathname:t.pathname.substr(n.length)})}function M(e){return"string"===typeof e?e:(0,u.createPath)(e)}function F(e){return function(){(0,s.Z)(!1)}}function U(){}var j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return U},t.handleBlock=function(){return U},t}(0,r.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,a=n.context,o=void 0===a?{}:a;o.action=t,o.location=function(e,t){return e?(0,c.Z)({},t,{pathname:R(e)+t.pathname}):t}(i,(0,u.createLocation)(e)),o.url=M(o.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,a=void 0===r?{}:r,o=e.location,s=void 0===o?"/":o,l=(0,h.Z)(e,["basename","context","location"]),f={createHref:function(e){return R(n+M(e))},action:"POP",location:L(n,(0,u.createLocation)(s)),push:this.handlePush,replace:this.handleReplace,go:F(),goBack:F(),goForward:F(),listen:this.handleListen,block:this.handleBlock};return i.createElement(x,(0,c.Z)({},l,{history:f,staticContext:a}))},t}(i.Component);var V=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(b.Consumer,null,(function(t){t||(0,s.Z)(!1);var n,r,a=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?O(a.pathname,(0,c.Z)({},e.props,{path:o})):t.match}})),r?i.cloneElement(n,{location:a,computedMatch:r}):null}))},t}(i.Component);function B(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,h.Z)(t,["wrappedComponentRef"]);return i.createElement(b.Consumer,null,(function(t){return t||(0,s.Z)(!1),i.createElement(e,(0,c.Z)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,p()(n,e)}var z=i.useContext;function q(){return z(w)}function H(){return z(b).location}function K(){var e=z(b).match;return e?e.params:{}}function G(e){var t=H(),n=z(b).match;return e?O(t.pathname,e):n}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var _=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function D(){var e=N.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":N(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":N(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var y="undefined"==typeof e?"undefined":N(e),m="undefined"==typeof t?"undefined":N(t),g="undefined"!==y||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==m||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===y&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new u(p,w,new o(void 0,e[w]))):l(e[w],t[w],n,r,p,w,d);for(;w<t.length;)n(new u(p,w,new a(void 0,t[w++])))}else{var b=Object.keys(e),x=Object.keys(t);b.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===y&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function y(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function m(e){return"color: "+P[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+P[t].text,m(t)].concat(D(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function w(e,t,n,r){switch("undefined"==typeof e?"undefined":N(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,D(n)):e[r];case"function":return e(t);default:return e}}function b(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?b(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,y=i.error,m=i.took,g=i.nextState,b=e[f+1];b&&(g=b.prevState,m=b.started-h);var x=r(p),E="function"==typeof o?o((function(){return g}),p,i):o,I=C(d),_=u.title?"color: "+u.title(x)+";":"",S=["color: gray; font-weight: lighter;"];S.push(_),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var T=a(x,I,m);try{E?u.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(S)):n.groupCollapsed(T):u.title&&l?n.group.apply(n,["%c "+T].concat(S)):n.group(T)}catch(e){n.log(T)}var A=w(s,x,[v],"prevState"),N=w(s,x,[x],"action"),D=w(s,x,[y,v],"error"),O=w(s,x,[g],"nextState");if(A)if(u.prevState){var P="color: "+u.prevState(v)+"; font-weight: bold";n[A]("%c prev state",P,v)}else n[A]("prev state",v);if(N)if(u.action){var R="color: "+u.action(x)+"; font-weight: bold";n[N]("%c action    ",R,x)}else n[N]("action    ",x);if(y&&D)if(u.error){var L="color: "+u.error(y,v)+"; font-weight: bold;";n[D]("%c error     ",L,y)}else n[D]("error     ",y);if(O)if(u.nextState){var M="color: "+u.nextState(g)+"; font-weight: bold";n[O]("%c next state",M,g)}else n[O]("next state",g);c&&k(v,g,n,E);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=A.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=A.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var I,_,S=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return S("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},A="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},O=[];I="object"===("undefined"==typeof n.g?"undefined":N(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(_=I.DeepDiff)&&O.push((function(){"undefined"!=typeof _&&I.DeepDiff===f&&(I.DeepDiff=_,_=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:y,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof _},enumerable:!0},noConflict:{value:function(){return O&&(O.forEach((function(e){e()})),O=null),f},enumerable:!0}});var P={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?E()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=R,e.createLogger=E,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<_(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>_(o,n))void 0!==s&&0>_(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>_(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function _(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,A=null,N=3,D=!1,O=!1,P=!1;function R(e){for(var t=E(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,x(S,t)}t=E(T)}}function L(e){if(P=!1,R(e),!O)if(null!==E(S))O=!0,n(M);else{var t=E(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,P&&(P=!1,i()),D=!0;var a=N;try{for(R(n),A=E(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===E(S)&&I(S),R(n)}else I(S);A=E(S)}if(null!==A)var s=!0;else{var c=E(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return E(S)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===E(S)&&e===E(T)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}},90:function(e){"use strict";var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},501:function(e,t,n){"use strict";n.r(t);t.default=function(e,t){}},462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},578:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(611);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},554:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return St},SDK_VERSION:function(){return Rn},_DEFAULT_ENTRY_NAME:function(){return bn},_addComponent:function(){return _n},_addOrOverwriteComponent:function(){return Sn},_apps:function(){return En},_clearComponents:function(){return Nn},_components:function(){return In},_getProvider:function(){return Cn},_registerComponent:function(){return Tn},_removeServiceInstance:function(){return An},deleteApp:function(){return Un},getApp:function(){return Mn},getApps:function(){return Fn},initializeApp:function(){return Ln},onLog:function(){return Bn},registerVersion:function(){return Vn},setLogLevel:function(){return zn}});var t=n(791),r=n(164),i=n(880),a=n(578),o=n(610),u=n(462),s=n(366),c=n(554),l=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.createBrowserHistory)(t.props),t}return(0,a.Z)(n,e),n.prototype.render=function(){return t.createElement(i.Router,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var f=function(e,t){return"function"===typeof e?e(t):e},h=function(e,t){return"string"===typeof e?(0,o.createLocation)(e,null,null,t):e},d=function(e){return e},p=t.forwardRef;"undefined"===typeof p&&(p=d);var v=p((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=(0,s.Z)(e,["innerRef","navigate","onClick"]),c=o.target,l=(0,u.Z)({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return l.ref=d!==p&&n||r,t.createElement("a",l)}));var y=p((function(e,n){var r=e.component,a=void 0===r?v:r,l=e.replace,y=e.to,m=e.innerRef,g=(0,s.Z)(e,["component","replace","to","innerRef"]);return t.createElement(i.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var r=e.history,i=h(f(y,e.location),e.location),s=i?r.createHref(i):"",v=(0,u.Z)({},g,{href:s,navigate:function(){var t=f(y,e.location),n=(0,o.createPath)(e.location)===(0,o.createPath)(h(t));(l||n?r.replace:r.push)(t)}});return d!==p?v.ref=n||m:v.innerRef=m,t.createElement(a,v)}))})),m=function(e){return e},g=t.forwardRef;"undefined"===typeof g&&(g=m);g((function(e,n){var r=e["aria-current"],a=void 0===r?"page":r,o=e.activeClassName,l=void 0===o?"active":o,d=e.activeStyle,p=e.className,v=e.exact,k=e.isActive,w=e.location,b=e.sensitive,x=e.strict,E=e.style,I=e.to,_=e.innerRef,S=(0,s.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(i.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var r=w||e.location,o=h(f(I,r),r),s=o.pathname,T=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=T?(0,i.matchPath)(r.pathname,{path:T,exact:v,sensitive:b,strict:x}):null,A=!!(k?k(C,r):C),N="function"===typeof p?p(A):p,D="function"===typeof E?E(A):E;A&&(N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(N,l),D=(0,u.Z)({},D,d));var O=(0,u.Z)({"aria-current":A&&a||null,className:N,style:D,to:o},S);return m!==g?O.ref=n||_:O.innerRef=_,t.createElement(y,O)}))}));var k=t.createContext(null);var w=function(e){e()},b=function(){return w};var x={notify:function(){},get:function(){return[]}};function E(e,t){var n,r=x;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=b(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=x)},getListeners:function(){return r}};return o}var I="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;var _=function(e){var n=e.store,r=e.context,i=e.children,a=(0,t.useMemo)((function(){var e=E(n);return{store:n,subscription:e}}),[n]),o=(0,t.useMemo)((function(){return n.getState()}),[n]);I((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var u=r||k;return t.createElement(u.Provider,{value:a},i)},S=n(110),T=n.n(S),C=n(900),A=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],N=["reactReduxForwardedRef"],D=[],O=[null,null];function P(e,t){var n=e[1];return[t.payload,n+1]}function R(e,t,n){I((function(){return e.apply(void 0,t)}),n)}function L(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function M(e,t,n,r,i,a,o,u,s,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===a.current?o.current||s():(a.current=e,u.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var F=function(){return[null,0]};function U(e,n){void 0===n&&(n={});var r=n,i=r.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,o=r.methodName,c=void 0===o?"connectAdvanced":o,l=r.renderCountProp,f=void 0===l?void 0:l,h=r.shouldHandleStateChanges,d=void 0===h||h,p=r.storeKey,v=void 0===p?"store":p,y=(r.withRef,r.forwardRef),m=void 0!==y&&y,g=r.context,w=void 0===g?k:g,b=(0,s.Z)(r,A),x=w;return function(n){var r=n.displayName||n.name||"Component",i=a(r),o=(0,u.Z)({},b,{getDisplayName:a,methodName:c,renderCountProp:f,shouldHandleStateChanges:d,storeKey:v,displayName:i,wrappedComponentName:r,WrappedComponent:n}),l=b.pure;var h=l?t.useMemo:function(e){return e()};function p(r){var i=(0,t.useMemo)((function(){var e=r.reactReduxForwardedRef,t=(0,s.Z)(r,N);return[r.context,e,t]}),[r]),a=i[0],c=i[1],l=i[2],f=(0,t.useMemo)((function(){return a&&a.Consumer&&(0,C.isContextConsumer)(t.createElement(a.Consumer,null))?a:x}),[a,x]),p=(0,t.useContext)(f),v=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(p)&&Boolean(p.store);var y=v?r.store:p.store,m=(0,t.useMemo)((function(){return function(t){return e(t.dispatch,o)}(y)}),[y]),g=(0,t.useMemo)((function(){if(!d)return O;var e=E(y,v?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[y,v,p]),k=g[0],w=g[1],b=(0,t.useMemo)((function(){return v?p:(0,u.Z)({},p,{subscription:k})}),[v,p,k]),I=(0,t.useReducer)(P,D,F),_=I[0][0],S=I[1];if(_&&_.error)throw _.error;var T=(0,t.useRef)(),A=(0,t.useRef)(l),U=(0,t.useRef)(),j=(0,t.useRef)(!1),V=h((function(){return U.current&&l===A.current?U.current:m(y.getState(),l)}),[y,_,l]);R(L,[A,T,j,l,V,U,w]),R(M,[d,y,k,m,A,T,j,U,w,S],[y,k,m]);var B=(0,t.useMemo)((function(){return t.createElement(n,(0,u.Z)({},V,{ref:c}))}),[c,n,V]);return(0,t.useMemo)((function(){return d?t.createElement(f.Provider,{value:b},B):B}),[f,B,b])}var y=l?t.memo(p):p;if(y.WrappedComponent=n,y.displayName=p.displayName=i,m){var g=t.forwardRef((function(e,n){return t.createElement(y,(0,u.Z)({},e,{reactReduxForwardedRef:n}))}));return g.displayName=i,g.WrappedComponent=n,T()(g,n)}return T()(y,n)}}function j(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function V(e,t){if(j(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!j(e[n[i]],t[n[i]]))return!1;return!0}function B(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function z(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function q(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=z(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=z(i),i=r(t,n)),i},r}}var H=[function(e){return"function"===typeof e?q(e):void 0},function(e){return e?void 0:B((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?B((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var K=[function(e){return"function"===typeof e?q(e):void 0},function(e){return e?void 0:B((function(){return{}}))}];function G(e,t,n){return(0,u.Z)({},n,e,t)}var W=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,u){var s=e(t,n,u);return o?i&&a(s,r)||(r=s):(o=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return G}}],Q=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Y(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function X(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a,d,o);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function J(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=(0,s.Z)(t,Q),o=n(e,a),u=r(e,a),c=i(e,a);return(a.pure?X:Y)(o,u,c,e,a)}var Z=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function $(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ee(e,t){return e===t}function te(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?U:n,i=t.mapStateToPropsFactories,a=void 0===i?K:i,o=t.mapDispatchToPropsFactories,c=void 0===o?H:o,l=t.mergePropsFactories,f=void 0===l?W:l,h=t.selectorFactory,d=void 0===h?J:h;return function(e,t,n,i){void 0===i&&(i={});var o=i,l=o.pure,h=void 0===l||l,p=o.areStatesEqual,v=void 0===p?ee:p,y=o.areOwnPropsEqual,m=void 0===y?V:y,g=o.areStatePropsEqual,k=void 0===g?V:g,w=o.areMergedPropsEqual,b=void 0===w?V:w,x=(0,s.Z)(o,Z),E=$(e,a,"mapStateToProps"),I=$(t,c,"mapDispatchToProps"),_=$(n,f,"mergeProps");return r(d,(0,u.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:I,initMergeProps:_,pure:h,areStatesEqual:v,areOwnPropsEqual:m,areStatePropsEqual:k,areMergedPropsEqual:b},x))}}var ne=te();var re;function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}re=r.unstable_batchedUpdates,w=re;var se="function"===typeof Symbol&&Symbol.observable||"@@observable",ce=function(){return Math.random().toString(36).substring(7).split("").join(".")},le={INIT:"@@redux/INIT"+ce(),REPLACE:"@@redux/REPLACE"+ce(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ce()}};function fe(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function he(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(ue(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(ue(1));return n(he)(e,t)}if("function"!==typeof e)throw new Error(ue(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(ue(3));return a}function f(e){if("function"!==typeof e)throw new Error(ue(4));if(s)throw new Error(ue(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(ue(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!fe(e))throw new Error(ue(7));if("undefined"===typeof e.type)throw new Error(ue(8));if(s)throw new Error(ue(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(ue(10));i=e,h({type:le.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(ue(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[se]=function(){return this},e}return h({type:le.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[se]=p,r}function de(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var pe=n(896),ve=n.n(pe),ye="SET_CURRENT_USERS",me={currentUser:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;return t.type===ye?oe(oe({},e),{},{currentUser:t.payload}):e},ke={UPDATE_PRODUCTS:"UPDATE_PRODUCTS"},we={products:null},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;return t.type===ke.UPDATE_PRODUCTS?oe(oe({},e),{},{products:t.payload}):e},xe="ADD_ITEM",Ee="REMOVE_ITEM",Ie="CLEAR_ITEM_FROM_CART",_e="CLEAR_ALL_ITEMS_FROM_CART";function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ce(e,t){if(e){if("string"===typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}function Ae(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||Te(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ne=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?oe(oe({},e),{},{quantity:e.quantity+1}):e})):[].concat(Ae(e),[oe(oe({},t),{},{quantity:1})])},De=function(e,t){return 1===e.find((function(e){return e.id===t.id})).quantity?e.filter((function(e){return e.id!==t.id})):e.map((function(e){return e.id===t.id?oe(oe({},e),{},{quantity:e.quantity-1}):e}))},Oe={cartItems:[]},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return oe(oe({},e),{},{cartItems:Ne(e.cartItems,t.payload)});case Ee:return oe(oe({},e),{},{cartItems:De(e.cartItems,t.payload)});case Ie:return oe(oe({},e),{},{cartItems:e.cartItems.filter((function(e){return e.id!==t.payload.id}))});case _e:return oe(oe({},e),{},{cartItems:[]});default:return e}},Re={UPDATE_CATEGORIES:"UPDATE_CATEGORIES"},Le={categories:null},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;return t.type===Re.UPDATE_CATEGORIES?oe(oe({},e),{},{categories:t.payload}):e},Fe={SEND_TICKET:"SEND_TICKET"},Ue={tickets:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;return t.type===Fe.SEND_TICKET?oe(oe({},e),{},{tickets:t.payload}):e},Ve=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:le.INIT}))throw new Error(ue(12));if("undefined"===typeof n(void 0,{type:le.PROBE_UNKNOWN_ACTION()}))throw new Error(ue(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(ue(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:ge,shop:be,cart:Pe,category:Me,ticket:je}),Be=[ve()],ze=he(Ve,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(ue(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=de.apply(void 0,a)(n.dispatch),oe(oe({},n),{},{dispatch:r})}}}.apply(void 0,Be)),qe=ze;function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ke(){Ke=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return _()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==He(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Ge(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function We(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ge(a,r,i,o,u,"next",e)}function u(e){Ge(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Je=n(611);function Ze(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,Je.Z)(e,t)}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){if(t&&("object"===He(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tt(e)}function rt(e){var t=et();return function(){var n,r=$e(e);if(t){var i=$e(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nt(this,n)}}function it(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ce(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function at(e){if(Array.isArray(e))return e}function ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ut(e,t){return at(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||Ce(e,t)||ot()}function st(e,t,n){return st=et()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,Je.Z)(i,n.prototype),i},st.apply(null,arguments)}function ct(e){var t="function"===typeof Map?new Map:void 0;return ct=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return st(e,arguments,$e(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Je.Z)(n,e)},ct(e)}var lt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ft={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ht=function(e){return function(e){var t=lt(e);return ft.encodeByteArray(t,!0)}(e).replace(/\./g,"")},dt=function(e){try{return ft.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=pt(e[n],t[n]));return e}function vt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function mt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function gt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function kt(){var e=vt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wt(){return"object"===typeof indexedDB}var bt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},xt=function(){return bt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__,t={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS_PATH__;if(e)return t&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(e);if(t)try{return n(163)(t)}catch(r){console.warn("Unable to read defaults from file provided to "+"__FIREBASE_DEFAULTS_PATH__: ".concat(t))}}}()||function(){if("undefined"!==typeof document){var e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),t=e&&dt(e[1]);return t&&JSON.parse(t)}}()},Et=function(){var e;return null===(e=xt())||void 0===e?void 0:e.config},It=function(){function e(){var t=this;Qe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Xe(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function _t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(a)),""].join(".")}var St=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(tt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(tt(a),Tt.prototype.create),a}return Xe(n)}(ct(Error)),Tt=function(){function e(t,n,r){Qe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Xe(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ct(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new St(n,a,t);return o}}]),e}();function Ct(e,t){return e.replace(At,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var At=/\{\$([^}]+)}/g;function Nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ot(u)&&Ot(s)){if(!Dt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ot(e){return null!==e&&"object"===typeof e}function Pt(e){for(var t=[],n=function(){var e=ut(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Rt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=ut(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Lt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Mt(e,t){var n=new Ft(e,t);return n.subscribe.bind(n)}var Ft=function(){function e(t,n){var r=this;Qe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Xe(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=it(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ut),void 0===r.error&&(r.error=Ut),void 0===r.complete&&(r.complete=Ut);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ut(){}function jt(e){return e&&e._delegate?e._delegate:e}var Vt=function(){function e(t,n,r){Qe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Xe(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Bt="[DEFAULT]",zt=function(){function e(t,n){Qe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Xe(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new It;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch(s){}var t,n=it(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=ut(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ae(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ae(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=it(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=ut(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(zI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Bt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(zI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt;return this.component?this.component.multipleInstances?e:Bt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var qt,Ht,Kt=function(){function e(t){Qe(this,e),this.name=t,this.providers=new Map}return Xe(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new zt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Gt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ht||(Ht={}));var Wt={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},Qt=Ht.INFO,Yt=(ie(qt={},Ht.DEBUG,"log"),ie(qt,Ht.VERBOSE,"log"),ie(qt,Ht.INFO,"info"),ie(qt,Ht.WARN,"warn"),ie(qt,Ht.ERROR,"error"),qt),Xt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Jt=function(){function e(t){Qe(this,e),this.name=t,this._logLevel=Qt,this._logHandler=Xt,this._userLogHandler=null,Gt.push(this)}return Xe(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Wt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ht.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ht.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ht.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ht.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ht.INFO].concat(t)),this._logHandler.apply(this,[this,Ht.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ht.WARN].concat(t)),this._logHandler.apply(this,[this,Ht.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ht.ERROR].concat(t)),this._logHandler.apply(this,[this,Ht.ERROR].concat(t))}}]),e}();var Zt,$t;var en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap;var on={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function un(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($t||($t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ln(this),n),cn(en.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return cn(e.apply(ln(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ln(this),t].concat(r));return nn.set(a,t.sort?t.sort():[t]),cn(a)}}function sn(e){return"function"===typeof e?un(e):(e instanceof IDBTransaction&&function(e){if(!tn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));tn.set(e,t)}}(e),t=e,(Zt||(Zt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,on):e);var t}function cn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(cn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&en.set(t,e)})).catch((function(){})),an.set(t,e),t}(e);if(rn.has(e))return rn.get(e);var t=sn(e);return t!==e&&(rn.set(e,t),an.set(t,e)),t}var ln=function(e){return an.get(e)};var fn,hn,dn=["get","getKey","getAll","getAllKeys","count"],pn=["put","add","delete","clear"],vn=new Map;function yn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(vn.get(t))return vn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=pn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||dn.includes(n))){var a=function(){var e=We(Ke().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return vn.set(t,a),a}}}on=function(e){return oe(oe({},e),{},{get:function(t,n,r){return yn(t,n)||e.get(t,n,r)},has:function(t,n){return!!yn(t,n)||e.has(t,n)}})}(on);var mn=function(){function e(t){Qe(this,e),this.container=t}return Xe(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var gn="@firebase/app",kn="0.8.0",wn=new Jt("@firebase/app"),bn="[DEFAULT]",xn=(ie(fn={},gn,"fire-core"),ie(fn,"@firebase/app-compat","fire-core-compat"),ie(fn,"@firebase/analytics","fire-analytics"),ie(fn,"@firebase/analytics-compat","fire-analytics-compat"),ie(fn,"@firebase/app-check","fire-app-check"),ie(fn,"@firebase/app-check-compat","fire-app-check-compat"),ie(fn,"@firebase/auth","fire-auth"),ie(fn,"@firebase/auth-compat","fire-auth-compat"),ie(fn,"@firebase/database","fire-rtdb"),ie(fn,"@firebase/database-compat","fire-rtdb-compat"),ie(fn,"@firebase/functions","fire-fn"),ie(fn,"@firebase/functions-compat","fire-fn-compat"),ie(fn,"@firebase/installations","fire-iid"),ie(fn,"@firebase/installations-compat","fire-iid-compat"),ie(fn,"@firebase/messaging","fire-fcm"),ie(fn,"@firebase/messaging-compat","fire-fcm-compat"),ie(fn,"@firebase/performance","fire-perf"),ie(fn,"@firebase/performance-compat","fire-perf-compat"),ie(fn,"@firebase/remote-config","fire-rc"),ie(fn,"@firebase/remote-config-compat","fire-rc-compat"),ie(fn,"@firebase/storage","fire-gcs"),ie(fn,"@firebase/storage-compat","fire-gcs-compat"),ie(fn,"@firebase/firestore","fire-fst"),ie(fn,"@firebase/firestore-compat","fire-fst-compat"),ie(fn,"fire-js","fire-js"),ie(fn,"firebase","fire-js-all"),fn),En=new Map,In=new Map;function _n(e,t){try{e.container.addComponent(t)}catch(n){wn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Sn(e,t){e.container.addOrOverwriteComponent(t)}function Tn(e){var t=e.name;if(In.has(t))return wn.debug("There were multiple attempts to register component ".concat(t,".")),!1;In.set(t,e);var n,r=it(En.values());try{for(r.s();!(n=r.n()).done;){_n(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Cn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function An(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bn;Cn(e,t).clearInstance(n)}function Nn(){In.clear()}var Dn=(ie(hn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ie(hn,"bad-app-name","Illegal App name: '{$appName}"),ie(hn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ie(hn,"app-deleted","Firebase App named '{$appName}' already deleted"),ie(hn,"no-options","Need to provide options, when not being deployed to hosting via source."),ie(hn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ie(hn,"invalid-log-argument","First argument to `onLog` must be null or a function."),ie(hn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ie(hn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ie(hn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ie(hn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),hn),On=new Tt("app","Firebase",Dn),Pn=function(){function e(t,n,r){var i=this;Qe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vt("app",(function(){return i}),"PUBLIC"))}return Xe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}]),e}(),Rn="9.11.0";function Ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:bn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw On.create("bad-app-name",{appName:String(a)});if(n||(n=Et()),!n)throw On.create("no-options");var o=En.get(a);if(o){if(Dt(n,o.options)&&Dt(i,o.config))return o;throw On.create("duplicate-app",{appName:a})}var u,s=new Kt(a),c=it(In.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Pn(n,i,s);return En.set(a,f),f}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=En.get(e);if(!t&&e===bn)return Ln();if(!t)throw On.create("no-app",{appName:e});return t}function Fn(){return Array.from(En.values())}function Un(e){return jn.apply(this,arguments)}function jn(){return jn=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!En.has(n)){e.next=6;break}return En.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),jn.apply(this,arguments)}function Vn(e,t,n){var r,i=null!==(r=xn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wn.warn(u.join(" "))}Tn(new Vt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Bn(e,t){if(null!==e&&"function"!==typeof e)throw On.create("invalid-log-argument");!function(e,t){var n,r=it(Gt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Wt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ht[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function zn(e){var t;t=e,Gt.forEach((function(e){e.setLogLevel(t)}))}var qn="firebase-heartbeat-store",Hn=null;function Kn(){return Hn||(Hn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=cn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(cn(u.result),e.oldVersion,e.newVersion,cn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(qn)}}).catch((function(e){throw On.create("idb-open",{originalErrorMessage:e.message})}))),Hn}function Gn(e){return Wn.apply(this,arguments)}function Wn(){return Wn=We(Ke().mark((function e(t){var n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kn();case 3:return r=e.sent,e.abrupt("return",r.transaction(qn).objectStore(qn).get(Xn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof St?wn.warn(e.t0.message):(i=On.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),wn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Wn.apply(this,arguments)}function Qn(e,t){return Yn.apply(this,arguments)}function Yn(){return Yn=We(Ke().mark((function e(t,n){var r,i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kn();case 3:return i=e.sent,a=i.transaction(qn,"readwrite"),o=a.objectStore(qn),e.next=8,o.put(n,Xn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof St?wn.warn(e.t0.message):(u=On.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),wn.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Yn.apply(this,arguments)}function Xn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Jn=function(){function e(t){var n=this;Qe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new nr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Xe(e,[{key:"triggerHeartbeat",value:function(){var e=We(Ke().mark((function e(){var t,n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Zn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Zn(),n=$n(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ht(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zn(){return(new Date).toISOString().substring(0,10)}function $n(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=it(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),rr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),rr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var er,tr,nr=function(){function e(t){Qe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Xe(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Gn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ae(r.heartbeats),Ae(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function rr(e){return ht(JSON.stringify({version:2,heartbeats:e})).length}er="",Tn(new Vt("platform-logger",(function(e){return new mn(e)}),"PRIVATE")),Tn(new Vt("heartbeat",(function(e){return new Jn(e)}),"PRIVATE")),Vn(gn,kn,er),Vn(gn,kn,"esm2017"),Vn("fire-js","");var ir=function(){function e(t,n){var r=this;Qe(this,e),this._delegate=t,this.firebase=n,_n(t,new Vt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Xe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Un(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_n(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Sn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ar=(ie(tr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ie(tr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),tr),or=new Tt("app-compat","Firebase",ar);var ur=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ln(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Nt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Vn,setLogLevel:zn,onLog:Bn,apps:null,SDK_VERSION:Rn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Tn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw or.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&pt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Nt(n,e=e||bn))throw or.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ir);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){pt(n,e)},createSubscribe:Mt,ErrorFactory:Tt,deepExtend:pt}),n}(),sr=new Jt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){sr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var cr=self.firebase.SDK_VERSION;cr&&cr.indexOf("LITE")>=0&&sr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var lr=ur;!function(e){Vn("@firebase/app-compat","0.1.35",e)}();function fr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$e(e)););return e}function hr(){return hr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=fr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},hr.apply(this,arguments)}lr.registerVersion("firebase","9.11.0","app-compat");function dr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var pr;Object.create;var vr="facebook.com",yr="github.com",mr="google.com",gr="password",kr="twitter.com",wr="EMAIL_SIGNIN",br="PASSWORD_RESET",xr="RECOVER_EMAIL",Er="REVERT_SECOND_FACTOR_ADDITION",Ir="VERIFY_AND_CHANGE_EMAIL",_r="VERIFY_EMAIL";function Sr(){return ie({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Tr=function(){var e;return ie(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ie(e,"argument-error",""),ie(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ie(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ie(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ie(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ie(e,"cordova-not-ready","Cordova framework is not ready."),ie(e,"cors-unsupported","This browser is not supported."),ie(e,"credential-already-in-use","This credential is already associated with a different user account."),ie(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ie(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ie(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ie(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ie(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ie(e,"email-already-in-use","The email address is already in use by another account."),ie(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ie(e,"expired-action-code","The action code has expired."),ie(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ie(e,"internal-error","An internal AuthError has occurred."),ie(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ie(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ie(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ie(e,"invalid-auth-event","An internal AuthError has occurred."),ie(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ie(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ie(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ie(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ie(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ie(e,"invalid-email","The email address is badly formatted."),ie(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ie(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ie(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ie(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ie(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ie(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ie(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ie(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ie(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ie(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ie(e,"wrong-password","The password is invalid or the user does not have a password."),ie(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ie(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ie(e,"invalid-provider-id","The specified provider ID is invalid."),ie(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ie(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ie(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ie(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ie(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ie(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ie(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ie(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ie(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ie(e,"missing-continue-uri","A continue URL must be provided in the request."),ie(e,"missing-iframe-start","An internal AuthError has occurred."),ie(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ie(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ie(e,"missing-multi-factor-info","No second factor identifier is provided."),ie(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ie(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ie(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ie(e,"app-deleted","This instance of FirebaseApp has been deleted."),ie(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ie(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ie(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ie(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ie(e,"no-auth-event","An internal AuthError has occurred."),ie(e,"no-such-provider","User was not linked to an account with the given provider."),ie(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ie(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ie(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ie(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ie(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ie(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ie(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ie(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ie(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ie(e,"rejected-credential","The request contains malformed or mismatching credentials."),ie(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ie(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ie(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ie(e,"timeout","The operation has timed out."),ie(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ie(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ie(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ie(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ie(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ie(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ie(e,"unverified-email","The operation requires a verified email."),ie(e,"user-cancelled","The user did not grant your application the permissions it requested."),ie(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ie(e,"user-disabled","The user account has been disabled by an administrator."),ie(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ie(e,"user-signed-out",""),ie(e,"weak-password","The password must be 6 characters long or more."),ie(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ie(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Cr=Sr,Ar=new Tt("auth","Firebase",Sr()),Nr=new Jt("@firebase/auth");function Dr(e){if(Nr.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nr.error.apply(Nr,["Auth (".concat(Rn,"): ").concat(e)].concat(n))}}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Mr.apply(void 0,[e].concat(n))}function Pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mr.apply(void 0,[e].concat(n))}function Rr(e,t,n){var r=Object.assign(Object.assign({},Cr()),ie({},t,n));return new Tt("auth","Firebase",r).create(t,{appName:e.name})}function Lr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Or(e,"argument-error"),Rr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ae(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ae(o)))}return Ar.create.apply(Ar,[e].concat(n))}function Fr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Mr.apply(void 0,[t].concat(r))}}function Ur(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Dr(t),new Error(t)}function jr(e,t){e||Ur(t)}var Vr=new Map;function Br(e){jr(e instanceof Function,"Expected a class definition");var t=Vr.get(e);return t?(jr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vr.set(e,t),t)}function zr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qr(){return"http:"===Hr()||"https:"===Hr()}function Hr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Kr=function(){function e(t,n){Qe(this,e),this.shortDelay=t,this.longDelay=n,jr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())||gt()}return Xe(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qr()||mt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Gr(e,t){jr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Wr=function(){function e(){Qe(this,e)}return Xe(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Qr=(ie(pr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ie(pr,"MISSING_CUSTOM_TOKEN","internal-error"),ie(pr,"INVALID_IDENTIFIER","invalid-email"),ie(pr,"MISSING_CONTINUE_URI","internal-error"),ie(pr,"INVALID_PASSWORD","wrong-password"),ie(pr,"MISSING_PASSWORD","internal-error"),ie(pr,"EMAIL_EXISTS","email-already-in-use"),ie(pr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ie(pr,"INVALID_IDP_RESPONSE","invalid-credential"),ie(pr,"INVALID_PENDING_TOKEN","invalid-credential"),ie(pr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ie(pr,"MISSING_REQ_TYPE","internal-error"),ie(pr,"EMAIL_NOT_FOUND","user-not-found"),ie(pr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ie(pr,"EXPIRED_OOB_CODE","expired-action-code"),ie(pr,"INVALID_OOB_CODE","invalid-action-code"),ie(pr,"MISSING_OOB_CODE","internal-error"),ie(pr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ie(pr,"INVALID_ID_TOKEN","invalid-user-token"),ie(pr,"TOKEN_EXPIRED","user-token-expired"),ie(pr,"USER_NOT_FOUND","user-token-expired"),ie(pr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ie(pr,"INVALID_CODE","invalid-verification-code"),ie(pr,"INVALID_SESSION_INFO","invalid-verification-id"),ie(pr,"INVALID_TEMPORARY_PROOF","invalid-credential"),ie(pr,"MISSING_SESSION_INFO","missing-verification-id"),ie(pr,"SESSION_EXPIRED","code-expired"),ie(pr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ie(pr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ie(pr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ie(pr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ie(pr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ie(pr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ie(pr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ie(pr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ie(pr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ie(pr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ie(pr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),pr),Yr=new Kr(3e4,6e4);function Xr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Jr(e,t,n,r){return Zr.apply(this,arguments)}function Zr(){return Zr=We(Ke().mark((function e(t,n,r,i){var a,o=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",$r(t,a,We(Ke().mark((function e(){var a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Pt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Wr.fetch()(ri(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function $r(e,t,n){return ei.apply(this,arguments)}function ei(){return ei=We(Ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Qr),n),e.prev=2,a=new ii(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ai(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=ut(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw ai(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw ai(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw ai(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Rr(t,d,h);case 34:Or(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof St)){e.next=41;break}throw e.t0;case 41:Or(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),ei.apply(this,arguments)}function ti(e,t,n,r){return ni.apply(this,arguments)}function ni(){return ni=We(Ke().mark((function e(t,n,r,i){var a,o,u=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Jr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Or(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Gr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ii=function(){function e(t){var n=this;Qe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Pr(n.auth,"network-request-failed"))}),Yr.get())}))}return Xe(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ai(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Pr(e,t,r);return i.customData._tokenResponse=n,i}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return ci=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return fi=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function di(){return di=We(Ke().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=jt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Fr((a=vi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:hi(pi(a.auth_time)),issuedAtTime:hi(pi(a.iat)),expirationTime:hi(pi(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(e){return 1e3*Number(e)}function vi(e){var t,n=ut(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Dr("JWT malformed, contained fewer than 3 sections"),null;try{var o=dt(i);return o?JSON.parse(o):(Dr("Failed to decode base64 JWT payload"),null)}catch(u){return Dr("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function yi(e,t){return mi.apply(this,arguments)}function mi(){return mi=We(Ke().mark((function e(t,n){var r=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof St&&gi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),mi.apply(this,arguments)}function gi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ki=function(){function e(t){Qe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Xe(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),wi=function(){function e(t,n){Qe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Xe(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function bi(e){return xi.apply(this,arguments)}function xi(){return xi=We(Ke().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,yi(t,li(r,{idToken:i}));case 6:Fr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?_i(o.providerUserInfo):[],s=Ii(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new wi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Ei(){return(Ei=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jt(t),e.next=3,bi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ae(n),Ae(t))}function _i(e){return e.map((function(e){var t=e.providerId,n=dr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Si(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r(t,{},We(Ke().mark((function e(){var r,i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ri(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Wr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}var Ci=function(){function e(){Qe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Xe(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Fr(e.idToken,"internal-error"),Fr("undefined"!==typeof e.idToken,"internal-error"),Fr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=vi(e);return Fr(t,"internal-error"),Fr("undefined"!==typeof t.exp,"internal-error"),Fr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=We(Ke().mark((function e(t){var n,r=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Fr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Si(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ur("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Fr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Fr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Fr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ai(e,t){Fr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ni=function(){function e(t){Qe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=dr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ki(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ae(a.providerData):[],this.metadata=new wi(a.createdAt||void 0,a.lastLoginAt||void 0)}return Xe(e,[{key:"getIdToken",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Fr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return di.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ei.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Fr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Fr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=We(Ke().mark((function e(t){var n,r,i=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,bi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,yi(this,oi(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,E=n.stsTokenManager;Fr(k&&E,t,"internal-error");var I=Ci.fromJSON(this.name,E);Fr("string"===typeof k,t,"internal-error"),Ai(f,t.name),Ai(h,t.name),Fr("boolean"===typeof w,t,"internal-error"),Fr("boolean"===typeof b,t,"internal-error"),Ai(d,t.name),Ai(p,t.name),Ai(v,t.name),Ai(y,t.name),Ai(m,t.name),Ai(g,t.name);var _=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(_.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(_._redirectEventId=y),_}},{key:"_fromIdTokenResponse",value:function(){var t=We(Ke().mark((function t(n,r){var i,a,o,u=arguments;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ci).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,bi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Di=function(){function e(){Qe(this,e),this.type="NONE",this.storage={}}return Xe(e,[{key:"_isAvailable",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Di.type="NONE";var Oi=Di;function Pi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ri=function(){function e(t,n,r){Qe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Pi(this.userKey,a.apiKey,o),this.fullPersistenceKey=Pi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Xe(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ni._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=We(Ke().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Br(Oi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Br(Oi),u=Pi(i,n.config.apiKey,n.name),s=null,c=it(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ni._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Li(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ji(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bi(t))return"Blackberry";if(zi(t))return"Webos";if(Fi(t))return"Safari";if((t.includes("chrome/")||Ui(t))&&!t.includes("edge/"))return"Chrome";if(Vi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/firefox\//i.test(e)}function Fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/crios\//i.test(e)}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iemobile/i.test(e)}function Vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/android/i.test(e)}function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/blackberry/i.test(e)}function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/webos/i.test(e)}function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return qi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ki(){return kt()&&10===document.documentMode}function Gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return qi(e)||Vi(e)||zi(e)||Bi(e)||/windows phone/i.test(e)||ji(e)}function Wi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Li(vt());break;case"Worker":t="".concat(Li(vt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Rn,"/").concat(r)}var Qi=function(){function e(t){Qe(this,e),this.auth=t,this.queue=[]}return Xe(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=We(Ke().mark((function e(t){var n,r,i,a,o,u,s,c;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=it(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=it(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(jT){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Yi=function(){function e(t,n,r){Qe(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ji(this),this.idTokenSubscription=new Ji(this),this.beforeStateQueue=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ar,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Xe(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(We(Ke().mark((function r(){var i,a;return Ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ri.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=We(Ke().mark((function e(t){var n,r,i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Fr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?jt(t):null)&&Fr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=We(Ke().mark((function e(t){var n,r=this,i=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Fr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(We(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Br(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Tt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Fr(n=t&&Br(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ri.create(this,[Br(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=We(Ke().mark((function e(t){var n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Fr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Fr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=We(Ke().mark((function e(){var t,n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xi(e){return jt(e)}var Ji=function(){function e(t){var n=this;Qe(this,e),this.auth=t,this.observer=null,this.addObserver=Mt((function(e){return n.observer=e}))}return Xe(e,[{key:"next",get:function(){return Fr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Zi(e,t,n){var r=Xi(e);Fr(r._canInitEmulator,r,"emulator-config-failed"),Fr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=$i(t),o=function(e){var t=$i(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ea(r.substr(a.length+1))}}var o=ut(r.split(":"),2);return{host:o[0],port:ea(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $i(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ea(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ta=function(){function e(t,n){Qe(this,e),this.providerId=t,this.signInMethod=n}return Xe(e,[{key:"toJSON",value:function(){return Ur("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ur("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ur("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ur("not implemented")}}]),e}();function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:resetPassword",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function oa(e,t){return ua.apply(this,arguments)}function ua(){return ua=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:update",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function sa(e,t){return ca.apply(this,arguments)}function ca(){return ca=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPassword",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}function la(e,t){return fa.apply(this,arguments)}function fa(){return fa=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:sendOobCode",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function ha(e,t){return da.apply(this,arguments)}function da(){return da=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,n));case 1:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(e,t){return va.apply(this,arguments)}function va(){return va=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,n));case 1:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ya(e,t){return ma.apply(this,arguments)}function ma(){return ma=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,n));case 1:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ga(e,t){return ka.apply(this,arguments)}function ka(){return ka=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,n));case 1:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function wa(e,t){return ba.apply(this,arguments)}function ba(){return ba=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithEmailLink",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function xa(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithEmailLink",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}var Ia=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Qe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Xe(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",sa(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wa(t,{email:this._email,oobCode:this._password}));case 5:Or(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ia(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",xa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Or(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ta);function _a(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithIdp",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}var Ta=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Xe(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _a(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_a(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=dr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ta);function Ca(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:sendVerificationCode",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}function Na(){return Na=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Da(){return Da=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Xr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ai(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}var Oa=ie({},"USER_NOT_FOUND","user-not-found");function Pa(){return Pa=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Xr(t,r),Oa));case 2:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}var Ra=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Xe(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Na.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Da.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Pa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ta);var La=function(){function e(t){var n,r,i,a,o,u;Qe(this,e);var s=Rt(Lt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Fr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Xe(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Rt(Lt(e)).link,n=t?Rt(Lt(t)).deep_link_id:null,r=Rt(Lt(e)).deep_link_id;return(r?Rt(Lt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(zI){return null}}}]),e}();var Ma=function(){function e(){Qe(this,e),this.providerId=e.PROVIDER_ID}return Xe(e,null,[{key:"credential",value:function(e,t){return Ia._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=La.parseLink(t);return Fr(n,"argument-error"),Ia._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ma.PROVIDER_ID="password",Ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Fa=function(){function e(t){Qe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Xe(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ua=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Xe(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ae(this.scopes)}}]),n}(Fa),ja=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Fr(e.idToken||e.accessToken,"argument-error"),Ta._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Fr("providerId"in t&&"signInMethod"in t,"argument-error"),Ta._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ua),Va=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.call(this,"facebook.com")}return Xe(n,null,[{key:"credential",value:function(e){return Ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(zI){return null}}}]),n}(Ua);Va.FACEBOOK_SIGN_IN_METHOD="facebook.com",Va.PROVIDER_ID="facebook.com";var Ba=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Xe(n,null,[{key:"credential",value:function(e,t){return Ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(zI){return null}}}]),n}(Ua);Ba.GOOGLE_SIGN_IN_METHOD="google.com",Ba.PROVIDER_ID="google.com";var za=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.call(this,"github.com")}return Xe(n,null,[{key:"credential",value:function(e){return Ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(zI){return null}}}]),n}(Ua);za.GITHUB_SIGN_IN_METHOD="github.com",za.PROVIDER_ID="github.com";var qa=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Xe(n,[{key:"_getIdTokenResponse",value:function(e){return _a(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_a(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ta),Ha=function(e){Ze(n,e);var t=rt(n);function n(e){return Qe(this,n),Fr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Xe(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=qa.fromJSON(e);return Fr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return qa._create(r,n)}catch(i){return null}}}]),n}(Fa),Ka=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.call(this,"twitter.com")}return Xe(n,null,[{key:"credential",value:function(e,t){return Ta._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(zI){return null}}}]),n}(Ua);function Ga(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signUp",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}Ka.TWITTER_SIGN_IN_METHOD="twitter.com",Ka.PROVIDER_ID="twitter.com";var Qa=function(){function e(t){Qe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Xe(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=We(Ke().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ni._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ya(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=We(Ke().mark((function t(n,r,i){var a;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ya(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ya(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Xa(){return Xa=We(Ke().mark((function e(t){var n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Qa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ga(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Qa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}var Ja=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a){var o,u;return Qe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(tt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Xe(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(St);function Za(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ja._fromErrorAndOperation(e,n,t,r);throw n}))}function $a(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function eo(e,t){return to.apply(this,arguments)}function to(){return to=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jt(t),e.next=3,io(!0,r,n);case 3:return e.t0=si,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=$a(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}function no(e,t){return ro.apply(this,arguments)}function ro(){return ro=We(Ke().mark((function e(t,n){var r,i,a=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=yi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}function io(e,t,n){return ao.apply(this,arguments)}function ao(){return ao=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi(n);case 2:i=$a(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Fr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function oo(e,t){return uo.apply(this,arguments)}function uo(){return uo=We(Ke().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,yi(t,Za(a,o,n,t),r);case 6:return Fr((u=e.sent).idToken,a,"internal-error"),Fr(s=vi(u.idToken),a,"internal-error"),c=s.sub,Fr(t.uid===c,a,"user-mismatch"),e.abrupt("return",Qa._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Or(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),uo.apply(this,arguments)}function so(e,t){return co.apply(this,arguments)}function co(){return co=We(Ke().mark((function e(t,n){var r,i,a,o,u=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Za(t,i,n);case 4:return a=e.sent,e.next=7,Qa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}function lo(e,t){return fo.apply(this,arguments)}function fo(){return fo=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so(Xi(t),n));case 1:case"end":return e.stop()}}),e)}))),fo.apply(this,arguments)}function ho(e,t){return po.apply(this,arguments)}function po(){return(po=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jt(t),e.next=3,io(!1,r,n.providerId);case 3:return e.abrupt("return",no(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oo(jt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e,t){return go.apply(this,arguments)}function go(){return go=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithCustomToken",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(){return ko=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xi(t),e.next=3,mo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Qa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}var wo=function(){function e(t,n){Qe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Xe(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?bo._fromServerResponse(e,t):Or(e,"internal-error")}}]),e}(),bo=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Xe(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(wo);function xo(e,t,n){var r;Fr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Fr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Fr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Fr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Eo(){return Eo=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),a={requestType:"PASSWORD_RESET",email:n},r&&xo(i,a,r),e.next=5,pa(i,a);case 5:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function Io(){return Io=We(Ke().mark((function e(t,n,r){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(jt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function _o(){return _o=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oa(jt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function So(e,t){return To.apply(this,arguments)}function To(){return To=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jt(t),e.next=3,na(r,{oobCode:n});case 3:i=e.sent,Fr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Fr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Fr(i.mfaInfo,r,"internal-error");case 13:Fr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=wo._fromServerResponse(Xi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(){return Co=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,So(jt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function Ao(e,t,n){return No.apply(this,arguments)}function No(){return No=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xi(t),e.next=3,Ga(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Qa._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Do(){return Do=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),a={requestType:"EMAIL_SIGNIN",email:n},Fr(r.handleCodeInApp,i,"argument-error"),r&&xo(i,a,r),e.next=6,ya(i,a);case 6:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Oo(){return Oo=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),Fr((a=Ma.credentialWithLink(n,r||zr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",lo(i,a));case 4:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Po(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:createAuthUri",Xr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Lo(){return Lo=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qr()?zr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Po(jt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Mo(){return(Mo=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&xo(r.auth,a,n),e.next=8,ha(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(){return(Fo=We(Ke().mark((function e(t,n,r){var i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&xo(i.auth,o,r),e.next=8,ga(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t){return jo.apply(this,arguments)}function jo(){return jo=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Vo(){return(Vo=We(Ke().mark((function e(t,n){var r,i,a,o,u,s,c;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=jt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,yi(a,Uo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t,n){return zo.apply(this,arguments)}function zo(){return zo=We(Ke().mark((function e(t,n,r){var i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,yi(t,ia(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}var qo=Xe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ho=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a){var o;return Qe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Xe(n)}(qo),Ko=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"facebook.com",r)}return Xe(n)}(qo),Go=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Xe(n)}(Ho),Wo=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"google.com",r)}return Xe(n)}(qo),Qo=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){return Qe(this,n),t.call(this,e,"twitter.com",r,i)}return Xe(n)}(Ho);function Yo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=vi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new qo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ko(a,i);case"github.com":return new Go(a,i);case"google.com":return new Wo(a,i);case"twitter.com":return new Qo(a,i,e.screenName||null);case"custom":case"anonymous":return new qo(a,null);default:return new qo(a,r,i)}}(n)}var Xo=function(){function e(t,n,r){Qe(this,e),this.type=t,this.credential=n,this.auth=r}return Xe(e,[{key:"toJSON",value:function(){return{multiFactorSession:ie({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Jo=function(){function e(t,n,r){Qe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Xe(e,[{key:"resolveSignIn",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Xi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return wo._fromServerResponse(r,e)}));Fr(i.mfaPendingCredential,r,"internal-error");var o=Xo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=We(Ke().mark((function e(t){var a,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Qa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Fr(n.user,r,"internal-error"),e.abrupt("return",Qa._forOperation(n.user,n.operationType,u));case 17:Or(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Zo(e,t){return Jr(e,"POST","/v2/accounts/mfaEnrollment:start",Xr(e,t))}function $o(e,t){return Jr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Xr(e,t))}var eu=function(){function e(t){var n=this;Qe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return wo._fromServerResponse(t.auth,e)})))}))}return Xe(e,[{key:"getSession",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Xo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,yi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=We(Ke().mark((function e(t){var n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,yi(this.user,$o(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),tu=new WeakMap;var nu="__sak",ru=function(){function e(t,n){Qe(this,e),this.storageRetriever=t,this.type=n}return Xe(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch(zI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var iu=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=vt();return Fi(e)||qi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Gi(),e._shouldAllowMigration=!0,e}return Xe(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ki()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=We(Ke().mark((function e(t,r){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr($e(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=We(Ke().mark((function e(t){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr($e(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr($e(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ru);iu.type="LOCAL";var au=iu,ou=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Xe(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ru);ou.type="SESSION";var uu=ou;function su(e){return Promise.all(e.map(function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var cu=function(){function e(t){Qe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Xe(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=We(Ke().mark((function e(t){var n,r,i,a,o,u,s,c;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,su(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function lu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cu.receivers=[];var fu=function(){function e(t){Qe(this,e),this.target=t,this.handlers=new Set}return Xe(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=lu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function hu(){return window}function du(){return"undefined"!==typeof hu().WorkerGlobalScope&&"function"===typeof hu().importScripts}function pu(){return vu.apply(this,arguments)}function vu(){return(vu=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function yu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var mu="firebaseLocalStorageDb",gu="firebaseLocalStorage",ku="fbase_key",wu=function(){function e(t){Qe(this,e),this.request=t}return Xe(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function bu(e,t){return e.transaction([gu],t?"readwrite":"readonly").objectStore(gu)}function xu(){var e=indexedDB.deleteDatabase(mu);return new wu(e).toPromise()}function Eu(){var e=indexedDB.open(mu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gu,{keyPath:ku})}catch(r){n(r)}})),e.addEventListener("success",We(Ke().mark((function n(){var r;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gu)){n.next=12;break}return r.close(),n.next=5,xu();case 5:return n.t0=t,n.next=8,Eu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Iu(e,t,n){return _u.apply(this,arguments)}function _u(){return _u=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bu(t,!0).put((ie(i={},ku,n),ie(i,"value",r),i)),e.abrupt("return",new wu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bu(t,!1).get(n),e.next=3,new wu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Cu(e,t){var n=bu(e,!0).delete(t);return new wu(n).toPromise()}var Au=function(){function e(){Qe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Xe(e,[{key:"_openDb",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Eu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",du()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=We(Ke().mark((function e(){var t=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=cu._getInstance(du()?self:null),this.receiver._subscribe("keyChanged",function(){var e=We(Ke().mark((function e(n,r){var i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=We(Ke().mark((function e(){var t,n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new fu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&yu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Eu();case 5:return t=e.sent,e.next=8,Iu(t,nu,"1");case 8:return e.next=10,Cu(t,nu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=We(Ke().mark((function e(t,n){var r=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Iu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Su(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=We(Ke().mark((function e(t){var n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Cu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=bu(e,!1).getAll();return new wu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=it(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Au.type="LOCAL";var Nu=Au;function Du(e,t){return Jr(e,"POST","/v2/accounts/mfaSignIn:start",Xr(e,t))}function Ou(e){return Pu.apply(this,arguments)}function Pu(){return Pu=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Ru(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Pr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Lu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Mu=1e12,Fu=function(){function e(t){Qe(this,e),this.auth=t,this.counter=Mu,this._widgets=new Map}return Xe(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Uu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Mu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Mu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Mu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Uu=function(){function e(t,n,r){var i=this;Qe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Fr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Xe(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ju=Lu("rcb"),Vu=new Kr(3e4,6e4),Bu="https://www.google.com/recaptcha/api.js?",zu=function(){function e(){var t;Qe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=hu().grecaptcha)||void 0===t?void 0:t.render)}return Xe(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Fr(qu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(hu().grecaptcha):new Promise((function(r,i){var a=hu().setTimeout((function(){i(Pr(e,"network-request-failed"))}),Vu.get());hu()[ju]=function(){hu().clearTimeout(a),delete hu()[ju];var o=hu().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Pr(e,"internal-error"))},Ru("".concat(Bu,"?").concat(Pt({onload:ju,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Pr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=hu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function qu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Hu=function(){function e(){Qe(this,e)}return Xe(e,[{key:"load",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Fu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ku="recaptcha",Gu={theme:"light",type:"image"},Wu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Gu),r=arguments.length>2?arguments[2]:void 0;Qe(this,e),this.parameters=n,this.type=Ku,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xi(r),this.isInvisible="invisible"===this.parameters.size,Fr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Fr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hu:new zu,this.validateStartingState()}return Xe(e,[{key:"verify",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Fr(!this.parameters.sitekey,this.auth,"argument-error"),Fr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=hu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Fr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=We(Ke().mark((function e(){var t,n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fr(qr()&&!du(),this.auth,"internal-error"),e.next=3,Qu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ou(this.auth);case 8:Fr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Fr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Qu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Yu=function(){function e(t,n){Qe(this,e),this.verificationId=t,this.onConfirmation=n}return Xe(e,[{key:"confirm",value:function(e){var t=Ra._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Xu(){return Xu=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xi(t),e.next=3,es(i,n,jt(r));case 3:return a=e.sent,e.abrupt("return",new Yu(a,(function(e){return lo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Ju(e,t,n){return Zu.apply(this,arguments)}function Zu(){return(Zu=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),e.next=3,io(!1,i,"phone");case 3:return e.next=5,es(i.auth,n,jt(r));case 5:return a=e.sent,e.abrupt("return",new Yu(a,(function(e){return ho(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(){return($u=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt(t),e.next=3,es(i.auth,n,jt(r));case 3:return a=e.sent,e.abrupt("return",new Yu(a,(function(e){return vo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return ts.apply(this,arguments)}function ts(){return ts=We(Ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Fr("string"===typeof a,t,"argument-error"),Fr(r.type===Ku,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Fr("enroll"===u.type,t,"internal-error"),e.next=13,Zo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Fr("signin"===u.type,t,"internal-error"),Fr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Du(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ca(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ts.apply(this,arguments)}function ns(){return(ns=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,no(jt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rs=function(){function e(t){Qe(this,e),this.providerId=e.PROVIDER_ID,this.auth=Xi(t)}return Xe(e,[{key:"verifyPhoneNumber",value:function(e,t){return es(this.auth,e,jt(t))}}],[{key:"credential",value:function(e,t){return Ra._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ra._fromTokenResponse(n,r):null}}]),e}();function is(e,t){return t?Br(t):(Fr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rs.PROVIDER_ID="phone",rs.PHONE_SIGN_IN_METHOD="phone";var as=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Xe(n,[{key:"_getIdTokenResponse",value:function(e){return _a(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _a(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _a(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ta);function os(e){return so(e.auth,new as(e),e.bypassAuthState)}function us(e){var t=e.auth,n=e.user;return Fr(n,t,"internal-error"),oo(n,new as(e),e.bypassAuthState)}function ss(e){return cs.apply(this,arguments)}function cs(){return cs=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Fr(r=t.user,n,"internal-error"),e.abrupt("return",no(r,new as(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}var ls=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Qe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Xe(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=We(Ke().mark((function t(n,r){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=We(Ke().mark((function e(t){var n,r,i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return os;case"linkViaPopup":case"linkViaRedirect":return ss;case"reauthViaPopup":case"reauthViaRedirect":return us;default:Or(this.auth,"internal-error")}}},{key:"resolve",value:function(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),fs=new Kr(2e3,1e4);function hs(e,t,n){return ds.apply(this,arguments)}function ds(){return ds=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xi(t),Lr(t,n,Fa),a=is(i,r),o=new ms(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}function ps(){return ps=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lr((i=jt(t)).auth,n,Fa),a=is(i.auth,r),o=new ms(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}function vs(e,t,n){return ys.apply(this,arguments)}function ys(){return ys=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lr((i=jt(t)).auth,n,Fa),a=is(i.auth,r),o=new ms(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}var ms=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a,o){var u;return Qe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=tt(u),u}return Xe(n,[{key:"executeNotNull",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Fr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=We(Ke().mark((function e(){var t,n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jr(1===this.filter.length,"Popup operations only handle one event"),t=lu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Pr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Pr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Pr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,fs.get())}()}}]),n}(ls);ms.currentPopupAction=null;var gs=new Map,ks=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Qe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Xe(n,[{key:"execute",value:function(){var e=We(Ke().mark((function e(){var t,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gs.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ws(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,hr($e(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:gs.set(this.auth._key(),t);case 21:return this.bypassAuthState||gs.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=We(Ke().mark((function e(t){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",hr($e(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",hr($e(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ls);function ws(e,t){return bs.apply(this,arguments)}function bs(){return bs=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ss(n),i=_s(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),bs.apply(this,arguments)}function xs(e,t){return Es.apply(this,arguments)}function Es(){return Es=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_s(t)._set(Ss(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}function Is(e,t){gs.set(e._key(),t)}function _s(e){return Br(e._redirectPersistence)}function Ss(e){return Pi("pendingRedirect",e.config.apiKey,e.name)}function Ts(e,t,n){return function(e,t,n){return Cs.apply(this,arguments)}(e,t,n)}function Cs(){return Cs=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xi(t),Lr(t,n,Fa),a=is(i,r),e.next=5,xs(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function As(e,t,n){return function(e,t,n){return Ns.apply(this,arguments)}(e,t,n)}function Ns(){return Ns=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lr((i=jt(t)).auth,n,Fa),a=is(i.auth,r),e.next=5,xs(a,i.auth);case 5:return e.next=7,Fs(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function Ds(e,t,n){return function(e,t,n){return Os.apply(this,arguments)}(e,t,n)}function Os(){return Os=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lr((i=jt(t)).auth,n,Fa),a=is(i.auth,r),e.next=5,io(!1,i,n.providerId);case 5:return e.next=7,xs(a,i.auth);case 7:return e.next=9,Fs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ps(e,t){return Rs.apply(this,arguments)}function Rs(){return Rs=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi(t)._initializationPromise;case 2:return e.abrupt("return",Ls(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return Ms=We(Ke().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Xi(t),a=is(i,n),o=new ks(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}function Fs(e){return Us.apply(this,arguments)}function Us(){return(Us=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var js=function(){function e(t){Qe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Xe(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Bs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Vs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Vs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Bs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function zs(e){return qs.apply(this,arguments)}function qs(){return qs=We(Ke().mark((function e(t){var n,r=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Jr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var Hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ks=/^https?/;function Gs(){return Gs=We(Ke().mark((function e(t){var n,r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,zs(t);case 4:n=e.sent,r=n.authorizedDomains,i=it(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ws(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Or(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Gs.apply(this,arguments)}function Ws(e){var t=zr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ks.test(r))return!1;if(Hs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Qs=new Kr(3e4,6e4);function Ys(){var e=hu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ae(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Xs=null;function Js(e){return Xs=Xs||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ys(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ys(),n(Pr(e,"network-request-failed"))},timeout:Qs.get()})}if(null===(i=null===(r=hu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=hu().gapi)||void 0===a?void 0:a.load)){var u=Lu("iframefcb");return hu()[u]=function(){gapi.load?o():n(Pr(e,"network-request-failed"))},Ru("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Xs=null,e}))}(e),Xs}var Zs=new Kr(5e3,15e3),$s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ec=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tc(e){var t=e.config;Fr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Gr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Rn},i=ec.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Pt(r).slice(1))}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Js(t);case 2:return n=e.sent,Fr(r=hu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:tc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$s,dontclear:!0},(function(e){return new Promise(function(){var n=We(Ke().mark((function n(r,i){var a,o,u;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){hu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Pr(t,"network-request-failed"),o=hu().setTimeout((function(){i(a)}),Zs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}var ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ac="_blank",oc="http://localhost",uc=function(){function e(t){Qe(this,e),this.window=t,this.associatedEvent=null}return Xe(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function sc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ic),{width:r.toString(),height:i.toString(),top:a,left:o}),c=vt().toLowerCase();n&&(u=Ui(c)?ac:n),Mi(c)&&(t=t||oc,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=ut(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Hi(c)&&"_self"!==u)return cc(t||"",u),new uc(null);var f=window.open(t||"",u,l);Fr(f,e,"popup-blocked");try{f.focus()}catch(h){}return new uc(f)}function cc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var lc="__/auth/handler",fc="emulator/auth/handler";function hc(e,t,n,r,i,a){Fr(e.config.authDomain,e,"auth-domain-config-required"),Fr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Rn,eventId:i};if(t instanceof Fa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=ut(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Ua){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(lc);return Gr(t,fc)}(e),"?").concat(Pt(d).slice(1))}var dc="webStorageSupport",pc=function(){function e(){Qe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uu,this._completeRedirectFn=Ls,this._overrideRedirectResult=Is}return Xe(e,[{key:"_openPopup",value:function(){var e=We(Ke().mark((function e(t,n,r,i){var a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=hc(t,n,r,zr(),i),e.abrupt("return",sc(t,o,lu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=We(Ke().mark((function e(t,n,r,i){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=hc(t,n,r,zr(),i),hu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(jr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc(t);case 2:return n=e.sent,r=new js(t),n.register("authEvent",(function(e){return Fr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(dc,{type:dc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Or(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Gs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Gi()||Fi()||qi()}}]),e}(),vc=pc,yc=function(){function e(t){Qe(this,e),this.factorId=t}return Xe(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ur("unexpected MultiFactorSessionType")}}}]),e}(),mc=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,"phone")).credential=e,r}return Xe(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Jr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Xr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Jr(e,"POST","/v2/accounts/mfaSignIn:finalize",Xr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(yc),gc=function(){function e(){Qe(this,e)}return Xe(e,null,[{key:"assertion",value:function(e){return mc._fromCredential(e)}}]),e}();gc.FACTOR_ID="phone";var kc="@firebase/auth",wc="0.20.8",bc=function(){function e(t){Qe(this,e),this.auth=t,this.internalListeners=new Map}return Xe(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Fr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var xc;!function(e){var t;null===(t=xt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Ec(){return window}xc="Browser",Tn(new Vt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Fr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Fr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:xc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wi(xc)},i=new Yi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Tn(new Vt("auth-internal",(function(e){return function(e){return new bc(e)}(Xi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(kc,wc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xc)),Vn(kc,wc,"esm2017");function Ic(e,t,n){return _c.apply(this,arguments)}function _c(){return _c=We(Ke().mark((function e(t,n,r){var i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ec(),o=a.BuildInfo,jr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Dc(n.sessionId);case 4:return u=e.sent,s={},qi()?s.ibi=o.packageName:Vi()?s.apn=o.packageName:Or(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",hc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Sc(){return Sc=We(Ke().mark((function e(t){var n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ec(),r=n.BuildInfo,i={},qi()?i.iosBundleId=r.packageName:Vi()?i.androidPackageName=r.packageName:Or(t,"operation-not-supported-in-this-environment"),e.next=5,zs(t,i);case 5:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Tc(e){var t=Ec().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Cc(e,t,n){return Ac.apply(this,arguments)}function Ac(){return Ac=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ec(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Pr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Vi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ac.apply(this,arguments)}function Nc(e){var t,n,r,i,a,o,u,s,c,l,f=Ec();Fr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Fr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Fr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Dc(e){return Oc.apply(this,arguments)}function Oc(){return(Oc=We(Ke().mark((function e(t){var n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pc(e){if(jr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Rc=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Xe(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),hr($e(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(js);function Lc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Vc(),postBody:null,tenantId:e.tenantId,error:Pr(e,"no-auth-event")}}function Mc(e,t){return Bc()._set(zc(e),t)}function Fc(e){return Uc.apply(this,arguments)}function Uc(){return Uc=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bc()._get(zc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Bc()._remove(zc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}function jc(e,t){var n,r,i=function(e){var t=qc(e),n=t.link?decodeURIComponent(t.link):void 0,r=qc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=qc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Pr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Vc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Bc(){return Br(au)}function zc(e){return Pi("authEvent",e.config.apiKey,e.name)}function qc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=at(t=n)||Te(t)||Ce(t)||ot();r[0];return Rt(r.slice(1).join("?"))}var Hc=function(){function e(){Qe(this,e),this._redirectPersistence=uu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ls,this._overrideRedirectResult=Is}return Xe(e,[{key:"_initialize",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Rc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Or(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=We(Ke().mark((function e(t,n,r,i){var a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),gs.clear(),e.next=10,this._originValidation(t);case 10:return o=Lc(t,r,i),e.next=13,Mc(t,o);case 13:return e.next=15,Ic(t,o,n);case 15:return u=e.sent,e.next=18,Tc(u);case 18:return s=e.sent,e.abrupt("return",Cc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Sc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ec(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(We(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Fc(e);case 2:t.onEvent(Gc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=We(Ke().mark((function n(r){var i,a;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Fc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=jc(i,r.url)),t.onEvent(a||Gc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ec().handleOpenURL=function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Kc=Hc;function Gc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pr("no-auth-event")}}function Wc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Qc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return!("file:"!==Wc()&&"ionic:"!==Wc()&&"capacitor:"!==Wc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yc(){return kt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Xc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/Edge\/\d+/.test(e)}function Jc(){try{var e=self.localStorage,t=lu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return Yc()||Xc(e)}()||wt()}catch(n){return Zc()&&wt()}return!1}function Zc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function $c(){return("http:"===Wc()||"https:"===Wc()||mt()||Qc())&&!(gt()||yt())&&Jc()&&!Zc()}function el(){return Qc()&&"undefined"!==typeof document}function tl(){return nl.apply(this,arguments)}function nl(){return(nl=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(el()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rl={LOCAL:"local",NONE:"none",SESSION:"session"},il=Fr,al="persistence";function ol(e,t){il(Object.values(rl).includes(t),e,"invalid-persistence-type"),gt()?il(t!==rl.SESSION,e,"unsupported-persistence-type"):yt()?il(t===rl.NONE,e,"unsupported-persistence-type"):Zc()?il(t===rl.NONE||t===rl.LOCAL&&wt(),e,"unsupported-persistence-type"):il(t===rl.NONE||Jc(),e,"unsupported-persistence-type")}function ul(e){return sl.apply(this,arguments)}function sl(){return sl=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=cl(),r=Pi(al,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function cl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ll=Fr,fl=function(){function e(){Qe(this,e),this.browserResolver=Br(vc),this.cordovaResolver=Br(Kc),this.underlyingResolver=null,this._redirectPersistence=uu,this._completeRedirectFn=Ls,this._overrideRedirectResult=Is}return Xe(e,[{key:"_initialize",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=We(Ke().mark((function e(t,n,r,i){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=We(Ke().mark((function e(t,n,r,i){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return el()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ll(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function hl(e){return e.unwrap()}function dl(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new gl(e,function(e,t){var n,r=jt(e),i=t;return Fr(t.customData.operationType,r,"argument-error"),Fr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Jo._fromError(r,i)}(e,t));else if(i){var a=pl(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function pl(e){var t=(e instanceof St?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof St)&&"temporaryProof"in t&&"phoneNumber"in t)return rs.credentialFromResult(e);var n,r=t.providerId;if(!r||r===gr)return null;switch(r){case mr:n=Ba;break;case vr:n=Va;break;case yr:n=za;break;case kr:n=Ka;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?qa._create(r,u):Ta._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ja(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof St?n.credentialFromError(e):n.credentialFromResult(e)}function vl(e,t){return t.catch((function(t){throw t instanceof St&&dl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,pl(t)),additionalUserInfo:Yo(e),user:kl.getOrCreate(r)}}))}function yl(e,t){return ml.apply(this,arguments)}function ml(){return ml=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return vl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),ml.apply(this,arguments)}var gl=function(){function e(t,n){Qe(this,e),this.resolver=n,this.auth=t.wrapped()}return Xe(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return vl(hl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),kl=function(){function e(t){Qe(this,e),this._delegate=t,this.multiFactor=function(e){var t=jt(e);return tu.has(t)||tu.set(t,eu._fromUser(t)),tu.get(t)}(t)}return Xe(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(this.auth,ho(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yl(this.auth,Ju(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(this.auth,vs(this._delegate,t,fl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ul(Xi(this.auth));case 2:return e.abrupt("return",Ds(this._delegate,t,fl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(this.auth,vo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return yl(this.auth,function(e,t,n){return $u.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return vl(this.auth,function(e,t,n){return ps.apply(this,arguments)}(this._delegate,e,fl))}},{key:"reauthenticateWithRedirect",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ul(Xi(this.auth));case 2:return e.abrupt("return",As(this._delegate,t,fl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Mo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eo(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Bo(jt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Bo(jt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ns.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Vo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Fo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();kl.USER_MAP=new WeakMap;var wl=Fr,bl=function(){function e(t,n){if(Qe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;wl(r,"invalid-api-key",{appName:t.name}),wl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?fl:void 0;this._delegate=n.initialize({options:{persistence:El(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Tr),this.linkUnderlyingAuth()}return Xe(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?kl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Zi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return _o.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return So(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Io.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(this._delegate,Ao(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Lo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=La.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ps(this._delegate,fl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",vl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Xi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=xl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=xl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Eo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ol(this._delegate,t),e.t0=t,e.next=e.t0===rl.SESSION?4:e.t0===rl.LOCAL?6:e.t0===rl.NONE?11:13;break;case 4:return n=uu,e.abrupt("break",14);case 6:return e.next=8,Br(Nu)._isAvailable();case 8:return r=e.sent,n=r?Nu:au,e.abrupt("break",14);case 11:return n=Oi,e.abrupt("break",14);case 13:return e.abrupt("return",Or("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return vl(this._delegate,function(e){return Xa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return vl(this._delegate,lo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return vl(this._delegate,function(e,t){return ko.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return vl(this._delegate,function(e,t,n){return lo(jt(e),Ma.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return vl(this._delegate,function(e,t,n){return Oo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return yl(this._delegate,function(e,t,n){return Xu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",vl(this._delegate,hs(this._delegate,t,fl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wl($c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ul(this._delegate);case 3:return e.abrupt("return",Ts(this._delegate,t,fl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Co.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function xl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&kl.getOrCreate(e))},error:t,complete:n}}function El(e,t){var n=function(e,t){var n=cl();if(!n)return[];var r=Pi(al,e,t);switch(n.getItem(r)){case rl.NONE:return[Oi];case rl.LOCAL:return[Nu,uu];case rl.SESSION:return[uu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Nu)||n.push(Nu),"undefined"!==typeof window)for(var r=0,i=[au,uu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Oi)||n.push(Oi),n}bl.Persistence=rl;var Il=function(){function e(){Qe(this,e),this.providerId="phone",this._delegate=new rs(hl(lr.auth()))}return Xe(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return rs.credential(e,t)}}]),e}();Il.PHONE_SIGN_IN_METHOD=rs.PHONE_SIGN_IN_METHOD,Il.PROVIDER_ID=rs.PROVIDER_ID;var _l,Sl=Fr,Tl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr.app();Qe(this,e),Sl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Wu(t,n,i.auth()),this.type=this._delegate.type}return Xe(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(_l=lr).INTERNAL.registerComponent(new Vt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new bl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wr,PASSWORD_RESET:br,RECOVER_EMAIL:xr,REVERT_SECOND_FACTOR_ADDITION:Er,VERIFY_AND_CHANGE_EMAIL:Ir,VERIFY_EMAIL:_r}},EmailAuthProvider:Ma,FacebookAuthProvider:Va,GithubAuthProvider:za,GoogleAuthProvider:Ba,OAuthProvider:ja,SAMLAuthProvider:Ha,PhoneAuthProvider:Il,PhoneMultiFactorGenerator:gc,RecaptchaVerifier:Tl,TwitterAuthProvider:Ka,Auth:bl,AuthCredential:ta,Error:St}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_l.registerVersion("@firebase/auth-compat","0.2.21");var Cl,Al="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Nl={},Dl=Dl||{},Ol=Al||self;function Pl(){}function Rl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ll(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ml="closure_uid_"+(1e9*Math.random()>>>0),Fl=0;function Ul(e,t,n){return e.call.apply(e.bind,arguments)}function jl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Vl(e,t,n){return(Vl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ul:jl).apply(null,arguments)}function Bl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zl(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ql(){this.s=this.s,this.o=this.o}var Hl={};ql.prototype.s=!1,ql.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ml)&&e[Ml]||(e[Ml]=++Fl)}(this);delete Hl[e]}},ql.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Kl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Gl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Wl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Rl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Ql(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ql.prototype.h=function(){this.defaultPrevented=!0};var Yl=function(){if(!Ol.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ol.addEventListener("test",Pl,t),Ol.removeEventListener("test",Pl,t)}catch(n){}return e}();function Xl(e){return/^[\s\xa0]*$/.test(e)}var Jl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Zl(e,t){return e<t?-1:e>t?1:0}function $l(){var e=Ol.navigator;return e&&(e=e.userAgent)?e:""}function ef(e){return-1!=$l().indexOf(e)}function tf(e){return tf[" "](e),e}tf[" "]=Pl;var nf,rf=ef("Opera"),af=ef("Trident")||ef("MSIE"),of=ef("Edge"),uf=of||af,sf=ef("Gecko")&&!(-1!=$l().toLowerCase().indexOf("webkit")&&!ef("Edge"))&&!(ef("Trident")||ef("MSIE"))&&!ef("Edge"),cf=-1!=$l().toLowerCase().indexOf("webkit")&&!ef("Edge");function lf(){var e=Ol.document;return e?e.documentMode:void 0}e:{var ff="",hf=function(){var e=$l();return sf?/rv:([^\);]+)(\)|;)/.exec(e):of?/Edge\/([\d\.]+)/.exec(e):af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):cf?/WebKit\/(\S+)/.exec(e):rf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hf&&(ff=hf?hf[1]:""),af){var df=lf();if(null!=df&&df>parseFloat(ff)){nf=String(df);break e}}nf=ff}var pf,vf={};function yf(){return function(e){var t=vf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Jl(String(nf)).split("."),n=Jl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Zl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Zl(0==a[2].length,0==o[2].length)||Zl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ol.document&&af){var mf=lf();pf=mf||(parseInt(nf,10)||void 0)}else pf=void 0;var gf=pf;function kf(e,t){if(Ql.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sf){e:{try{tf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:wf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&kf.X.h.call(this)}}zl(kf,Ql);var wf={2:"touch",3:"pen",4:"mouse"};kf.prototype.h=function(){kf.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var bf="closure_listenable_"+(1e6*Math.random()|0),xf=0;function Ef(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++xf,this.ba=this.ea=!1}function If(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function _f(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Sf(e){var t={};for(var n in e)t[n]=e[n];return t}var Tf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Tf.length;a++)n=Tf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Af(e){this.src=e,this.g={},this.h=0}function Nf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Kl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(If(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Df(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Af.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Df(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Ef(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Of="closure_lm_"+(1e6*Math.random()|0),Pf={};function Rf(e,t,n,r,i){if(r&&r.once)return Mf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Rf(e,t[a],n,r,i);return null}return n=qf(n),e&&e[bf]?e.N(t,n,Ll(r)?!!r.capture:!!r,i):Lf(e,t,n,!1,r,i)}function Lf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ll(i)?!!i.capture:!!i,u=Bf(e);if(u||(e[Of]=u=new Af(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Vf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(jf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Mf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Mf(e,t[a],n,r,i);return null}return n=qf(n),e&&e[bf]?e.O(t,n,Ll(r)?!!r.capture:!!r,i):Lf(e,t,n,!0,r,i)}function Ff(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ff(e,t[a],n,r,i);else r=Ll(r)?!!r.capture:!!r,n=qf(n),e&&e[bf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Df(a=e.g[t],n,r,i))&&(If(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Bf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Df(t,n,r,i)),(n=-1<e?t[e]:null)&&Uf(n))}function Uf(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[bf])Nf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(jf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Bf(t))?(Nf(n,e),0==n.h&&(n.src=null,t[Of]=null)):If(e)}}}function jf(e){return e in Pf?Pf[e]:Pf[e]="on"+e}function Vf(e,t){if(e.ba)e=!0;else{t=new kf(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Uf(e),e=n.call(r,t)}return e}function Bf(e){return(e=e[Of])instanceof Af?e:null}var zf="__closure_events_fn_"+(1e9*Math.random()>>>0);function qf(e){return"function"===typeof e?e:(e[zf]||(e[zf]=function(t){return e.handleEvent(t)}),e[zf])}function Hf(){ql.call(this),this.i=new Af(this),this.P=this,this.I=null}function Kf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ql(t,e);else if(t instanceof Ql)t.target=t.target||e;else{var i=t;Cf(t=new Ql(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Gf(o,r,!0,t)&&i}if(i=Gf(o=t.g=e,r,!0,t)&&i,i=Gf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Gf(o=t.g=n[a],r,!1,t)&&i}function Gf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Nf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}zl(Hf,ql),Hf.prototype[bf]=!0,Hf.prototype.removeEventListener=function(e,t,n,r){Ff(this,e,t,n,r)},Hf.prototype.M=function(){if(Hf.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)If(n[r]);delete t.g[e],t.h--}}this.I=null},Hf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Hf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Wf=Ol.JSON.stringify;function Qf(){var e=nh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Yf,Xf=function(){function e(){Qe(this,e),this.h=this.g=null}return Xe(e,[{key:"add",value:function(e,t){var n=Jf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Jf=new(function(){function e(t,n){Qe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Xe(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Zf}),(function(e){return e.reset()})),Zf=function(){function e(){Qe(this,e),this.next=this.g=this.h=null}return Xe(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function $f(e){Ol.setTimeout((function(){throw e}),0)}function eh(e,t){Yf||function(){var e=Ol.Promise.resolve(void 0);Yf=function(){e.then(rh)}}(),th||(Yf(),th=!0),nh.add(e,t)}var th=!1,nh=new Xf;function rh(){for(var e;e=Qf();){try{e.h.call(e.g)}catch(n){$f(n)}var t=Jf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}th=!1}function ih(e,t){Hf.call(this),this.h=e||1,this.g=t||Ol,this.j=Vl(this.kb,this),this.l=Date.now()}function ah(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function oh(e,t,n){if("function"===typeof e)n&&(e=Vl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Vl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ol.setTimeout(e,t||0)}function uh(e){e.g=oh((function(){e.g=null,e.i&&(e.i=!1,uh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zl(ih,Hf),(Cl=ih.prototype).ca=!1,Cl.R=null,Cl.kb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kf(this,"tick"),this.ca&&(ah(this),this.start()))}},Cl.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Cl.M=function(){ih.X.M.call(this),ah(this),delete this.g};var sh=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Xe(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:uh(this)}},{key:"M",value:function(){hr($e(n.prototype),"M",this).call(this),this.g&&(Ol.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ql);function ch(e){ql.call(this),this.h=e,this.g={}}zl(ch,ql);var lh=[];function fh(e,t,n,r){Array.isArray(n)||(n&&(lh[0]=n.toString()),n=lh);for(var i=0;i<n.length;i++){var a=Rf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hh(e){_f(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Uf(e)}),e),e.g={}}function dh(){this.g=!0}function ph(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Wf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ch.prototype.M=function(){ch.X.M.call(this),hh(this)},ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dh.prototype.Aa=function(){this.g=!1},dh.prototype.info=function(){};var vh={},yh=null;function mh(){return yh=yh||new Hf}function gh(e){Ql.call(this,vh.Oa,e)}function kh(e){var t=mh();Kf(t,new gh(t,e))}function wh(e,t){Ql.call(this,vh.STAT_EVENT,e),this.stat=t}function bh(e){var t=mh();Kf(t,new wh(t,e))}function xh(e,t){Ql.call(this,vh.Pa,e),this.size=t}function Eh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ol.setTimeout((function(){e()}),t)}vh.Oa="serverreachability",zl(gh,Ql),vh.STAT_EVENT="statevent",zl(wh,Ql),vh.Pa="timingevent",zl(xh,Ql);var Ih={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},_h={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sh(){}function Th(e){return e.h||(e.h=e.i())}function Ch(){}Sh.prototype.h=null;var Ah,Nh={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Dh(){Ql.call(this,"d")}function Oh(){Ql.call(this,"c")}function Ph(){}function Rh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new ch(this),this.O=Mh,e=uf?125:void 0,this.T=new ih(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Lh}function Lh(){this.i=null,this.g="",this.h=!1}zl(Dh,Ql),zl(Oh,Ql),zl(Ph,Sh),Ph.prototype.g=function(){return new XMLHttpRequest},Ph.prototype.i=function(){return{}},Ah=new Ph;var Mh=45e3,Fh={},Uh={};function jh(e,t,n){e.K=1,e.v=id($h(t)),e.s=n,e.P=!0,Vh(e,null)}function Vh(e,t){e.F=Date.now(),Hh(e),e.A=$h(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),md(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Lh,e.g=gp(e.l,n?t:null,!e.s),0<e.N&&(e.L=new sh(Vl(e.Ka,e,e.g),e.N)),fh(e.S,e.g,"readystatechange",e.hb),t=e.H?Sf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),kh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Bh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function zh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=qh(e,n))==Uh){4==t&&(e.o=4,bh(14),i=!1),ph(e.j,e.m,null,"[Incomplete Response]");break}if(r==Fh){e.o=4,bh(15),ph(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ph(e.j,e.m,r,null),Yh(e,r)}Bh(e)&&r!=Uh&&r!=Fh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,bh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),lp(t),t.K=!0,bh(11))):(ph(e.j,e.m,n,"[Invalid Chunked Response]"),Qh(e),Wh(e))}function qh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Uh:(n=Number(t.substring(n,r)),isNaN(n)?Fh:(r+=1)+n>t.length?Uh:(t=t.substr(r,n),e.C=r+n,t))}function Hh(e){e.V=Date.now()+e.O,Kh(e,e.O)}function Kh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Eh(Vl(e.fb,e),t)}function Gh(e){e.B&&(Ol.clearTimeout(e.B),e.B=null)}function Wh(e){0==e.l.G||e.I||dp(e.l,e)}function Qh(e){Gh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ah(e.T),hh(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Yh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||_d(n.h,e)))if(!e.J&&_d(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hp(n),np(n)}cp(n),bh(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Eh(Vl(n.bb,n),6e3));if(1>=Id(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else vp(n,11)}else if((e.J||n.g==e)&&hp(n),!Xl(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Sd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,rd(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=mp(r,r.H?r.ka:null,r.V),d.J){Td(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Gh(p),Hh(p)),r.g=d}else sp(r);0<n.i.length&&ip(n)}else"stop"!=a[0]&&"close"!=a[0]||vp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vp(n,7):tp(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}kh(4)}catch(a){}}function Xh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Rl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Rl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Rl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Cl=Rh.prototype).setTimeout=function(e){this.O=e},Cl.hb=function(e){e=e.target;var t=this.L;t&&3==Yd(e)?t.l():this.Ka(e)},Cl.Ka=function(e){try{if(e==this.g)e:{var t=Yd(this.g),n=this.g.Ea(),r=this.g.aa();if(!(3>t)&&(3!=t||uf||this.g&&(this.h.h||this.g.fa()||Xd(this.g)))){this.I||4!=t||7==n||kh(8==n||0>=r?3:2),Gh(this);var i=this.g.aa();this.Y=i;t:if(Bh(this)){var a=Xd(this.g);e="";var o=a.length,u=4==Yd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qh(this),Wh(this);var s="";break t}this.h.i=new Ol.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xl(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,bh(12),Qh(this),Wh(this);break e}ph(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yh(this,i)}this.P?(zh(this,t,s),uf&&this.i&&3==t&&(fh(this.S,this.T,"tick",this.gb),this.T.start())):(ph(this.j,this.m,s,null),Yh(this,s)),4==t&&Qh(this),this.i&&!this.I&&(4==t?dp(this.l,this):(this.i=!1,Hh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,bh(12)):(this.o=0,bh(13)),Qh(this),Wh(this)}}}catch(t){}},Cl.gb=function(){if(this.g){var e=Yd(this.g),t=this.g.fa();this.C<t.length&&(Gh(this),zh(this,e,t),this.i&&4!=e&&Hh(this))}},Cl.cancel=function(){this.I=!0,Qh(this)},Cl.fb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kh(3),bh(17)),Qh(this),this.o=2,Wh(this)):Kh(this,this.V-e)};var Jh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Zh){this.h=void 0!==t?t:e.h,ed(this,e.j),this.s=e.s,this.g=e.g,td(this,e.m),this.l=e.l,t=e.i;var n=new dd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),nd(this,n),this.o=e.o}else e&&(n=String(e).match(Jh))?(this.h=!!t,ed(this,n[1]||"",!0),this.s=ad(n[2]||""),this.g=ad(n[3]||"",!0),td(this,n[4]),this.l=ad(n[5]||"",!0),nd(this,n[6]||"",!0),this.o=ad(n[7]||"")):(this.h=!!t,this.i=new dd(null,this.h))}function $h(e){return new Zh(e)}function ed(e,t,n){e.j=n?ad(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function td(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function nd(e,t,n){t instanceof dd?(e.i=t,function(e,t){t&&!e.j&&(pd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vd(this,t),md(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=od(t,fd)),e.i=new dd(t,e.h))}function rd(e,t,n){e.i.set(t,n)}function id(e){return rd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ad(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function od(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ud),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ud(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Zh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(od(t,sd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(od(t,sd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(od(n,"/"==n.charAt(0)?ld:cd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",od(n,hd)),e.join("")};var sd=/[#\/\?@]/g,cd=/[#\?:]/g,ld=/[#\?]/g,fd=/[#\?@]/g,hd=/#/g;function dd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vd(e,t){pd(e),t=gd(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yd(e,t){return pd(e),t=gd(e,t),e.g.has(t)}function md(e,t,n){vd(e,t),0<n.length&&(e.i=null,e.g.set(gd(e,t),Gl(n)),e.h+=n.length)}function gd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Cl=dd.prototype).add=function(e,t){pd(this),this.i=null,e=gd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Cl.forEach=function(e,t){pd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Cl.oa=function(){pd(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Cl.W=function(e){pd(this);var t=[];if("string"===typeof e)yd(this,e)&&(t=t.concat(this.g.get(gd(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Cl.set=function(e,t){return pd(this),this.i=null,yd(this,e=gd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Cl.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Cl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var kd=Xe((function e(t,n){Qe(this,e),this.h=t,this.g=n}));function wd(e){this.l=e||xd,Ol.PerformanceNavigationTiming?e=0<(e=Ol.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ol.g&&Ol.g.Ga&&Ol.g.Ga()&&Ol.g.Ga().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bd,xd=10;function Ed(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Id(e){return e.h?1:e.g?e.g.size:0}function _d(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sd(e,t){e.g?e.g.add(t):e.h=t}function Td(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Cd(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=it(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Gl(e.i)}function Ad(){}function Nd(){this.g=new Ad}function Dd(e,t,n){var r=n||"";try{Xh(e,(function(e,n){var i=e;Ll(e)&&(i=Wf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Od(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Pd(e){this.l=e.$b||null,this.j=e.ib||!1}function Rd(e,t){Hf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ld,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wd.prototype.cancel=function(){if(this.i=Cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=it(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ad.prototype.stringify=function(e){return Ol.JSON.stringify(e,void 0)},Ad.prototype.parse=function(e){return Ol.JSON.parse(e,void 0)},zl(Pd,Sh),Pd.prototype.g=function(){return new Rd(this.l,this.j)},Pd.prototype.i=(bd={},function(){return bd}),zl(Rd,Hf);var Ld=0;function Md(e){e.j.read().then(e.Sa.bind(e)).catch(e.ga.bind(e))}function Fd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ud(e)}function Ud(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Cl=Rd.prototype).open=function(e,t){if(this.readyState!=Ld)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ud(this)},Cl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ol).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ga.bind(this))},Cl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fd(this)),this.readyState=Ld},Cl.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ud(this)),this.g&&(this.readyState=3,Ud(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if("undefined"!==typeof Ol.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Md(this)}else e.text().then(this.Ua.bind(this),this.ga.bind(this))},Cl.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fd(this):Ud(this),3==this.readyState&&Md(this)}},Cl.Ua=function(e){this.g&&(this.response=this.responseText=e,Fd(this))},Cl.Ta=function(e){this.g&&(this.response=e,Fd(this))},Cl.ga=function(){this.g&&Fd(this)},Cl.setRequestHeader=function(e,t){this.v.append(e,t)},Cl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Cl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jd=Ol.JSON.parse;function Vd(e){Hf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bd,this.K=this.L=!1}zl(Vd,Hf);var Bd="",zd=/^https?$/i,qd=["POST","PUT"];function Hd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Kd(e),Wd(e)}function Kd(e){e.D||(e.D=!0,Kf(e,"complete"),Kf(e,"error"))}function Gd(e){if(e.h&&"undefined"!=typeof Dl&&(!e.C[1]||4!=Yd(e)||2!=e.aa()))if(e.v&&4==Yd(e))oh(e.Ha,0,e);else if(Kf(e,"readystatechange"),4==Yd(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Jh)[1]||null;if(!a&&Ol.self&&Ol.self.location){var o=Ol.self.location.protocol;a=o.substr(0,o.length-1)}i=!zd.test(a?a.toLowerCase():"")}t=i}if(t)Kf(e,"complete"),Kf(e,"success");else{e.m=6;try{var u=2<Yd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Kd(e)}}finally{Wd(e)}}}function Wd(e,t){if(e.g){Qd(e);var n=e.g,r=e.C[0]?Pl:null;e.g=null,e.C=null,t||Kf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ol.clearTimeout(e.A),e.A=null)}function Yd(e){return e.g?e.g.readyState:0}function Xd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Bd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Rp){return null}}function Jd(e){var t="";return _f(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):rd(e,t,n))}function $d(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ep(e){this.Ca=0,this.i=[],this.j=new dh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=$d("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=$d("baseRetryDelayMs",5e3,e),this.ab=$d("retryDelaySeedMs",1e4,e),this.Za=$d("forwardChannelMaxRetries",2,e),this.ta=$d("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Yb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new wd(e&&e.concurrentRequestLimit),this.Fa=new Nd,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=e&&e.Wb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function tp(e){if(rp(e),3==e.G){var t=e.U++,n=$h(e.F);rd(n,"SID",e.I),rd(n,"RID",t),rd(n,"TYPE","terminate"),op(e,n),(t=new Rh(e,e.j,t,void 0)).K=2,t.v=id($h(n)),n=!1,Ol.navigator&&Ol.navigator.sendBeacon&&(n=Ol.navigator.sendBeacon(t.v.toString(),"")),!n&&Ol.Image&&((new Image).src=t.v,n=!0),n||(t.g=gp(t.l,null),t.g.da(t.v)),t.F=Date.now(),Hh(t)}yp(e)}function np(e){e.g&&(lp(e),e.g.cancel(),e.g=null)}function rp(e){np(e),e.u&&(Ol.clearTimeout(e.u),e.u=null),hp(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Ol.clearTimeout(e.m),e.m=null)}function ip(e){Ed(e.h)||e.m||(e.m=!0,eh(e.Ja,e),e.C=0)}function ap(e,t){var n;n=t?t.m:e.U++;var r=$h(e.F);rd(r,"SID",e.I),rd(r,"RID",n),rd(r,"AID",e.T),op(e,r),e.o&&e.s&&Zd(r,e.o,e.s),n=new Rh(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=up(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Sd(e.h,n),jh(n,r,t)}function op(e,t){e.ia&&_f(e.ia,(function(e,n){rd(t,n,e)})),e.l&&Xh({},(function(e,n){rd(t,n,e)}))}function up(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Vl(e.l.Qa,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Dd(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function sp(e){e.g||e.u||(e.Z=1,eh(e.Ia,e),e.A=0)}function cp(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Eh(Vl(e.Ia,e),pp(e,e.A)),e.A++,!0)}function lp(e){null!=e.B&&(Ol.clearTimeout(e.B),e.B=null)}function fp(e){e.g=new Rh(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=$h(e.sa);rd(t,"RID","rpc"),rd(t,"SID",e.I),rd(t,"CI",e.L?"0":"1"),rd(t,"AID",e.T),rd(t,"TYPE","xmlhttp"),op(e,t),e.o&&e.s&&Zd(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=id($h(t)),n.s=null,n.P=!0,Vh(n,e)}function hp(e){null!=e.v&&(Ol.clearTimeout(e.v),e.v=null)}function dp(e,t){var n=null;if(e.g==t){hp(e),lp(e),e.g=null;var r=2}else{if(!_d(e.h,t))return;n=t.D,Td(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Kf(r=mh(),new xh(r,n,t,i)),ip(e)}else sp(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Id(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Ya?0:e.Za))&&(e.m=Eh(Vl(e.Ja,e,t),pp(e,e.C)),e.C++,!0))}(e,t)||2==r&&cp(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:vp(e,5);break;case 4:vp(e,10);break;case 3:vp(e,6);break;default:vp(e,2)}}function pp(e,t){var n=e.Wa+Math.floor(Math.random()*e.ab);return e.l||(n*=2),n*t}function vp(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Vl(e.jb,e);n||(n=new Zh("//www.google.com/images/cleardot.gif"),Ol.location&&"http"==Ol.location.protocol||ed(n,"https"),id(n)),function(e,t){var n=new dh;if(Ol.Image){var r=new Image;r.onload=Bl(Od,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Bl(Od,n,r,"TestLoadImage: error",!1,t),r.onabort=Bl(Od,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Bl(Od,n,r,"TestLoadImage: timeout",!1,t),Ol.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else bh(2);e.G=0,e.l&&e.l.va(t),yp(e),rp(e)}function yp(e){if(e.G=0,e.la=[],e.l){var t=Cd(e.h);0==t.length&&0==e.i.length||(Wl(e.la,t),Wl(e.la,e.i),e.h.i.length=0,Gl(e.i),e.i.length=0),e.l.ua()}}function mp(e,t,n){var r=n instanceof Zh?$h(n):new Zh(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),td(r,r.m);else{var i=Ol.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Zh(null,void 0);r&&ed(a,r),t&&(a.g=t),i&&td(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&rd(r,n,t),rd(r,"VER",e.ma),op(e,r),r}function gp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Vd(new Pd({ib:!0})):new Vd(e.ra)).L=e.H,t}function kp(){}function wp(){if(af&&!(10<=Number(gf)))throw Error("Environmental error: no available transport.")}function bp(e,t){Hf.call(this),this.g=new ep(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Xb)&&!Xl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ip(this)}function xp(e){Dh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ep(){Oh.call(this),this.status=1}function Ip(e){this.g=e}(Cl=Vd.prototype).da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ah.g(),this.C=this.u?Th(this.u):Th(Ah),this.g.onreadystatechange=Vl(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Hd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=it(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ol.FormData&&e instanceof Ol.FormData,!(0<=Kl(qd,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=it(n);try{for(c.s();!(s=c.n()).done;){var l=ut(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qd(this),0<this.B&&((this.K=function(e){return af&&yf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vl(this.qa,this)):this.A=oh(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Hd(this,u)}},Cl.qa=function(){"undefined"!=typeof Dl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kf(this,"timeout"),this.abort(8))},Cl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Kf(this,"complete"),Kf(this,"abort"),Wd(this))},Cl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wd(this,!0)),Vd.X.M.call(this)},Cl.Ha=function(){this.s||(this.F||this.v||this.l?Gd(this):this.eb())},Cl.eb=function(){Gd(this)},Cl.aa=function(){try{return 2<Yd(this)?this.g.status:-1}catch(bd){return-1}},Cl.fa=function(){try{return this.g?this.g.responseText:""}catch(bd){return""}},Cl.Ra=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jd(t)}},Cl.Ea=function(){return this.m},Cl.Na=function(){return"string"===typeof this.j?this.j:String(this.j)},(Cl=ep.prototype).ma=8,Cl.G=1,Cl.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Rh(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Cf(n=Sf(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=up(this,t,r),rd(i=$h(this.F),"RID",e),rd(i,"CVER",22),this.D&&rd(i,"X-HTTP-Session-Id",this.D),op(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Jd(n)))+"&"+r:this.o&&Zd(i,this.o,n)),Sd(this.h,t),this.Xa&&rd(i,"TYPE","init"),this.O?(rd(i,"$req",r),rd(i,"SID","null"),t.Z=!0,jh(t,i,null)):jh(t,i,r),this.G=2}}else 3==this.G&&(e?ap(this,e):0==this.i.length||Ed(this.h)||ap(this))},Cl.Ia=function(){if(this.u=null,fp(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Eh(Vl(this.cb,this),e)}},Cl.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bh(10),np(this),fp(this))},Cl.bb=function(){null!=this.v&&(this.v=null,np(this),cp(this),bh(19))},Cl.jb=function(e){e?(this.j.info("Successfully pinged google.com"),bh(2)):(this.j.info("Failed to ping google.com"),bh(1))},(Cl=kp.prototype).xa=function(){},Cl.wa=function(){},Cl.va=function(){},Cl.ua=function(){},Cl.Qa=function(){},wp.prototype.g=function(e,t){return new bp(e,t)},zl(bp,Hf),bp.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;bh(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=mp(e,null,e.V),ip(e)},bp.prototype.close=function(){tp(this.g)},bp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Wf(e),e=n);t.i.push(new kd(t.$a++,e)),3==t.G&&ip(t)},bp.prototype.M=function(){this.g.l=null,delete this.j,tp(this.g),delete this.g,bp.X.M.call(this)},zl(xp,Dh),zl(Ep,Oh),zl(Ip,kp),Ip.prototype.xa=function(){Kf(this.g,"a")},Ip.prototype.wa=function(e){Kf(this.g,new xp(e))},Ip.prototype.va=function(e){Kf(this.g,new Ep(e))},Ip.prototype.ua=function(){Kf(this.g,"b")},wp.prototype.createWebChannel=wp.prototype.g,bp.prototype.send=bp.prototype.u,bp.prototype.open=bp.prototype.m,bp.prototype.close=bp.prototype.close,Ih.NO_ERROR=0,Ih.TIMEOUT=8,Ih.HTTP_ERROR=6,_h.COMPLETE="complete",Ch.EventType=Nh,Nh.OPEN="a",Nh.CLOSE="b",Nh.ERROR="c",Nh.MESSAGE="d",Hf.prototype.listen=Hf.prototype.N,Vd.prototype.listenOnce=Vd.prototype.O,Vd.prototype.getLastError=Vd.prototype.Na,Vd.prototype.getLastErrorCode=Vd.prototype.Ea,Vd.prototype.getStatus=Vd.prototype.aa,Vd.prototype.getResponseJson=Vd.prototype.Ra,Vd.prototype.getResponseText=Vd.prototype.fa,Vd.prototype.send=Vd.prototype.da;var _p=Nl.createWebChannelTransport=function(){return new wp},Sp=Nl.getStatEventTarget=function(){return mh()},Tp=Nl.ErrorCode=Ih,Cp=Nl.EventType=_h,Ap=Nl.Event=vh,Np=Nl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Dp=Nl.FetchXmlHttpFactory=Pd,Op=Nl.WebChannel=Ch,Pp=Nl.XhrIo=Vd,Rp="@firebase/firestore",Lp=function(){function e(t){Qe(this,e),this.uid=t}return Xe(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Lp.UNAUTHENTICATED=new Lp(null),Lp.GOOGLE_CREDENTIALS=new Lp("google-credentials-uid"),Lp.FIRST_PARTY=new Lp("first-party-uid"),Lp.MOCK_USER=new Lp("mock-user");var Mp="9.11.0",Fp=new Jt("@firebase/firestore");function Up(){return Fp.logLevel}function jp(e){if(Fp.logLevel<=Ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zp);Fp.debug.apply(Fp,["Firestore (".concat(Mp,"): ").concat(e)].concat(Ae(i)))}}function Vp(e){if(Fp.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zp);Fp.error.apply(Fp,["Firestore (".concat(Mp,"): ").concat(e)].concat(Ae(i)))}}function Bp(e){if(Fp.logLevel<=Ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zp);Fp.warn.apply(Fp,["Firestore (".concat(Mp,"): ").concat(e)].concat(Ae(i)))}}function zp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Mp,") INTERNAL ASSERTION FAILED: ")+e;throw Vp(t),new Error(t)}function Hp(e,t){e||qp()}function Kp(e,t){return e}var Gp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wp=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Xe(n)}(St),Qp=Xe((function e(){var t=this;Qe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yp=Xe((function e(t,n){Qe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Xp=function(){function e(){Qe(this,e)}return Xe(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jp=function(){function e(t){Qe(this,e),this.token=t,this.changeListener=null}return Xe(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Zp=function(){function e(t){Qe(this,e),this.t=t,this.currentUser=Lp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Xe(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){jp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(jp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Hp("string"==typeof n.accessToken),new Yp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Hp(null===e||"string"==typeof e),new Lp(e)}}]),e}(),$p=function(){function e(t,n,r,i){Qe(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Lp.FIRST_PARTY,this.p=new Map}return Xe(e,[{key:"I",value:function(){return this.g?this.g():(Hp(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),ev=function(){function e(t,n,r,i){Qe(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Xe(e,[{key:"getToken",value:function(){return Promise.resolve(new $p(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),tv=Xe((function e(t){Qe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),nv=function(){function e(t){Qe(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Xe(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,jp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):jp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Hp("string"==typeof t.token),e.A=t.token,new tv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var iv=function(){function e(){Qe(this,e)}return Xe(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=rv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function av(e,t){return e<t?-1:e>t?1:0}function ov(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function uv(e){return e+"\0"}var sv=function(){function e(t,n){if(Qe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Wp(Gp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wp(Gp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Wp(Gp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wp(Gp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Xe(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?av(this.nanoseconds,e.nanoseconds):av(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),cv=function(){function e(t){Qe(this,e),this.timestamp=t}return Xe(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sv(0,0))}},{key:"max",value:function(){return new e(new sv(253402300799,999999999))}}]),e}(),lv=function(){function e(t,n,r){Qe(this,e),void 0===n?n=0:n>t.length&&qp(),void 0===r?r=t.length-n:r>t.length-n&&qp(),this.segments=t,this.offset=n,this.len=r}return Xe(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fv=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ae(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lv),hv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dv=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Wp(Gp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Wp(Gp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Wp(Gp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lv),pv=function(){function e(t){Qe(this,e),this.path=t}return Xe(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fv.fromString(t))}},{key:"fromName",value:function(t){return new e(fv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fv.emptyPath())}},{key:"comparator",value:function(e,t){return fv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fv(t.slice()))}}]),e}(),vv=Xe((function e(t,n,r,i){Qe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function yv(e){return e.fields.find((function(e){return 2===e.kind}))}function mv(e){return e.fields.filter((function(e){return 2!==e.kind}))}vv.UNKNOWN_ID=-1;var gv=Xe((function e(t,n){Qe(this,e),this.fieldPath=t,this.kind=n}));var kv=function(){function e(t,n){Qe(this,e),this.sequenceNumber=t,this.offset=n}return Xe(e,null,[{key:"empty",value:function(){return new e(0,xv.min())}}]),e}();function wv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cv.fromTimestamp(1e9===r?new sv(n+1,0):new sv(n,r));return new xv(i,pv.empty(),t)}function bv(e){return new xv(e.readTime,e.key,-1)}var xv=function(){function e(t,n,r){Qe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Xe(e,null,[{key:"min",value:function(){return new e(cv.min(),pv.empty(),-1)}},{key:"max",value:function(){return new e(cv.max(),pv.empty(),-1)}}]),e}();function Ev(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=pv.comparator(e.documentKey,t.documentKey))?n:av(e.largestBatchId,t.largestBatchId)}var Iv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_v=function(){function e(){Qe(this,e),this.onCommittedListeners=[]}return Xe(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Sv(e){return Tv.apply(this,arguments)}function Tv(){return Tv=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Gp.FAILED_PRECONDITION&&t.message===Iv){e.next=2;break}throw t;case 2:jp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}var Cv=function(){function e(t){var n=this;Qe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Xe(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=it(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Av=function(){function e(t,n){var r=this;Qe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Qp,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Ov(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Fv(e.target.error);r.P.reject(new Ov(t,n))}}return Xe(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(jp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ov(n,t)}}}]),e}(),Nv=function(){function e(t,n,r){Qe(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(vt())&&Vp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Xe(e,[{key:"F",value:function(){var e=We(Ke().mark((function e(t){var n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ov(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Wp(Gp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Wp(Gp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ov(t,n))},i.onupgradeneeded=function(e){jp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){jp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=We(Ke().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ke().mark((function e(){var n,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Av.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Cv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,jp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jp("SimpleDb","Removing database:",e),Lv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!wt())return!1;if(e.N())return!0;var t=vt(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Dv=function(){function e(t){Qe(this,e),this.U=t,this.q=!1,this.K=null}return Xe(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Lv(this.U.delete())}}]),e}(),Ov=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,Gp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Xe(n)}(Wp);function Pv(e){return"IndexedDbTransactionError"===e.name}var Rv=function(){function e(t){Qe(this,e),this.store=t}return Xe(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lv(n)}},{key:"add",value:function(e){return jp("SimpleDb","ADD",this.store.name,e,e),Lv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jp("SimpleDb","DELETE",this.store.name,e),Lv(this.store.delete(e))}},{key:"count",value:function(){return jp("SimpleDb","COUNT",this.store.name),Lv(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Cv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Cv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){jp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Cv((function(n,r){t.onerror=function(e){var t=Fv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Cv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Dv(i),o=t(i.primaryKey,i.value,a);if(o instanceof Cv){var u=o.catch((function(e){return a.done(),Cv.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Cv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lv(e){return new Cv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Fv(e.target.error);n(t)}}))}var Mv=!1;function Fv(e){var t=Nv.D(vt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Wp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mv||(Mv=!0,setTimeout((function(){throw r}),0)),r}}return e}var Uv=function(){function e(t,n){Qe(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Xe(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;jp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jp,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Pv(e.t4)){e.next=17;break}jp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Sv(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jv=function(){function e(t,n){Qe(this,e),this.localStore=t,this.persistence=n}return Xe(e,[{key:"st",value:function(){var e=We(Ke().mark((function e(){var t,n=this,r=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Cv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jp("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return jp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=bv(t);Ev(r,n)>0&&(n=r)})),new xv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Vv=function(){function e(t,n){var r=this;Qe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Xe(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Bv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Vv.at=-1;var Hv=function(){function e(t,n){Qe(this,e),this.comparator=t,this.root=n||Gv.EMPTY}return Xe(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Kv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Kv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!0)}}]),e}(),Kv=function(){function e(t,n,r,i){Qe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Xe(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gv=function(){function e(t,n,r,i,a){Qe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Xe(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qp();if(this.right.isRed())throw qp();var e=this.left.check();if(e!==this.right.check())throw qp();return e+(this.isRed()?0:1)}}]),e}();Gv.EMPTY=null,Gv.RED=!0,Gv.BLACK=!1,Gv.EMPTY=new(function(){function e(){Qe(this,e),this.size=0}return Xe(e,[{key:"key",get:function(){throw qp()}},{key:"value",get:function(){throw qp()}},{key:"color",get:function(){throw qp()}},{key:"left",get:function(){throw qp()}},{key:"right",get:function(){throw qp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Wv=function(){function e(t){Qe(this,e),this.comparator=t,this.data=new Hv(this.comparator)}return Xe(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Qv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Qv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Qv=function(){function e(t){Qe(this,e),this.iter=t}return Xe(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Yv(e){return e.hasNext()?e.getNext():void 0}var Xv=function(){function e(t){Qe(this,e),this.fields=t,t.sort(dv.comparator)}return Xe(e,[{key:"unionWith",value:function(t){var n,r=new Wv(dv.comparator),i=it(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=it(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=it(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ov(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Jv=function(e){function t(e){Qe(this,t),this.binaryString=e}return Xe(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return av(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Jv.EMPTY_BYTE_STRING=new Jv("");var Zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $v(e){if(Hp(!!e),"string"==typeof e){var t=0,n=Zv.exec(e);if(Hp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ey(e.seconds),nanos:ey(e.nanos)}}function ey(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ty(e){return"string"==typeof e?Jv.fromBase64String(e):Jv.fromUint8Array(e)}function ny(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ry(e){var t=e.mapValue.fields.__previous_value__;return ny(t)?ry(t):t}function iy(e){var t=$v(e.mapValue.fields.__local_write_time__.timestampValue);return new sv(t.seconds,t.nanos)}var ay=Xe((function e(t,n,r,i,a,o,u,s){Qe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),oy=function(){function e(t,n){Qe(this,e),this.projectId=t,this.database=n||"(default)"}return Xe(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function uy(e){return null==e}function sy(e){return 0===e&&1/e==-1/0}function cy(e){return"number"==typeof e&&Number.isInteger(e)&&!sy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ly={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fy={nullValue:"NULL_VALUE"};function hy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ny(e)?4:Sy(e)?9007199254740991:10:qp()}function dy(e,t){if(e===t)return!0;var n=hy(e);if(n!==hy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return iy(e).isEqual(iy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$v(e.timestampValue),r=$v(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ty(e.bytesValue).isEqual(ty(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ey(e.geoPointValue.latitude)===ey(t.geoPointValue.latitude)&&ey(e.geoPointValue.longitude)===ey(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ey(e.integerValue)===ey(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ey(e.doubleValue),r=ey(t.doubleValue);return n===r?sy(n)===sy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ov(e.arrayValue.values||[],t.arrayValue.values||[],dy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Bv(n)!==Bv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!dy(n[i],r[i])))return!1;return!0}(e,t);default:return qp()}}function py(e,t){return void 0!==(e.values||[]).find((function(e){return dy(e,t)}))}function vy(e,t){if(e===t)return 0;var n=hy(e),r=hy(t);if(n!==r)return av(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return av(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ey(e.integerValue||e.doubleValue),r=ey(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yy(e.timestampValue,t.timestampValue);case 4:return yy(iy(e),iy(t));case 5:return av(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ty(e),r=ty(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=av(n[i],r[i]);if(0!==a)return a}return av(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=av(ey(e.latitude),ey(t.latitude));return 0!==n?n:av(ey(e.longitude),ey(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vy(n[i],r[i]);if(a)return a}return av(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ly.mapValue&&t===ly.mapValue)return 0;if(e===ly.mapValue)return 1;if(t===ly.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=av(r[o],a[o]);if(0!==u)return u;var s=vy(n[r[o]],i[a[o]]);if(0!==s)return s}return av(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qp()}}function yy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return av(e,t);var n=$v(e),r=$v(t),i=av(n.seconds,r.seconds);return 0!==i?i:av(n.nanos,r.nanos)}function my(e){return gy(e)}function gy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$v(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ty(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=it(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=gy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=it(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(gy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qp();var t,n}function ky(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function wy(e){return!!e&&"integerValue"in e}function by(e){return!!e&&"arrayValue"in e}function xy(e){return!!e&&"nullValue"in e}function Ey(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Iy(e){return!!e&&"mapValue"in e}function _y(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return zv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=_y(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=_y(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Sy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ty(e){return"nullValue"in e?fy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ky(oy.empty(),pv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:qp()}function Cy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ky(oy.empty(),pv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ly:qp()}function Ay(e,t){var n=vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ny(e,t){var n=vy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Dy=function(){function e(t){Qe(this,e),this.value=t}return Xe(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Iy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_y(t)}},{key:"setAll",value:function(e){var t=this,n=dv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=_y(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return dy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Iy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){zv(t,(function(t,n){return e[t]=n}));var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(_y(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Oy(e){var t=[];return zv(e.fields,(function(e,n){var r=new dv([e]);if(Iy(n)){var i=Oy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=it(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Xv(t)}var Py=function(){function e(t,n,r,i,a,o){Qe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Xe(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Dy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Dy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=cv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,cv.min(),cv.min(),Dy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,cv.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cv.min(),Dy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cv.min(),Dy.empty(),2)}}]),e}(),Ry=Xe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Qe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function Ly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ry(e,t,n,r,i,a,o)}function My(e){var t=Kp(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+my(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),uy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return my(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return my(e)})).join(",")),t.ht=n}return t.ht}function Fy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!$y(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!dy(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tm(e.startAt,t.startAt)&&tm(e.endAt,t.endAt)}function Uy(e){return pv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jy(e,t){return e.filters.filter((function(e){return e instanceof zy&&e.field.isEqual(t)}))}function Vy(e,t,n){var r,i=fy,a=!0,o=it(jy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=fy,c=!0;switch(u.op){case"<":case"<=":s=Ty(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=fy}Ay({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ay({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function By(e,t,n){var r,i=ly,a=!0,o=it(jy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ly,c=!0;switch(u.op){case">=":case">":s=Cy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ly}Ny({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ny({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var zy=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Xe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(vy(t,this.value)):null!==t&&hy(this.value)===hy(t)&&this.ft(vy(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qp()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new qy(e,t,r):"array-contains"===t?new Wy(e,r):"in"===t?new Qy(e,r):"not-in"===t?new Yy(e,r):"array-contains-any"===t?new Xy(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Hy(e,n):new Ky(e,n)}}]),n}(function(){return Xe((function e(){Qe(this,e)}))}()),qy=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,e,r,i)).key=pv.fromName(i.referenceValue),a}return Xe(n,[{key:"matches",value:function(e){var t=pv.comparator(e.key,this.key);return this.ft(t)}}]),n}(zy),Hy=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,"in",r)).keys=Gy("in",r),i}return Xe(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zy),Ky=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,"not-in",r)).keys=Gy("not-in",r),i}return Xe(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zy);function Gy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return pv.fromName(e.referenceValue)}))}var Wy=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"array-contains",r)}return Xe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return by(t)&&py(t.arrayValue,this.value)}}]),n}(zy),Qy=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"in",r)}return Xe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&py(this.value.arrayValue,t)}}]),n}(zy),Yy=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"not-in",r)}return Xe(n,[{key:"matches",value:function(e){if(py(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!py(this.value.arrayValue,t)}}]),n}(zy),Xy=function(e){Ze(n,e);var t=rt(n);function n(e,r){return Qe(this,n),t.call(this,e,"array-contains-any",r)}return Xe(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!by(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return py(t.value.arrayValue,e)}))}}]),n}(zy),Jy=Xe((function e(t,n){Qe(this,e),this.position=t,this.inclusive=n})),Zy=Xe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Qe(this,e),this.field=t,this.dir=n}));function $y(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function em(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?pv.comparator(pv.fromName(o.referenceValue),n.key):vy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!dy(e.position[n],t.position[n]))return!1;return!0}var nm=Xe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Qe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function rm(e,t,n,r,i,a,o,u){return new nm(e,t,n,r,i,a,o,u)}function im(e){return new nm(e)}function am(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function om(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function um(e){var t,n=it(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function sm(e){return null!==e.collectionGroup}function cm(e){var t=Kp(e);if(null===t._t){t._t=[];var n=um(t),r=om(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Zy(n)),t._t.push(new Zy(dv.keyField(),"asc"));else{var i,a=!1,o=it(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Zy(dv.keyField(),s))}}}return t._t}function lm(e){var t=Kp(e);if(!t.wt)if("F"===t.limitType)t.wt=Ly(t.path,t.collectionGroup,cm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=it(cm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Zy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Jy(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Jy(t.startAt.position,t.startAt.inclusive):null;t.wt=Ly(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function fm(e,t,n){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hm(e,t){return Fy(lm(e),lm(t))&&e.limitType===t.limitType}function dm(e){return"".concat(My(lm(e)),"|lt:").concat(e.limitType)}function pm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(my(t.value));var t})).join(", "),"]")),uy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return my(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return my(e)})).join(",")),"Target(".concat(t,")")}(lm(e)),"; limitType=").concat(e.limitType,")")}function vm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=it(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=it(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=em(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cm(e),t))&&!(e.endAt&&!function(e,t,n){var r=em(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cm(e),t))}(e,t)}function ym(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mm(e){return function(t,n){var r,i=!1,a=it(cm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=gm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function gm(e,t,n){var r=e.field.isKeyField()?pv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vy(r,i):qp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qp()}}function km(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sy(t)?"-0":t}}function wm(e){return{integerValue:""+e}}function bm(e,t){return cy(t)?wm(t):km(e,t)}var xm=Xe((function e(){Qe(this,e),this._=void 0}));function Em(e,t,n){return e instanceof Sm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Tm?Cm(e,t):e instanceof Am?Nm(e,t):function(e,t){var n=_m(e,t),r=Om(n)+Om(e.yt);return wy(n)&&wy(e.yt)?wm(r):km(e.It,r)}(e,t)}function Im(e,t,n){return e instanceof Tm?Cm(e,t):e instanceof Am?Nm(e,t):n}function _m(e,t){return e instanceof Dm?wy(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Sm=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n)}(xm),Tm=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).elements=e,r}return Xe(n)}(xm);function Cm(e,t){var n,r=Pm(t),i=it(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return dy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Am=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).elements=e,r}return Xe(n)}(xm);function Nm(e,t){var n,r=Pm(t),i=it(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!dy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Dm=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).It=e,i.yt=r,i}return Xe(n)}(xm);function Om(e){return ey(e.integerValue||e.doubleValue)}function Pm(e){return by(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Rm=Xe((function e(t,n){Qe(this,e),this.field=t,this.transform=n}));var Lm=Xe((function e(t,n){Qe(this,e),this.version=t,this.transformResults=n})),Mm=function(){function e(t,n){Qe(this,e),this.updateTime=t,this.exists=n}return Xe(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Fm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Um=Xe((function e(){Qe(this,e)}));function jm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jm(e.key,Mm.none()):new Hm(e.key,e.data,Mm.none());var n,r=e.data,i=Dy.empty(),a=new Wv(dv.comparator),o=it(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Km(e.key,i,new Xv(a.toArray()),Mm.none())}function Vm(e,t,n){e instanceof Hm?function(e,t,n){var r=e.value.clone(),i=Wm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Km?function(e,t,n){if(Fm(e.precondition,t)){var r=Wm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bm(e,t,n,r){return e instanceof Hm?function(e,t,n,r){if(!Fm(e.precondition,t))return n;var i=e.value.clone(),a=Qm(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Km?function(e,t,n,r){if(!Fm(e.precondition,t))return n;var i=Qm(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Fm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zm(e,t){var n,r=null,i=it(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_m(a.transform,o||null);null!=u&&(null===r&&(r=Dy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function qm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ov(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Tm&&t instanceof Tm||e instanceof Am&&t instanceof Am?ov(e.elements,t.elements,dy):e instanceof Dm&&t instanceof Dm?dy(e.yt,t.yt):e instanceof Sm&&t instanceof Sm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Hm=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Qe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Xe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),Km=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Qe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Xe(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Um);function Gm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Wm(e,t,n){var r=new Map;Hp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Im(o,u,n[i]))}return r}function Qm(e,t,n){var r,i=new Map,a=it(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Em(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ym,Xm,Jm=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Xe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),Zm=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Xe(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Um),$m=Xe((function e(t){Qe(this,e),this.count=t}));function eg(e){switch(e){default:return qp();case Gp.CANCELLED:case Gp.UNKNOWN:case Gp.DEADLINE_EXCEEDED:case Gp.RESOURCE_EXHAUSTED:case Gp.INTERNAL:case Gp.UNAVAILABLE:case Gp.UNAUTHENTICATED:return!1;case Gp.INVALID_ARGUMENT:case Gp.NOT_FOUND:case Gp.ALREADY_EXISTS:case Gp.PERMISSION_DENIED:case Gp.FAILED_PRECONDITION:case Gp.ABORTED:case Gp.OUT_OF_RANGE:case Gp.UNIMPLEMENTED:case Gp.DATA_LOSS:return!0}}function tg(e){if(void 0===e)return Vp("GRPC error has no .code"),Gp.UNKNOWN;switch(e){case Ym.OK:return Gp.OK;case Ym.CANCELLED:return Gp.CANCELLED;case Ym.UNKNOWN:return Gp.UNKNOWN;case Ym.DEADLINE_EXCEEDED:return Gp.DEADLINE_EXCEEDED;case Ym.RESOURCE_EXHAUSTED:return Gp.RESOURCE_EXHAUSTED;case Ym.INTERNAL:return Gp.INTERNAL;case Ym.UNAVAILABLE:return Gp.UNAVAILABLE;case Ym.UNAUTHENTICATED:return Gp.UNAUTHENTICATED;case Ym.INVALID_ARGUMENT:return Gp.INVALID_ARGUMENT;case Ym.NOT_FOUND:return Gp.NOT_FOUND;case Ym.ALREADY_EXISTS:return Gp.ALREADY_EXISTS;case Ym.PERMISSION_DENIED:return Gp.PERMISSION_DENIED;case Ym.FAILED_PRECONDITION:return Gp.FAILED_PRECONDITION;case Ym.ABORTED:return Gp.ABORTED;case Ym.OUT_OF_RANGE:return Gp.OUT_OF_RANGE;case Ym.UNIMPLEMENTED:return Gp.UNIMPLEMENTED;case Ym.DATA_LOSS:return Gp.DATA_LOSS;default:return qp()}}(Xm=Ym||(Ym={}))[Xm.OK=0]="OK",Xm[Xm.CANCELLED=1]="CANCELLED",Xm[Xm.UNKNOWN=2]="UNKNOWN",Xm[Xm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xm[Xm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xm[Xm.NOT_FOUND=5]="NOT_FOUND",Xm[Xm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xm[Xm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xm[Xm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xm[Xm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xm[Xm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xm[Xm.ABORTED=10]="ABORTED",Xm[Xm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xm[Xm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xm[Xm.INTERNAL=13]="INTERNAL",Xm[Xm.UNAVAILABLE=14]="UNAVAILABLE",Xm[Xm.DATA_LOSS=15]="DATA_LOSS";var ng=function(){function e(t,n){Qe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Xe(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=ut(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){zv(this.inner,(function(t,n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=ut(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return qv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),rg=new Hv(pv.comparator);function ig(){return rg}var ag=new Hv(pv.comparator);function og(){for(var e=ag,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ug(e){var t=ag;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function sg(){return lg()}function cg(){return lg()}function lg(){return new ng((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fg=new Hv(pv.comparator),hg=new Wv(pv.comparator);function dg(){for(var e=hg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var pg=new Wv(av);function vg(){return pg}var yg=function(){function e(t,n,r,i,a){Qe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Xe(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,mg.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(cv.min(),r,vg(),ig(),dg())}}]),e}(),mg=function(){function e(t,n,r,i,a){Qe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Xe(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Jv.EMPTY_BYTE_STRING,n,dg(),dg(),dg())}}]),e}(),gg=Xe((function e(t,n,r,i){Qe(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),kg=Xe((function e(t,n){Qe(this,e),this.targetId=t,this.At=n})),wg=Xe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Qe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),bg=function(){function e(){Qe(this,e),this.Rt=0,this.bt=Ig(),this.Pt=Jv.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return Xe(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=dg(),t=dg(),n=dg();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qp()}})),new mg(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=Ig()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),xg=function(){function e(t){Qe(this,e),this.Bt=t,this.Lt=new Map,this.Ut=ig(),this.qt=Eg(),this.Kt=new Wv(av)}return Xe(e,[{key:"Gt",value:function(e){var t,n=it(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=it(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:qp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Uy(i))if(0===n){var a=new pv(i.path);this.jt(t,a,Py.newNoDocument(a,cv.min()))}else Hp(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Uy(a.target)){var o=new pv(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,Py.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=dg();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new yg(e,n,this.Kt,this.Ut,r);return this.Ut=ig(),this.qt=Eg(),this.Kt=new Wv(av),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new bg,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Wv(av),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||jp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new bg),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Eg(){return new Hv(pv.comparator)}function Ig(){return new Hv(pv.comparator)}var _g={asc:"ASCENDING",desc:"DESCENDING"},Sg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tg=Xe((function e(t,n){Qe(this,e),this.databaseId=t,this.gt=n}));function Cg(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ag(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Ng(e,t){return Cg(e,t.toTimestamp())}function Dg(e){return Hp(!!e),cv.fromTimestamp(function(e){var t=$v(e);return new sv(t.seconds,t.nanos)}(e))}function Og(e,t){return function(e){return new fv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Pg(e){var t=fv.fromString(e);return Hp(nk(t)),t}function Rg(e,t){return Og(e.databaseId,t.path)}function Lg(e,t){var n=Pg(t);if(n.get(1)!==e.databaseId.projectId)throw new Wp(Gp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wp(Gp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pv(jg(n))}function Mg(e,t){return Og(e.databaseId,t)}function Fg(e){var t=Pg(e);return 4===t.length?fv.emptyPath():jg(t)}function Ug(e){return new fv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jg(e){return Hp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vg(e,t,n){return{name:Rg(e,t),fields:n.value.mapValue.fields}}function Bg(e,t,n){var r=Lg(e,t.name),i=Dg(t.updateTime),a=new Dy({mapValue:{fields:t.fields}}),o=Py.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function zg(e,t){return"found"in t?function(e,t){Hp(!!t.found),t.found.name,t.found.updateTime;var n=Lg(e,t.found.name),r=Dg(t.found.updateTime),i=new Dy({mapValue:{fields:t.found.fields}});return Py.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Hp(!!t.missing),Hp(!!t.readTime);var n=Lg(e,t.missing),r=Dg(t.readTime);return Py.newNoDocument(n,r)}(e,t):qp()}function qg(e,t){var n;if(t instanceof Hm)n={update:Vg(e,t.key,t.value)};else if(t instanceof Jm)n={delete:Rg(e,t.key)};else if(t instanceof Km)n={update:Vg(e,t.key,t.data),updateMask:tk(t.fieldMask)};else{if(!(t instanceof Zm))return qp();n={verify:Rg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Sm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Am)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dm)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw qp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ng(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qp()}(e,t.precondition)),n}function Hg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Mm.updateTime(Dg(e.updateTime)):void 0!==e.exists?Mm.exists(e.exists):Mm.none()}(t.currentDocument):Mm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Hp("REQUEST_TIME"===t.setToServerValue),n=new Sm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Tm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Am(i)}else"increment"in t?n=new Dm(e,t.increment):qp();var a=dv.fromServerFormat(t.fieldPath);return new Rm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Lg(e,t.update.name),a=new Dy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Xv(t.map((function(e){return dv.fromServerFormat(e)})))}(t.updateMask);return new Km(i,a,o,n,r)}return new Hm(i,a,n,r)}if(t.delete){var u=Lg(e,t.delete);return new Jm(u,n)}if(t.verify){var s=Lg(e,t.verify);return new Zm(s,n)}return qp()}function Kg(e,t){return{documents:[Mg(e,t.path)]}}function Gg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ey(e.value))return{unaryFilter:{field:Jg(e.field),op:"IS_NAN"}};if(xy(e.value))return{unaryFilter:{field:Jg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ey(e.value))return{unaryFilter:{field:Jg(e.field),op:"IS_NOT_NAN"}};if(xy(e.value))return{unaryFilter:{field:Jg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jg(e.field),op:Xg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Jg(e.field),direction:Yg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||uy(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wg(e){var t=Fg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Qg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Zy(Zg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return uy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Jy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Jy(n,t)}(n.endAt)),rm(t,i,u,o,s,"F",c,l)}function Qg(e){return e?void 0!==e.unaryFilter?[ek(e)]:void 0!==e.fieldFilter?[$g(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Qg(e)})).reduce((function(e,t){return e.concat(t)})):qp():[]}function Yg(e){return _g[e]}function Xg(e){return Sg[e]}function Jg(e){return{fieldPath:e.canonicalString()}}function Zg(e){return dv.fromServerFormat(e.fieldPath)}function $g(e){return zy.create(Zg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qp()}}(e.fieldFilter.op),e.fieldFilter.value)}function ek(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zg(e.unaryFilter.field);return zy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zg(e.unaryFilter.field);return zy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zg(e.unaryFilter.field);return zy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zg(e.unaryFilter.field);return zy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qp()}}function tk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function rk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ak(t)),t=ik(e.get(n),t);return ak(t)}function ik(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ak(e){return e+"\x01\x01"}function ok(e){var t=e.length;if(Hp(t>=2),2===t)return Hp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&qp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:qp()}a=o+2}return new fv(r)}var uk=["userId","batchId"];function sk(e,t){return[e,rk(t)]}function ck(e,t,n){return[e,rk(t),n]}var lk={},fk=["prefixPath","collectionGroup","readTime","documentId"],hk=["prefixPath","collectionGroup","documentId"],dk=["collectionGroup","readTime","prefixPath","documentId"],pk=["canonicalId","targetId"],vk=["targetId","path"],yk=["path","targetId"],mk=["collectionId","parent"],gk=["indexId","uid"],kk=["uid","sequenceNumber"],wk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bk=["indexId","uid","orderedDocumentKey"],xk=["userId","collectionPath","documentId"],Ek=["userId","collectionPath","largestBatchId"],Ik=["userId","collectionGroup","largestBatchId"],_k=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Sk=[].concat(Ae(_k),["documentOverlays"]),Tk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ck=Tk,Ak=[].concat(Ck,["indexConfiguration","indexState","indexEntries"]),Nk=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return Xe(n)}(_v);function Dk(e,t){var n=Kp(e);return Nv.M(n.ie,t)}var Ok=function(){function e(t,n,r,i){Qe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Xe(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=it(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Bm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=it(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Bm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=cg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=jm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(cv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ov(this.mutations,e.mutations,(function(e,t){return qm(e,t)}))&&ov(this.baseMutations,e.baseMutations,(function(e,t){return qm(e,t)}))}}]),e}(),Pk=function(){function e(t,n,r,i){Qe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Xe(e,null,[{key:"from",value:function(t,n,r){Hp(t.mutations.length===r.length);for(var i=fg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Rk=function(){function e(t,n){Qe(this,e),this.largestBatchId=t,this.mutation=n}return Xe(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Lk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jv.EMPTY_BYTE_STRING;Qe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Xe(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Mk=Xe((function e(t){Qe(this,e),this.re=t}));function Fk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Rg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cg(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jk(t.version)};else{if(!t.isUnknownDocument())return qp();r.unknownDocument={path:n.path.toArray(),version:jk(t.version)}}return r}function Uk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Vk(e){var t=new sv(e.seconds,e.nanoseconds);return cv.fromTimestamp(t)}function Bk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Hg(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Hg(e.re,t)})),u=sv.fromMillis(t.localWriteTimeMs);return new Ok(t.batchId,u,n,o)}function zk(e){var t,n,r=Vk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Vk(e.lastLimboFreeSnapshotVersion):cv.min();return void 0!==e.query.documents?(Hp(1===(n=e.query).documents.length),t=lm(im(Fg(n.documents[0])))):t=function(e){return lm(Wg(e))}(e.query),new Lk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Jv.fromBase64String(e.resumeToken))}function qk(e,t){var n,r=jk(t.snapshotVersion),i=jk(t.lastLimboFreeSnapshotVersion);n=Uy(t.target)?Kg(e.re,t.target):Gg(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:My(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Hk(e){var t=Wg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fm(t,t.limit,"L"):t}function Kk(e,t){return new Rk(t.largestBatchId,Hg(e.re,t.overlayMutation))}function Gk(e,t){var n=t.path.lastSegment();return[e,rk(t.path.popLast()),n]}function Wk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:jk(r.readTime),documentKey:rk(r.documentKey.path),largestBatchId:r.largestBatchId}}var Qk=function(){function e(){Qe(this,e)}return Xe(e,[{key:"getBundleMetadata",value:function(e,t){return Yk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Vk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Yk(e).put({bundleId:(n=t).id,createTime:jk(Dg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Xk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Hk(t.bundledQuery),readTime:Vk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Xk(e).put(function(e){return{name:e.name,readTime:jk(Dg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Yk(e){return Dk(e,"bundles")}function Xk(e){return Dk(e,"namedQueries")}var Jk=function(){function e(t,n){Qe(this,e),this.It=t,this.userId=n}return Xe(e,[{key:"getOverlay",value:function(e,t){var n=this;return Zk(e).get(Gk(this.userId,t)).next((function(e){return e?Kk(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=sg();return Cv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Rk(t,a);i.push(r.ue(e,o))})),Cv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(rk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Zk(e).Y("collectionPathOverlayIndex",i))})),Cv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=sg(),a=rk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Zk(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Kk(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=sg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zk(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Kk(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Zk(e).put(function(e,t,n){var r=ut(Gk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qg(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Zk(e){return Dk(e,"documentOverlays")}var $k=function(){function e(){Qe(this,e)}return Xe(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ey(e.integerValue));else if("doubleValue"in e){var n=ey(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),sy(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ty(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Sy(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):qp()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),pv.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function ew(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function tw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ew(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}$k.Te=new $k;var nw=function(){function e(){Qe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Xe(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=tw(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=tw(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),rw=function(){function e(t){Qe(this,e),this.Be=t}return Xe(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),iw=function(){function e(t){Qe(this,e),this.Be=t}return Xe(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),aw=function(){function e(){Qe(this,e),this.Be=new nw,this.Le=new rw(this.Be),this.Ue=new iw(this.Be)}return Xe(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),ow=function(){function e(t,n,r,i){Qe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Xe(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function uw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=sw(e.arrayValue,t.arrayValue))?n:0!==(n=sw(e.directionalValue,t.directionalValue))?n:pv.comparator(e.documentKey,t.documentKey)}function sw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var cw=function(){function e(t){Qe(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=it(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Xe(e,[{key:"We",value:function(e){var t=yv(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=mv(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=it(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),lw=function(){function e(){Qe(this,e),this.Ye=new fw}return Xe(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Cv.resolve()}},{key:"getCollectionParents",value:function(e,t){return Cv.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Cv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Cv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Cv.resolve(null)}},{key:"getIndexType",value:function(e,t){return Cv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Cv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Cv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Cv.resolve(xv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Cv.resolve(xv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Cv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Cv.resolve()}}]),e}(),fw=function(){function e(){Qe(this,e),this.index={}}return Xe(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wv(fv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Wv(fv.comparator)).toArray()}}]),e}(),hw=new Uint8Array(0),dw=function(){function e(t,n){Qe(this,e),this.user=t,this.databaseId=n,this.Xe=new fw,this.Ze=new ng((function(e){return My(e)}),(function(e,t){return Fy(e,t)})),this.uid=t.uid||""}return Xe(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:rk(i)};return pw(e).put(a)}return Cv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[uv(t),""],!1,!0);return pw(e).W(r).next((function(e){var r,i=it(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ok(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=yw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=mw(e);return a.next((function(e){o.put(Wk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=yw(e),r=mw(e),i=vw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=vw(e),i=!0,a=new Map;return Cv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=dg(),o=[];return Cv.forEach(a,(function(i,a){var u;jp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(My(t)));var s=function(e,t){var n=yv(t);if(void 0===n)return null;var r,i=it(jy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=it(mv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=it(jy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=it(mv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vy(e,o.fieldPath,e.startAt):By(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jy(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=it(mv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?By(e,o.fieldPath,e.endAt):Vy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jy(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Cv.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=pv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Cv.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):hw,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,Ae(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new ow(e,pv.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new ow(e,pv.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new cw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Cv.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Wv(dv.comparator),r=!1,i=it(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=it(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new aw,i=it(mv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);$k.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new aw;return $k.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new aw;return $k.Te.ce(ky(this.databaseId,t),n.qe(function(e){var t=mv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new aw);var i,a=0,o=it(mv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=it(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&by(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);$k.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=Ae(e),a=[],o=it(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=it(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new aw;f.seed(l.$e()),$k.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof zy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=yw(e),i=mw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Cv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kv(t.sequenceNumber,new xv(Vk(t.readTime),new pv(ok(t.documentKey)),t.largestBatchId)):kv.empty(),r=e.fields.map((function(e){var t=ut(e,2),n=t[0],r=t[1];return new gv(dv.fromServerFormat(n),r)}));return new vv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:av(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=yw(e),a=mw(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Cv.forEach(t,(function(t){return a.put(Wk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Cv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Cv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Cv.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Cv.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return vw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return vw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=vw(e),i=new Wv(uw);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new ow(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Wv(uw),r=this.an(t,e);if(null==r)return n;var i=yv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(by(a)){var o,u=it(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new ow(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new ow(t.indexId,e.key,hw,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;jp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Yv(a),s=Yv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Yv(o)):l?(i(u),u=Yv(a)):(u=Yv(a),s=Yv(o))}}(r,i,uw,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Cv.waitFor(o)}},{key:"_n",value:function(e){var t=1;return mw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return uw(e,t)})).filter((function(e,t,n){return!t||0!==uw(e,n[t-1])}));var r=[];r.push(e);var i,a=it(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=uw(o,e),s=uw(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,hw,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,hw,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(gw)}},{key:"getMinOffset",value:function(e,t){var n=this;return Cv.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||qp()}))})).next(gw)}}]),e}();function pw(e){return Dk(e,"collectionParents")}function vw(e){return Dk(e,"indexEntries")}function yw(e){return Dk(e,"indexConfiguration")}function mw(e){return Dk(e,"indexState")}function gw(e){Hp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ev(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xv(t.readTime,t.documentKey,n)}var kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ww=function(){function e(t,n,r){Qe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Xe(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function bw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Hp(1===u)})));var c,l=[],f=it(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ck(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Cv.waitFor(a).next((function(){return l}))}function xw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qp();t=e.noDocument}return JSON.stringify(t).length}ww.DEFAULT_COLLECTION_PERCENTILE=10,ww.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ww.DEFAULT=new ww(41943040,ww.DEFAULT_COLLECTION_PERCENTILE,ww.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ww.DISABLED=new ww(-1,0,0);var Ew=function(){function e(t,n,r,i){Qe(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return Xe(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _w(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Sw(e),o=_w(e);return o.add({}).next((function(u){Hp("number"==typeof u);var s,c=new Ok(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return qg(e.re,t)})),i=n.mutations.map((function(t){return qg(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new Wv((function(e,t){return av(e.canonicalString(),t.canonicalString())})),d=it(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ck(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,lk))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Cv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return _w(e).get(t).next((function(e){return e?(Hp(e.userId===n.userId),Bk(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Cv.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return _w(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Hp(t.batchId>=r),a=Bk(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _w(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _w(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Bk(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=sk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Sw(e).Z({range:i},(function(r,i,o){var u=ut(r,3),s=u[0],c=u[1],l=u[2],f=ok(c);if(s===n.userId&&t.path.isEqual(f))return _w(e).get(l).next((function(e){if(!e)throw qp();Hp(e.userId===n.userId),a.push(Bk(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wv(av),i=[];return t.forEach((function(t){var a=sk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Sw(e).Z({range:o},(function(e,i,a){var o=ut(e,3),u=o[0],s=o[1],c=o[2],l=ok(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Cv.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=sk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Wv(av);return Sw(e).Z({range:o},(function(e,t,a){var o=ut(e,3),s=o[0],c=o[1],l=o[2],f=ok(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(_w(e).get(t).next((function(e){if(null===e)throw qp();Hp(e.userId===n.userId),r.push(Bk(n.It,e))})))})),Cv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return bw(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Cv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Cv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Sw(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ok(e[1]);i.push(a)}else r.done()})).next((function(){Hp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Iw(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Tw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Hp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Iw(e,t,n){var r=sk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Sw(e).Z({range:a,X:!0},(function(e,n,r){var a=ut(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function _w(e){return Dk(e,"mutations")}function Sw(e){return Dk(e,"documentMutations")}function Tw(e){return Dk(e,"mutationQueues")}var Cw=function(){function e(t){Qe(this,e),this.bn=t}return Xe(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Aw=function(){function e(t,n){Qe(this,e),this.referenceDelegate=t,this.It=n}return Xe(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Cw(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return cv.fromTimestamp(new sv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Nw(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Hp(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Nw(e).Z((function(o,u){var s=zk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Cv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Nw(e).Z((function(e,n){var r=zk(n);t(r)}))}},{key:"Vn",value:function(e){return Dw(e).get("targetGlobalKey").next((function(e){return Hp(null!==e),e}))}},{key:"Sn",value:function(e,t){return Dw(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Nw(e).put(qk(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=My(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Nw(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=zk(n);Fy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ow(e);return t.forEach((function(t){var o=rk(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Cv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ow(e);return Cv.forEach(t,(function(t){var a=rk(t.path);return Cv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ow(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ow(e),i=dg();return r.Z({range:n,X:!0},(function(e,t,n){var r=ok(e[1]),a=new pv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=rk(t.path),r=IDBKeyRange.bound([n],[uv(n)],!1,!0),i=0;return Ow(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=ut(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return Nw(e).get(t).next((function(e){return e?zk(e):null}))}}]),e}();function Nw(e){return Dk(e,"targets")}function Dw(e){return Dk(e,"targetGlobal")}function Ow(e){return Dk(e,"targetDocuments")}function Pw(e,t){var n=ut(e,2),r=n[0],i=n[1],a=ut(t,2),o=a[0],u=a[1],s=av(r,o);return 0===s?av(i,u):s}var Rw=function(){function e(t){Qe(this,e),this.xn=t,this.buffer=new Wv(Pw),this.Nn=0}return Xe(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Pw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Lw=function(){function e(t,n,r){Qe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return Xe(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;jp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Pv(e.t0)){e.next=12;break}jp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Sv(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Mw=function(){function e(t,n){Qe(this,e),this.$n=t,this.params=n}return Xe(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Cv.resolve(Vv.at);var r=new Rw(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jp("LruGarbageCollector","Garbage collection skipped; disabled"),Cv.resolve(kw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),kw):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Up()<=Ht.DEBUG&&jp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Cv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Fw=function(){function e(t,n){Qe(this,e),this.db=t,this.garbageCollector=function(e,t){return new Mw(e,t)}(this,n)}return Xe(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Uw(e,n)}},{key:"removeReference",value:function(e,t,n){return Uw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Uw(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Tw(e).tt((function(r){return Iw(e,r,t).next((function(e){return e&&(n=!0),Cv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,cv.min()),Ow(e).delete([0,rk(o.path)])}))}));i.push(s)}})).next((function(){return Cv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Uw(e,t)}},{key:"Kn",value:function(e,t){var n,r=Ow(e),i=Vv.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=ut(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Vv.at&&t(new pv(ok(n)),i),i=s,n=u):i=Vv.at})).next((function(){i!==Vv.at&&t(new pv(ok(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Uw(e,t){return Ow(e).put(function(e,t){return{targetId:0,path:rk(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var jw=function(){function e(){Qe(this,e),this.changes=new ng((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Xe(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Py.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Vw=function(){function e(t){Qe(this,e),this.It=t}return Xe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Hw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Hw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Uk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Py.newInvalidDocument(t);return Hw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Py.newInvalidDocument(t)};return Hw(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Kw(t))},(function(e,i){r={document:n.jn(t,i),size:xw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ig();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=ig(),i=new Hv(pv.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,xw(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Cv.resolve();var r=new Wv(Ww);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Kw(r.first()),Kw(r.last())),a=r.getIterator(),o=a.getNext();return Hw(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=pv.fromSegments([].concat(Ae(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ww(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Kw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Uk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hw(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=ig(),i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(pv.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ig(),o=Gw(t,n),u=Gw(t,xv.max());return Hw(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(pv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new zw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return qw(e).get("remoteDocumentGlobalKey").next((function(e){return Hp(!!e),e}))}},{key:"Qn",value:function(e,t){return qw(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Bg(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=pv.fromSegments(t.noDocument.path),i=Vk(t.noDocument.readTime);n=Py.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qp();var a=pv.fromSegments(t.unknownDocument.path),o=Vk(t.unknownDocument.version);n=Py.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sv(e[0],e[1]);return cv.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(cv.min()))return n}return Py.newInvalidDocument(e)}}]),e}();function Bw(e){return new Vw(e)}var zw=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new ng((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Xe(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Wv((function(e,t){return av(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Fk(t.Yn.It,o);i=i.add(a.path.popLast());var c=xw(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Fk(t.Yn.It,o.convertToNoDocument(cv.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Cv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(jw);function qw(e){return Dk(e,"remoteDocumentGlobal")}function Hw(e){return Dk(e,"remoteDocumentsV14")}function Kw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Gw(e,t){var n=t.documentKey.path.toArray();return[e,Uk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ww(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=av(n[a],r[a]))return i;return(i=av(n.length,r.length))||((i=av(n[n.length-2],r[r.length-2]))||av(n[n.length-1],r[r.length-1]))}var Qw=Xe((function e(t,n){Qe(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Yw=function(){function e(t,n,r,i){Qe(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Xe(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Bm(r.mutation,e,Xv.empty(),sv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,dg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dg(),i=sg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=og();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=sg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,dg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ig(),a=lg(),o=lg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Km)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Bm(o.mutation,t,o.mutation.getFieldMask(),sv.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Qw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=lg(),i=new Hv((function(e,t){return e-t})),a=dg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=it(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Xv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||dg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=cg();c.forEach((function(e){if(!a.has(e)){var n=jm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Cv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return pv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Cv.resolve(sg()),u=-1,s=a;return o.next((function(t){return Cv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Cv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,dg())})).next((function(e){return{batchId:u,changes:ug(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new pv(t)).next((function(e){var t=og();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=og();return this.indexManager.getCollectionParents(e,i).next((function(o){return Cv.forEach(o,(function(o){var u=function(e,t){return new nm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Py.newInvalidDocument(n)))}));var n=og();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Bm(a.mutation,i,Xv.empty(),sv.now()),vm(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Cv.resolve(Py.newInvalidDocument(t))}}]),e}(),Xw=function(){function e(t){Qe(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return Xe(e,[{key:"getBundleMetadata",value:function(e,t){return Cv.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Dg(n.createTime)}),Cv.resolve()}},{key:"getNamedQuery",value:function(e,t){return Cv.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Hk(e.bundledQuery),readTime:Dg(e.readTime)}}(t)),Cv.resolve()}}]),e}(),Jw=function(){function e(){Qe(this,e),this.overlays=new Hv(pv.comparator),this.es=new Map}return Xe(e,[{key:"getOverlay",value:function(e,t){return Cv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=sg();return Cv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Cv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Cv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=sg(),i=t.length+1,a=new pv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Cv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=sg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=sg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Cv.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Rk(t,n));var a=this.es.get(t);void 0===a&&(a=dg(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Zw=function(){function e(){Qe(this,e),this.ns=new Wv($w.ss),this.rs=new Wv($w.os)}return Xe(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new $w(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new $w(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new pv(new fv([])),r=new $w(n,e),i=new $w(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new pv(new fv([])),n=new $w(t,e),r=new $w(t,e+1),i=dg();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new $w(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),$w=function(){function e(t,n){Qe(this,e),this.key=t,this._s=n}return Xe(e,null,[{key:"ss",value:function(e,t){return pv.comparator(e.key,t.key)||av(e._s,t._s)}},{key:"os",value:function(e,t){return av(e._s,t._s)||pv.comparator(e.key,t.key)}}]),e}(),eb=function(){function e(t,n){Qe(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Wv($w.ss)}return Xe(e,[{key:"checkEmpty",value:function(e){return Cv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ok(i,t,n,r);this.mutationQueue.push(a);var o,u=it(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new $w(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Cv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Cv.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Cv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Cv.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Cv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new $w(t,0),i=new $w(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Cv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wv(av);return t.forEach((function(e){var t=new $w(e,0),i=new $w(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Cv.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;pv.isDocumentKey(i)||(i=i.child(""));var a=new $w(new pv(i),0),o=new Wv(av);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Cv.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Hp(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Cv.forEach(t.mutations,(function(i){var a=new $w(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new $w(t,0),r=this.gs.firstAfterOrEqual(n);return Cv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Cv.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),tb=function(){function e(t){Qe(this,e),this.Es=t,this.docs=new Hv(pv.comparator),this.size=0}return Xe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Cv.resolve(n?n.document.mutableCopy():Py.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ig();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Py.newInvalidDocument(e))})),Cv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ig(),i=new pv(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Ev(bv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Cv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qp()}},{key:"As",value:function(e,t){return Cv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nb(this)}},{key:"getSize",value:function(e){return Cv.resolve(this.size)}}]),e}(),nb=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).Yn=e,r}return Xe(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Cv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(jw),rb=function(){function e(t){Qe(this,e),this.persistence=t,this.Rs=new ng((function(e){return My(e)}),Fy),this.lastRemoteSnapshotVersion=cv.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Zw,this.targetCount=0,this.vs=Cw.Pn()}return Xe(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Cv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Cv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Cv.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Cv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Cv.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Cw(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Cv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Cv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Cv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Cv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Cv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Cv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Cv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Cv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Cv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Cv.resolve(n)}},{key:"containsKey",value:function(e,t){return Cv.resolve(this.Ps.containsKey(t))}}]),e}(),ib=function(){function e(t,n){var r=this;Qe(this,e),this.Vs={},this.overlays={},this.Ss=new Vv(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new rb(this),this.indexManager=new lw,this.remoteDocumentCache=new tb((function(e){return r.referenceDelegate.xs(e)})),this.It=new Mk(n),this.Ns=new Xw(this.It)}return Xe(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Jw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new eb(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;jp("MemoryPersistence","Starting transaction:",e);var i=new ab(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Cv.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),ab=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Xe(n)}(_v),ob=function(){function e(t){Qe(this,e),this.persistence=t,this.Fs=new Zw,this.$s=null}return Xe(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw qp()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Cv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Cv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Cv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cv.forEach(this.Ls,(function(r){var i=pv.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,cv.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Cv.or([function(){return Cv.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),ub=function(){function e(t){Qe(this,e),this.It=t}return Xe(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Av("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uk,{unique:!0}),e.createObjectStore("documentMutations")}(e),sb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Cv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),sb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uk,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Cv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:xk});t.createIndex("collectionPathOverlayIndex",Ek,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ik,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:fk});t.createIndex("documentKeyIndex",hk),t.createIndex("collectionGroupIndex",dk)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:gk}).createIndex("sequenceNumberIndex",kk,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:wk}).createIndex("documentKeyIndex",bk,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=xw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Cv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Cv.forEach(r,(function(r){Hp(r.userId===n.userId);var i=Bk(t.It,r);return bw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new fv(n),o=function(e){return[0,rk(e)]}(a);r.push(t.get(o).next((function(n){return n?Cv.resolve():function(n){return t.put({targetId:0,path:rk(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Cv.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:mk});var n=t.store("collectionParents"),r=new fw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:rk(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new fv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=ut(e,3),r=(n[0],n[1]),a=(n[2],ok(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=zk(r),a=qk(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new pv(fv.fromString(i.document.name).popFirst(5)):i.noDocument?pv.fromSegments(i.noDocument.path):i.unknownDocument?pv.fromSegments(i.unknownDocument.path):qp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Cv.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Bw(this.It),a=new ib(ob.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:dg();Bk(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Cv.forEach(r,(function(e,r){var o=new Lp(r),u=Jk.oe(n.It,o),s=a.getIndexManager(o),c=Ew.oe(o,n.It,s,a.referenceDelegate);return new Yw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Nk(t,Vv.at),e).next()}))}))}}]),e}();function sb(e){e.createObjectStore("targetDocuments",{keyPath:vk}).createIndex("documentTargetsIndex",yk,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pk,{unique:!0}),e.createObjectStore("targetGlobal")}var cb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Qe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Wp(Gp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fw(this,i),this.ii=n+"main",this.It=new Mk(s),this.ri=new Nv(this.ii,this.Xs,new ub(this.It)),this.Cs=new Aw(this.referenceDelegate,this.It),this.remoteDocumentCache=Bw(this.It),this.Ns=new Qk,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Vp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Xe(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Wp(Gp.FAILED_PRECONDITION,cb);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Vv(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=We(Ke().mark((function n(r){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=We(Ke().mark((function t(n){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return hb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Pv(t))return jp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return fb(e).get("owner").next((function(e){return Cv.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return hb(e).delete(this.clientId)}},{key:"yi",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i,a=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Dk(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Cv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=it(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Cv.resolve(!0):fb(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Wp(Gp.FAILED_PRECONDITION,cb);return!1}}return!(!t.networkEnabled||!t.inForeground)||hb(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=We(Ke().mark((function e(){var t=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Nk(e,Vv.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return hb(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Ew.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new dw(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Jk.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;jp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Ak:14===i?Ck:13===i?Tk:12===i?Sk:11===i?_k:void qp();return this.ri.runTransaction(e,o,u,(function(i){return a=new Nk(i,r.Ss?r.Ss.next():Vv.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Vp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Wp(Gp.FAILED_PRECONDITION,Iv);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return fb(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Wp(Gp.FAILED_PRECONDITION,cb)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fb(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=fb(e);return n.get("owner").next((function(e){return t.mi(e)?(jp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Cv.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!yt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return jp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(zl){Vp("Failed to set zombie client id.",zl)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(zl){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Nv.C()}}]),e}();function fb(e){return Dk(e,"owner")}function hb(e){return Dk(e,"clientMetadata")}function db(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var pb=function(){function e(t,n,r,i){Qe(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Xe(e,null,[{key:"Ci",value:function(t,n){var r,i=dg(),a=dg(),o=it(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),vb=function(){function e(){Qe(this,e),this.xi=!1}return Xe(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(am(t))return Cv.resolve(null);var r=lm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=fm(t,null,"F"),r=lm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=dg.apply(void 0,Ae(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,fm(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return am(t)||r.isEqual(cv.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Up()<=Ht.DEBUG&&jp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pm(t)),i.Bi(e,o,t,wv(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Wv(mm(e));return t.forEach((function(t,r){vm(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Up()<=Ht.DEBUG&&jp("QueryEngine","Using full collection scan to execute query:",pm(t)),this.Ni.getDocumentsMatchingQuery(e,t,xv.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),yb=function(){function e(t,n,r,i){Qe(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Hv(av),this.qi=new ng((function(e){return My(e)}),Fy),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Xe(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function mb(e,t,n,r){return new yb(e,t,n,r)}function gb(e,t){return kb.apply(this,arguments)}function kb(){return kb=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=dg(),s=it(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=it(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=it(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=it(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function wb(e,t){var n=Kp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Cv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Hp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=dg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function bb(e){var t=Kp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function xb(e,t){var n=Kp(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Jv.EMPTY_BYTE_STRING,cv.min()).withLastLimboFreeSnapshotVersion(cv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=ig(),s=dg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Eb(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(cv.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Cv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function Eb(e,t,n){var r=dg(),i=dg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ig();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(cv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Ib(e,t){var n=Kp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function _b(e,t){var n=Kp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Cv.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Lk(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Sb(e,t,n){return Tb.apply(this,arguments)}function Tb(){return Tb=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kp(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pv(e.t1)){e.next=12;break}throw e.t1;case 12:jp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Tb.apply(this,arguments)}function Cb(e,t,n){var r=Kp(e),i=cv.min(),a=dg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Kp(e),i=r.qi.get(n);return void 0!==i?Cv.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,lm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:cv.min(),n?a:dg())})).next((function(e){return Db(r,ym(t),e),{documents:e,Hi:a}}))}))}function Ab(e,t){var n=Kp(e),r=Kp(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function Nb(e,t){var n=Kp(e),r=n.Ki.get(t)||cv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,wv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Db(n,t,e),e}))}function Db(e,t,n){var r=e.Ki.get(t)||cv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function Ob(e,t,n,r){return Pb.apply(this,arguments)}function Pb(){return Pb=We(Ke().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Kp(t),o=dg(),u=ig(),s=it(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,_b(a,function(e){return lm(im(fv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Eb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Rb(e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=We(Ke().mark((function e(t,n){var r,i,a,o=arguments;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:dg(),e.next=3,_b(t,lm(Hk(n.bundledQuery)));case 3:return i=e.sent,a=Kp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Dg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Jv.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Fb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ub(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jb=function(){function e(t,n,r,i){Qe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Xe(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Wp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Vb=function(){function e(t,n,r){Qe(this,e),this.targetId=t,this.state=n,this.error=r}return Xe(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wp(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Bb=function(){function e(t,n){Qe(this,e),this.clientId=t,this.activeTargetIds=n}return Xe(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vg(),o=0;i&&o<r.activeTargetIds.length;++o)i=cy(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zb=function(){function e(t,n){Qe(this,e),this.clientId=t,this.onlineState=n}return Xe(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qb=function(){function e(){Qe(this,e),this.activeTargetIds=vg()}return Xe(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Hb=function(){function e(t,n,r,i,a){Qe(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Hv(av),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Mb(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new qb),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return Xe(e,[{key:"start",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=it(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Mb(this.persistenceKey,i)))&&(o=Bb.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=it(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ub(this.persistenceKey,e));if(n){var r=Vb.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ub(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Vp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(We(Ke().mark((function e(){var r,i,a,o,u,s,c;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Vv.at;if(null!=e)try{var n=JSON.parse(e);Hp("number"==typeof n),t=n}catch(e){Vp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Vv.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new jb(this.currentUser,e,t,n),i=Fb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Fb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Ub(this.persistenceKey,e),i=new Vb(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Bb.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jb.Zi(new Lp(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Vb.Zi(r,t)}},{key:"yr",value:function(e){return zb.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:jp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=vg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Kb=function(){function e(){Qe(this,e),this.Lr=new qb,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Xe(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new qb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Gb=function(){function e(){Qe(this,e)}return Xe(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Wb=function(){function e(){var t=this;Qe(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Xe(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){jp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=it(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){jp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=it(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Qb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Yb=function(){function e(t){Qe(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Xe(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Xb=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Xe(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Pp;o.listenOnce(Cp.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Tp.NO_ERROR:var t=o.getResponseJson();jp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Tp.TIMEOUT:jp("Connection",'RPC "'+e+'" timed out'),a(new Wp(Gp.DEADLINE_EXCEEDED,"Request time out"));break;case Tp.HTTP_ERROR:var n=o.getStatus();if(jp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gp).indexOf(t)>=0?t:Gp.UNKNOWN}(r.status);a(new Wp(u,r.message))}else a(new Wp(Gp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Wp(Gp.UNAVAILABLE,"Connection failed."));break;default:qp()}}finally{jp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=_p(),a=Sp(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Dp({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");jp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Yb({Hr:function(e){l?jp("Connection","Not sending because WebChannel is closed:",e):(c||(jp("Connection","Opening WebChannel transport."),s.open(),c=!0),jp("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Op.EventType.OPEN,(function(){l||jp("Connection","WebChannel transport opened.")})),h(s,Op.EventType.CLOSE,(function(){l||(l=!0,jp("Connection","WebChannel transport closed"),f.io())})),h(s,Op.EventType.ERROR,(function(e){l||(l=!0,Bp("Connection","WebChannel transport errored:",e),f.io(new Wp(Gp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Op.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Hp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){jp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Ym[e];if(void 0!==t)return tg(t)}(a),u=i.message;void 0===o&&(o=Gp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Wp(o,u)),s.close()}else jp("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Ap.STAT_EVENT,(function(e){e.stat===Np.PROXY?jp("Connection","Detected buffering proxy"):e.stat===Np.NOPROXY&&jp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){Qe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Xe(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);jp("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return jp("RestConnection","Received: ",e),e}),(function(t){throw Bp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Qb[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Jb(){return"undefined"!=typeof window?window:null}function Zb(){return"undefined"!=typeof document?document:null}function $b(e){return new Tg(e,!0)}var ex=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Qe(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Xe(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&jp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),tx=function(){function e(t,n,r,i,a,o,u,s){Qe(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new ex(t,n)}return Xe(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Oo()}},{key:"Oo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Oo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Gp.RESOURCE_EXHAUSTED?(Vp(n.toString()),Vp("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Gp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=ut(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Wp(Gp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.xo=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.Oo()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.No.Ro(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return jp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.Do===e?n():(jp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),nx=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return Xe(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Hp(void 0===t||"string"==typeof t),Jv.fromBase64String(t||"")):(Hp(void 0===t||t instanceof Uint8Array),Jv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Gp.UNKNOWN:tg(e.code);return new Wp(t,e.message||"")}(o);n=new wg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Lg(e,s.document.name),l=Dg(s.document.updateTime),f=new Dy({mapValue:{fields:s.document.fields}}),h=Py.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new gg(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Lg(e,v.document),m=v.readTime?Dg(v.readTime):cv.min(),g=Py.newNoDocument(y,m),k=v.removedTargetIds||[];n=new gg([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Lg(e,w.document),x=w.removedTargetIds||[];n=new gg([],x,b,null)}else{if(!("filter"in t))return qp();t.filter;var E=t.filter;E.targetId;var I=E.count||0,_=new $m(I),S=E.targetId;n=new kg(S,_)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return cv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?cv.min():t.readTime?Dg(t.readTime):cv.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Ug(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Uy(r)?{documents:Kg(e,r)}:{query:Gg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ag(e,t.resumeToken):t.snapshotVersion.compareTo(cv.min())>0&&(n.readTime=Cg(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Ug(this.It),t.removeTarget=e,this.Lo(t)}}]),n}(tx),rx=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Yo=!1,s}return Xe(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,hr($e(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Hp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Hp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Dg(e.updateTime):Dg(t);return n.isEqual(cv.min())&&(n=Dg(t)),new Lm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Dg(e.commitTime);return this.listener.tu(n,t)}return Hp(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Ug(this.It),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qg(t.It,e)}))};this.Lo(n)}}]),n}(tx),ix=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a){var o;return Qe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.It=a,o.su=!1,o}return Xe(n,[{key:"iu",value:function(){if(this.su)throw new Wp(Gp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=ut(i,2),o=a[0],u=a[1];return r.So.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Wp(Gp.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=ut(a,2),u=o[0],s=o[1];return i.So._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Wp(Gp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return Xe((function e(){Qe(this,e)}))}());var ax=function(){function e(t,n){Qe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return Xe(e,[{key:"cu",value:function(){var e=this;0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.au("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.au("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}},{key:"au",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(Vp(t),this.uu=!1):jp("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),ox=Xe((function e(t,n,r,i,a){var o=this;Qe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr((function(e){r.enqueueAndForget(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mx(o),!e.t0){e.next=5;break}return jp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kp(t)).wu.add(4),e.next=4,cx(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,ux(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new ax(r,i)}));function ux(e){return sx.apply(this,arguments)}function sx(){return sx=We(Ke().mark((function e(t){var n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mx(t)){e.next=18;break}n=it(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),sx.apply(this,arguments)}function cx(e){return lx.apply(this,arguments)}function lx(){return lx=We(Ke().mark((function e(t){var n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=it(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),lx.apply(this,arguments)}function fx(e,t){var n=Kp(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),yx(n)?vx(n):Gx(n).Oo()&&dx(n,t))}function hx(e,t){var n=Kp(e),r=Gx(n);n._u.delete(t),r.Oo()&&px(n,t),0===n._u.size&&(r.Oo()?r.$o():mx(n)&&n.yu.set("Unknown"))}function dx(e,t){e.pu.Mt(t.targetId),Gx(e).Ho(t)}function px(e,t){e.pu.Mt(t),Gx(e).Jo(t)}function vx(e){e.pu=new xg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e._u.get(t)||null}}),Gx(e).start(),e.yu.cu()}function yx(e){return mx(e)&&!Gx(e).ko()&&e._u.size>0}function mx(e){return 0===Kp(e).wu.size}function gx(e){e.pu=void 0}function kx(e){return wx.apply(this,arguments)}function wx(){return wx=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){dx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function bx(e,t){return xx.apply(this,arguments)}function xx(){return xx=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gx(t),yx(t)?(t.yu.lu(n),vx(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ex(e,t,n){return Ix.apply(this,arguments)}function Ix(){return Ix=We(Ke().mark((function e(t,n,r){var i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof wg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=it(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,_x(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof gg?t.pu.Gt(n):n instanceof kg?t.pu.Yt(n):t.pu.Wt(n),r.isEqual(cv.min())){e.next=29;break}return e.prev=14,e.next=17,bb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Jv.EMPTY_BYTE_STRING,n.snapshotVersion)),px(e,t);var r=new Lk(n.target,t,1,n.sequenceNumber);dx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,_x(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ix.apply(this,arguments)}function _x(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=We(Ke().mark((function e(t,n,r){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pv(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,cx(t);case 5:t.yu.set("Offline"),r||(r=function(){return bb(t.localStore)}),t.asyncQueue.enqueueRetryable(We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,ux(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Tx(e,t){return t().catch((function(n){return _x(e,n,t)}))}function Cx(e){return Ax.apply(this,arguments)}function Ax(){return Ax=We(Ke().mark((function e(t){var n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Kp(t),r=Wx(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Nx(n)){e.next=19;break}return e.prev=3,e.next=6,Ib(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Dx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,_x(n,e.t0);case 17:e.next=2;break;case 19:Ox(n)&&Px(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ax.apply(this,arguments)}function Nx(e){return mx(e)&&e.du.length<10}function Dx(e,t){e.du.push(t);var n=Wx(e);n.Oo()&&n.Xo&&n.Zo(t.mutations)}function Ox(e){return mx(e)&&!Wx(e).ko()&&e.du.length>0}function Px(e){Wx(e).start()}function Rx(e){return Lx.apply(this,arguments)}function Lx(){return Lx=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wx(t).nu();case 1:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Mx(e){return Fx.apply(this,arguments)}function Fx(){return Fx=We(Ke().mark((function e(t){var n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wx(t),r=it(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Ux(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Pk.from(i,n,r),e.next=3,Tx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Cx(t);case 5:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Vx(e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=We(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Wx(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!eg(i=n.code)||i===Gp.ABORTED){e.next=7;break}return r=t.du.shift(),Wx(t).Fo(),e.next=5,Tx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Cx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ox(t)&&Px(t);case 5:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}function zx(e,t){return qx.apply(this,arguments)}function qx(){return qx=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Kp(t)).asyncQueue.verifyOperationInProgress(),jp("RemoteStore","RemoteStore received new credentials"),i=mx(r),r.wu.add(3),e.next=6,cx(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,ux(r);case 12:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function Hx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,ux(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,cx(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Gx(e){return e.Iu||(e.Iu=function(e,t,n){var r=Kp(e);return r.iu(),new nx(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:kx.bind(null,e),Zr:bx.bind(null,e),zo:Ex.bind(null,e)}),e.mu.push(function(){var t=We(Ke().mark((function t(n){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),yx(e)?vx(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:gx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function Wx(e){return e.Tu||(e.Tu=function(e,t,n){var r=Kp(e);return r.iu(),new rx(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Rx.bind(null,e),Zr:Vx.bind(null,e),eu:Mx.bind(null,e),tu:Ux.bind(null,e)}),e.mu.push(function(){var t=We(Ke().mark((function t(n){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Cx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(jp("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var Qx=function(){function e(t,n,r,i,a){Qe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Xe(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wp(Gp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Yx(e,t){if(Vp("AsyncQueue","".concat(t,": ").concat(e)),Pv(e))return new Wp(Gp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Xx=function(){function e(t){Qe(this,e),this.comparator=t?function(e,n){return t(e,n)||pv.comparator(e.key,n.key)}:function(e,t){return pv.comparator(e.key,t.key)},this.keyedMap=og(),this.sortedSet=new Hv(this.comparator)}return Xe(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Jx=function(){function e(){Qe(this,e),this.Eu=new Hv(pv.comparator)}return Xe(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):qp():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Zx=function(){function e(t,n,r,i,a,o,u,s){Qe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Xe(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Xx.emptySet(n),a,r,i,!0,!1)}}]),e}(),$x=Xe((function e(){Qe(this,e),this.Ru=void 0,this.listeners=[]})),eE=Xe((function e(){Qe(this,e),this.queries=new ng((function(e){return dm(e)}),hm),this.onlineState="Unknown",this.bu=new Set}));function tE(e,t){return nE.apply(this,arguments)}function nE(){return nE=We(Ke().mark((function e(t,n){var r,i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new $x),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Yx(e.t0,"Initialization of query '".concat(pm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.vu(o.Ru)&&uE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),nE.apply(this,arguments)}function rE(e,t){return iE.apply(this,arguments)}function iE(){return iE=We(Ke().mark((function e(t,n){var r,i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t){var n,r=Kp(e),i=!1,a=it(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=it(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&uE(r)}function oE(e,t,n){var r=Kp(e),i=r.queries.get(t);if(i){var a,o=it(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function uE(e){e.bu.forEach((function(e){e.next()}))}var sE=function(){function e(t,n,r){Qe(this,e),this.query=t,this.Vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return Xe(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=it(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Zx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.Vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=Zx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.Vu.next(e)}}]),e}(),cE=function(){function e(t,n){Qe(this,e),this.payload=t,this.byteLength=n}return Xe(e,[{key:"Ou",value:function(){return"metadata"in this.payload}}]),e}(),lE=function(){function e(t){Qe(this,e),this.It=t}return Xe(e,[{key:"Ji",value:function(e){return Lg(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Bg(this.It,e.document,!1):Py.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Dg(e)}}]),e}(),fE=function(){function e(t,n,r){Qe(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hE(t)}return Xe(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=fv.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new lE(this.It),i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=it(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||dg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ob(this.localStore,new lE(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=it(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Rb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var dE=Xe((function e(t){Qe(this,e),this.key=t})),pE=Xe((function e(t){Qe(this,e),this.key=t})),vE=function(){function e(t,n){Qe(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=dg(),this.mutatedKeys=dg(),this.Gu=mm(t),this.Qu=new Xx(this.Gu)}return Xe(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new Jx,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=vm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qp()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Zx(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Jx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=dg(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new pE(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new dE(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=dg();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Zx.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),yE=Xe((function e(t,n,r){Qe(this,e),this.query=t,this.targetId=n,this.view=r})),mE=Xe((function e(t){Qe(this,e),this.key=t,this.nc=!1})),gE=function(){function e(t,n,r,i,a,o){Qe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new ng((function(e){return dm(e)}),hm),this.rc=new Map,this.oc=new Set,this.uc=new Hv(pv.comparator),this.cc=new Map,this.ac=new Zw,this.hc={},this.lc=new Map,this.fc=Cw.vn(),this.onlineState="Unknown",this.dc=void 0}return Xe(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function kE(e,t){return wE.apply(this,arguments)}function wE(){return wE=We(Ke().mark((function e(t,n){var r,i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hI(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,_b(r.localStore,lm(n));case 8:return u=e.sent,r.isPrimaryClient&&fx(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,bE(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function bE(e,t,n,r){return xE.apply(this,arguments)}function xE(){return xE=We(Ke().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=We(Ke().mark((function e(t,n,r,i){var a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Cb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(zE(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Cb(t.localStore,n,!0);case 3:return a=e.sent,o=new vE(n,a.Hi),u=o.Wu(a.documents),s=mg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),zE(t,r,c.Xu),l=new yE(n,r,o),e.abrupt("return",(t.ic.set(n,l),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function EE(e,t){return IE.apply(this,arguments)}function IE(){return IE=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kp(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!hm(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Sb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hx(r.remoteStore,i.targetId),VE(r,i.targetId)})).catch(Sv);case 9:e.next=14;break;case 11:return VE(r,i.targetId),e.next=14,Sb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),IE.apply(this,arguments)}function _E(e,t,n){return SE.apply(this,arguments)}function SE(){return SE=We(Ke().mark((function e(t,n,r){var i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Kp(e),a=sv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),dg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ig(),s=dg();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=it(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=zm(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Km(c.key,l,Oy(l.value.mapValue),Mm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:ug(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Hv(av)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,KE(i,a.changes);case 9:return e.next=11,Cx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Yx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),SE.apply(this,arguments)}function TE(e,t){return CE.apply(this,arguments)}function CE(){return CE=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.prev=1,e.next=4,xb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Hp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Hp(n.nc):e.removedDocuments.size>0&&(Hp(n.nc),n.nc=!1))})),e.next=8,KE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),CE.apply(this,arguments)}function AE(e,t,n){var r=Kp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Kp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=it(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&uE(n)}(r.eventManager,t),i.length&&r.sc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function NE(e,t,n){return DE.apply(this,arguments)}function DE(){return DE=We(Ke().mark((function e(t,n,r){var i,a,o,u,s,c;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Kp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Hv(pv.comparator)).insert(o,Py.newNoDocument(o,cv.min())),s=dg().add(o),c=new yg(cv.min(),new Map,new Wv(av),u,s),e.next=9,TE(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),HE(i),e.next=16;break;case 14:return e.next=16,Sb(i.localStore,n,!1).then((function(){return VE(i,n,r)})).catch(Sv);case 16:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function OE(e,t){return PE.apply(this,arguments)}function PE(){return PE=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=n.batch.batchId,e.prev=1,e.next=4,wb(r.localStore,n);case 4:return a=e.sent,jE(r,i,null),UE(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,KE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),PE.apply(this,arguments)}function RE(e,t,n){return LE.apply(this,arguments)}function LE(){return LE=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kp(t),e.prev=1,e.next=4,function(e,t){var n=Kp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Hp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,jE(i,n,r),UE(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,KE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),LE.apply(this,arguments)}function ME(e,t){return FE.apply(this,arguments)}function FE(){return FE=We(Ke().mark((function e(t,n){var r,i,a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mx((r=Kp(t)).remoteStore)||jp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Kp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Yx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),FE.apply(this,arguments)}function UE(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function jE(e,t,n){var r=Kp(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function VE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=it(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||BE(e,t)}))}function BE(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(hx(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),HE(e))}function zE(e,t,n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof dE?(e.ac.addReference(a.key,t),qE(e,a)):a instanceof pE?(jp("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||BE(e,a.key)):qp()}}catch(o){i.e(o)}finally{i.f()}}function qE(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(jp("SyncEngine","New document in limbo: "+n),e.oc.add(r),HE(e))}function HE(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new pv(fv.fromString(t)),r=e.fc.next();e.cc.set(r,new mE(n)),e.uc=e.uc.insert(n,r),fx(e.remoteStore,new Lk(lm(im(n.path)),r,2,Vv.at))}}function KE(e,t,n){return GE.apply(this,arguments)}function GE(){return GE=We(Ke().mark((function e(t,n,r){var i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Kp(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=pb.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.zo(a),e.next=9,function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Cv.forEach(n,(function(t){return Cv.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Cv.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pv(e.t0)){e.next=10;break}throw e.t0;case 10:jp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=it(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}function WE(e,t){return QE.apply(this,arguments)}function QE(){return QE=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Kp(t)).currentUser.isEqual(n)){e.next=11;break}return jp("SyncEngine","User change. New user:",n.toKey()),e.next=5,gb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Wp(Gp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,KE(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function YE(e,t){var n=Kp(e),r=n.cc.get(t);if(r&&r.nc)return dg().add(r.key);var i=dg(),a=n.rc.get(t);if(!a)return i;var o,u=it(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function XE(e,t){return JE.apply(this,arguments)}function JE(){return JE=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.next=3,Cb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&zE(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function ZE(e,t){return $E.apply(this,arguments)}function $E(){return $E=We(Ke().mark((function e(t,n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),e.abrupt("return",Nb(r.localStore,n).then((function(e){return KE(r,e)})));case 2:case"end":return e.stop()}}),e)}))),$E.apply(this,arguments)}function eI(e,t,n,r){return tI.apply(this,arguments)}function tI(){return tI=We(Ke().mark((function e(t,n,r,i){var a,o;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Kp(t),e.next=3,function(e,t){var n=Kp(e),r=Kp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Cv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Cx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(jE(a,n,i||null),UE(a,n),function(e,t){Kp(Kp(e).mutationQueue).An(t)}(a.localStore,n)):qp();case 11:return e.next=13,KE(a,o);case 13:e.next=16;break;case 15:jp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e,t){return rI.apply(this,arguments)}function rI(){return rI=We(Ke().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hI(r=Kp(t)),dI(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,iI(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,Hx(r.remoteStore,!0);case 9:o=it(a);try{for(o.s();!(u=o.n()).done;)s=u.value,fx(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return VE(r,t),Sb(r.localStore,t,!0)})),hx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,iI(r,c);case 21:return function(e){var t=Kp(e);t.cc.forEach((function(e,n){hx(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Hv(pv.comparator)}(r),r.dc=!1,e.next=25,Hx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t,n){return aI.apply(this,arguments)}function aI(){return aI=We(Ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Kp(t),a=[],o=[],u=it(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,_b(i.localStore,lm(f[0]));case 11:l=e.sent,h=it(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,XE(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ab(i.localStore,c);case 36:return m=e.sent,e.next=39,_b(i.localStore,m);case 39:return l=e.sent,e.next=42,bE(i,oI(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),aI.apply(this,arguments)}function oI(e){return rm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function uI(e){var t=Kp(e);return Kp(Kp(t.localStore).persistence).vi()}function sI(e,t,n,r){return cI.apply(this,arguments)}function cI(){return cI=We(Ke().mark((function e(t,n,r,i){var a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Kp(t)).dc){e.next=3;break}return e.abrupt("return",void jp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Nb(a.localStore,ym(o[0]));case 10:return u=e.sent,s=yg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,KE(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Sb(a.localStore,n,!0);case 17:return VE(a,n,i),e.abrupt("break",20);case 19:qp();case 20:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t,n){return fI.apply(this,arguments)}function fI(){return fI=We(Ke().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=hI(t)).dc){e.next=45;break}a=it(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return jp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ab(i.localStore,u);case 12:return s=e.sent,e.next=15,_b(i.localStore,s);case 15:return c=e.sent,e.next=18,bE(i,oI(s),c.targetId,!1);case 18:fx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=it(r),e.prev=30,h=Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Sb(i.localStore,t,!1).then((function(){hx(i.remoteStore,t),VE(i,t)})).catch(Sv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),fI.apply(this,arguments)}function hI(e){var t=Kp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NE.bind(null,t),t.sc.zo=aE.bind(null,t.eventManager),t.sc.wc=oE.bind(null,t.eventManager),t}function dI(e){var t=Kp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RE.bind(null,t),t}function pI(e,t,n){var r=Kp(e);(function(){var e=We(Ke().mark((function e(t,n,r){var i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Kp(e),r=Dg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(hE(i)),a=new fE(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,KE(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Kp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Bp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var vI=function(){function e(){Qe(this,e),this.synchronizeTabs=!1}return Xe(e,[{key:"initialize",value:function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=$b(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return mb(this.persistence,new vb,e.initialUser,this.It)}},{key:"yc",value:function(e){return new ib(ob.Bs,this.It)}},{key:"gc",value:function(e){return new Kb}},{key:"terminate",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yI=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Xe(n,[{key:"initialize",value:function(){var e=We(Ke().mark((function e(t){var r=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr($e(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,dI(this.Ac.syncEngine);case 6:return e.next=8,Cx(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return mb(this.persistence,new vb,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Lw(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new jv(t,this.persistence);return new Uv(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ww.withCacheSize(this.cacheSizeBytes):ww.DEFAULT;return new lb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jb(),Zb(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Kb}}]),n}(vI),mI=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Xe(n,[{key:"initialize",value:function(){var e=We(Ke().mark((function e(t){var r,i=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr($e(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof Hb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:eI.bind(null,r),$r:sI.bind(null,r),Br:lI.bind(null,r),vi:uI.bind(null,r),Mr:ZE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nI(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=Jb();if(!Hb.C(t))throw new Wp(Gp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(yI),gI=function(){function e(){Qe(this,e)}return Xe(e,[{key:"initialize",value:function(){var e=We(Ke().mark((function e(t,n){var r=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return AE(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=WE.bind(null,this.syncEngine),e.next=12,Hx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new eE}},{key:"createDatastore",value:function(e){var t,n=$b(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Xb(t));return function(e,t,n,r){return new ix(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return AE(o.syncEngine,e,0)},a=Wb.C()?new Wb:new Gb,new ox(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new gE(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kp(t),jp("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,cx(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function kI(e,t,n){if(!n)throw new Wp(Gp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wI(e,t,n,r){if(!0===t&&!0===r)throw new Wp(Gp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function bI(e){if(!pv.isDocumentKey(e))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xI(e){if(pv.isDocumentKey(e))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function EI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qp()}function II(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wp(Gp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=EI(e);throw new Wp(Gp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function _I(e,t){if(t<=0)throw new Wp(Gp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var SI=new Map,TI=function(){function e(t){var n;if(Qe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Wp(Gp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wp(Gp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Xe(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),CI=function(){function e(t,n,r,i){Qe(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TI({}),this._settingsFrozen=!1}return Xe(e,[{key:"app",get:function(){if(!this._app)throw new Wp(Gp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Wp(Gp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xp;switch(e.type){case"gapi":var t=e.client;return new ev(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wp(Gp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=SI.get(e);t&&(jp("ComponentProvider","Removing Datastore"),SI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function AI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=II(e,CI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Bp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Lp.MOCK_USER;else{o=_t(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Wp(Gp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Lp(s)}e._authCredentials=new Jp(new Yp(o,u))}}var NI=function(){function e(t,n,r){Qe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Xe(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new OI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),DI=function(){function e(t,n,r){Qe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Xe(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),OI=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this,e,r,im(i)))._path=i,a.type="collection",a}return Xe(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new NI(this.firestore,null,new pv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(DI);function PI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),kI("collection","path",t),e instanceof CI){var a=fv.fromString.apply(fv,[t].concat(r));return xI(a),new OI(e,null,a)}if(!(e instanceof NI||e instanceof OI))throw new Wp(Gp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fv.fromString.apply(fv,[t].concat(r)));return xI(o),new OI(e.firestore,null,o)}function RI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jt(e),1===arguments.length&&(t=iv.R()),kI("doc","path",t),e instanceof CI){var a=fv.fromString.apply(fv,[t].concat(r));return bI(a),new NI(e,null,new pv(a))}if(!(e instanceof NI||e instanceof OI))throw new Wp(Gp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fv.fromString.apply(fv,[t].concat(r)));return bI(o),new NI(e.firestore,e instanceof OI?e.converter:null,new pv(o))}function LI(e,t){return e=jt(e),t=jt(t),(e instanceof NI||e instanceof OI)&&(t instanceof NI||t instanceof OI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function MI(e,t){return e=jt(e),t=jt(t),e instanceof DI&&t instanceof DI&&e.firestore===t.firestore&&hm(e._query,t._query)&&e.converter===t.converter}function FI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return We(Ke().mark((function r(){var i;return Ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var UI=function(){function e(t){Qe(this,e),this.observer=t,this.muted=!1}return Xe(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Vp("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),jI=function(){function e(t,n){var r=this;Qe(this,e),this.Pc=t,this.It=n,this.metadata=new Qp,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Xe(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=We(Ke().mark((function e(){var t,n,r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new cE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=We(Ke().mark((function e(){var t,n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=We(Ke().mark((function e(){var t,n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),VI=function(){function e(t){Qe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Xe(e,[{key:"lookup",value:function(){var e=We(Ke().mark((function e(t){var n,r=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Wp(Gp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=Ug(r.It)+"/documents",a={documents:n.map((function(e){return Rg(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=zg(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Hp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Jm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=We(Ke().mark((function e(){var t,n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=pv.fromPath(t);n.mutations.push(new Zm(r,n.precondition(r)))})),e.next=7,function(){var e=We(Ke().mark((function e(t,n){var r,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kp(t),i=Ug(r.It)+"/documents",a={writes:n.map((function(e){return qg(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qp();t=cv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wp(Gp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cv.min())?Mm.exists(!1):Mm.updateTime(t):Mm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cv.min()))throw new Wp(Gp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mm.updateTime(t)}return Mm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),BI=function(){function e(t,n,r,i,a){Qe(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new ex(this.asyncQueue,"transaction_retry")}return Xe(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.No.Ro(We(Ke().mark((function t(){var n,r;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new VI(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!uy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!eg(t)}return!1}}]),e}(),zI=function(){function e(t,n,r,i){var a=this;Qe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lp.UNAUTHENTICATED,this.clientId=iv.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Xe(e,[{key:"getConfiguration",value:function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Wp(Gp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(We(Ke().mark((function n(){var r;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Yx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function qI(e,t){return HI.apply(this,arguments)}function HI(){return HI=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,gb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function KI(e,t){return GI.apply(this,arguments)}function GI(){return GI=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,WI(t);case 3:return r=e.sent,jp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return zx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return zx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),GI.apply(this,arguments)}function WI(e){return QI.apply(this,arguments)}function QI(){return QI=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return jp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,qI(t,new vI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}function YI(e){return XI.apply(this,arguments)}function XI(){return XI=We(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return jp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,KI(t,new gI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function JI(e){return WI(e).then((function(e){return e.persistence}))}function ZI(e){return WI(e).then((function(e){return e.localStore}))}function $I(e){return YI(e).then((function(e){return e.remoteStore}))}function e_(e){return YI(e).then((function(e){return e.syncEngine}))}function t_(e){return YI(e).then((function(e){return e.datastore}))}function n_(e){return r_.apply(this,arguments)}function r_(){return r_=We(Ke().mark((function e(t){var n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kE.bind(null,n.syncEngine),r.onUnlisten=EE.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function i(){return Ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new UI({next:function(a){t.enqueueAndForget((function(){return rE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Wp(Gp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Wp(Gp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sE(im(n.path),a,{includeMetadataChanges:!0,ku:!0});return tE(e,o)},i.next=3,n_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function a_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function i(){return Ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new UI({next:function(n){t.enqueueAndForget((function(){return rE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Wp(Gp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sE(n,a,{includeMetadataChanges:!0,ku:!0});return tE(e,o)},i.next=3,n_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var o_=function(){function e(){var t=this;Qe(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new ex(this,"async_queue_retry"),this.Wc=function(){var e=Zb();e&&jp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=Zb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return Xe(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=Zb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new Qp;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=We(Ke().mark((function e(){var t=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Pv(e.t0)){e.next=12;break}throw e.t0;case 12:jp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.No.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Qx.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&qp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=We(Ke().mark((function e(){var t;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=it(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=it(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function u_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=it(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var s_=function(){function e(){Qe(this,e),this._progressObserver={},this._taskCompletionResolver=new Qp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Xe(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),c_=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a){var o;return Qe(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new o_,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Xe(n,[{key:"_terminate",value:function(){return this._firestoreClient||f_(this),this._firestoreClient.terminate()}}]),n}(CI);function l_(e){return e._firestoreClient||f_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function f_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ay(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function h_(e,t,n){var r=new Qp;return e.asyncQueue.enqueue(We(Ke().mark((function i(){var a;return Ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,qI(e,n);case 3:return i.next=5,KI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Gp.FAILED_PRECONDITION||e.code===Gp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Bp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function d_(e){return function(e){return e.asyncQueue.enqueue(We(Ke().mark((function t(){var n,r;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JI(e);case 2:return n=t.sent,t.next=5,$I(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Kp(e);return t.wu.delete(0),ux(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(l_(e=II(e,c_)))}function p_(e){return function(e){return e.asyncQueue.enqueue(We(Ke().mark((function t(){var n,r;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JI(e);case 2:return n=t.sent,t.next=5,$I(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kp(t)).wu.add(0),e.next=4,cx(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(l_(e=II(e,c_)))}function v_(e,t){var n=l_(e=II(e,c_)),r=new s_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new jI(e,t)}(function(e,t){if(e instanceof Uint8Array)return FI(e,t);if(e instanceof ArrayBuffer)return FI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,$b(t));e.asyncQueue.enqueueAndForget(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pI,t.next=3,e_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function y_(e,t){return function(e,t){return e.asyncQueue.enqueue(We(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Kp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,ZI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(l_(e=II(e,c_)),t).then((function(t){return t?new DI(e,null,t.query):null}))}function m_(e){if(e._initialized||e._terminated)throw new Wp(Gp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var g_=function(){function e(t){Qe(this,e),this._byteString=t}return Xe(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Jv.fromBase64String(t))}catch(t){throw new Wp(Gp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Jv.fromUint8Array(t))}}]),e}(),k_=function(){function e(){Qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dv(n)}return Xe(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var w_=Xe((function e(t){Qe(this,e),this._methodName=t})),b_=function(){function e(t,n){if(Qe(this,e),!isFinite(t)||t<-90||t>90)throw new Wp(Gp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wp(Gp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Xe(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return av(this._lat,e._lat)||av(this._long,e._long)}}]),e}(),x_=/^__.*__$/,E_=function(){function e(t,n,r){Qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Xe(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Km(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hm(e,this.data,t,this.fieldTransforms)}}]),e}(),I_=function(){function e(t,n,r){Qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Xe(e,[{key:"toMutation",value:function(e,t){return new Km(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function __(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qp()}}var S_=function(){function e(t,n,r,i,a,o){Qe(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Xe(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return G_(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(__(this.sa)&&x_.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),T_=function(){function e(t,n,r){Qe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||$b(t)}return Xe(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new S_({sa:e,methodName:t,fa:n,path:dv.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function C_(e){var t=e._freezeSettings(),n=$b(e._databaseId);return new T_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function A_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);z_("Data must be an object, but it was:",o,r);var u,s,c=V_(r,o);if(a.merge)u=new Xv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=it(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=q_(t,d,n);if(!o.contains(p))throw new Wp(Gp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));W_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Xv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new E_(new Dy(c),u,s)}var N_=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(w_);function D_(e,t,n){return new S_({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var O_=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"_toFieldTransform",value:function(e){return new Rm(e.path,new Sm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(w_),P_=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e))._a=r,i}return Xe(n,[{key:"_toFieldTransform",value:function(e){var t=D_(this,e,!0),n=this._a.map((function(e){return j_(e,t)})),r=new Tm(n);return new Rm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_),R_=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e))._a=r,i}return Xe(n,[{key:"_toFieldTransform",value:function(e){var t=D_(this,e,!0),n=this._a.map((function(e){return j_(e,t)})),r=new Am(n);return new Rm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_),L_=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e)).wa=r,i}return Xe(n,[{key:"_toFieldTransform",value:function(e){var t=new Dm(e.It,bm(e.It,this.wa));return new Rm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(w_);function M_(e,t,n,r){var i=e.da(1,t,n);z_("Data must be an object, but it was:",i,r);var a=[],o=Dy.empty();zv(r,(function(e,r){var u=K_(t,e,n);r=jt(r);var s=i.ca(u);if(r instanceof N_)a.push(u);else{var c=j_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Xv(a);return new I_(o,u,i.fieldTransforms)}function F_(e,t,n,r,i,a){var o=e.da(1,t,n),u=[q_(t,r,n)],s=[i];if(a.length%2!=0)throw new Wp(Gp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(q_(t,a[c])),s.push(a[c+1]);for(var l=[],f=Dy.empty(),h=u.length-1;h>=0;--h)if(!W_(l,u[h])){var d=u[h],p=s[h];p=jt(p);var v=o.ca(d);if(p instanceof N_)l.push(d);else{var y=j_(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Xv(l);return new I_(f,m,o.fieldTransforms)}function U_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return j_(n,e.da(r?4:3,t))}function j_(e,t){if(B_(e=jt(e)))return z_("Unsupported field value:",t,e),V_(e,t);if(e instanceof w_)return function(e,t){if(!__(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=it(e);try{for(a.s();!(n=a.n()).done;){var o=j_(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=jt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bm(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sv.fromDate(e);return{timestampValue:Cg(t.It,n)}}if(e instanceof sv){var r=new sv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cg(t.It,r)}}if(e instanceof b_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof g_)return{bytesValue:Ag(t.It,e._byteString)};if(e instanceof NI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Og(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(EI(e)))}(e,t)}function V_(e,t){var n={};return qv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zv(e,(function(e,r){var i=j_(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function B_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sv||e instanceof b_||e instanceof g_||e instanceof NI||e instanceof w_)}function z_(e,t,n){if(!B_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=EI(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function q_(e,t,n){if((t=jt(t))instanceof k_)return t._internalPath;if("string"==typeof t)return K_(e,t);throw G_("Field path arguments must be of type string or ",e,!1,void 0,n)}var H_=new RegExp("[~\\*/\\[\\]]");function K_(e,t,n){if(t.search(H_)>=0)throw G_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return st(k_,Ae(t.split(".")))._internalPath}catch(r){throw G_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function G_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Wp(Gp.INVALID_ARGUMENT,u+e+s)}function W_(e,t){return e.some((function(e){return e.isEqual(t)}))}var Q_=function(){function e(t,n,r,i,a){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Xe(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new NI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Y_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(X_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Y_=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"data",value:function(){return hr($e(n.prototype),"data",this).call(this)}}]),n}(Q_);function X_(e,t){return"string"==typeof t?K_(e,t):t instanceof k_?t._internalPath:t._delegate._internalPath}function J_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wp(Gp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Z_=Xe((function e(){Qe(this,e)}));function $_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var eS=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return Xe(n,[{key:"_apply",value:function(e){var t=C_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){fS(o,a);var s,c=[],l=it(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(lS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=lS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||fS(o,a),u=U_(n,"where",o,"in"===a||"not-in"===a);var h=zy.create(i,a,u);return function(e,t){if(t.dt()){var n=um(e);if(null!==n&&!n.isEqual(t.field))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=om(e);null!==r&&hS(e,t.field,r)}var i=function(e,t){var n,r=it(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new DI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Z_);var tS=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return Xe(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zy(t,n);return function(e,t){if(null===om(e)){var n=um(e);null!==n&&hS(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new DI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new nm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Z_);var nS=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return Xe(n,[{key:"_apply",value:function(e){return new DI(e.firestore,e.converter,fm(e._query,this.Ia,this.Ta))}}]),n}(Z_);var rS=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return Xe(n,[{key:"_apply",value:function(e){var t=cS(e,this.type,this.Ea,this.Aa);return new DI(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Z_);function iS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rS("startAt",t,!0)}function aS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rS("startAfter",t,!1)}var oS=function(e){Ze(n,e);var t=rt(n);function n(e,r,i){var a;return Qe(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return Xe(n,[{key:"_apply",value:function(e){var t=cS(e,this.type,this.Ea,this.Aa);return new DI(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Z_);function uS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oS("endBefore",t,!1)}function sS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oS("endAt",t,!0)}function cS(e,t,n,r){if(n[0]=jt(n[0]),n[0]instanceof Q_)return function(e,t,n,r,i){if(!r)throw new Wp(Gp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=it(cm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ky(t,r.key));else{var c=r.data.field(s.field);if(ny(c))throw new Wp(Gp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Jy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=C_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Wp(Gp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sm(e)&&-1!==c.indexOf("/"))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fv.fromString(c));if(!pv.isDocumentKey(l))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new pv(l);u.push(ky(t,f))}else{var h=U_(n,r,c);u.push(h)}}return new Jy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function lS(e,t,n){if("string"==typeof(n=jt(n))){if(""===n)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sm(t)&&-1!==n.indexOf("/"))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fv.fromString(n));if(!pv.isDocumentKey(r))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ky(e,new pv(r))}if(n instanceof NI)return ky(e,n._key);throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(EI(n),"."))}function fS(e,t){if(!Array.isArray(e)||0===e.length)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function hS(e,t,n){if(!n.isEqual(t))throw new Wp(Gp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var dS=function(){function e(){Qe(this,e)}return Xe(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ey(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ty(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return zv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new b_(ey(e.latitude),ey(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ry(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(iy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$v(e);return new sv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fv.fromString(e);Hp(nk(n));var r=new oy(n.get(1),n.get(3)),i=new pv(n.popFirst(5));return r.isEqual(t)||Vp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function pS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var vS=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Xe(n,[{key:"convertBytes",value:function(e){return new g_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new NI(this.firestore,null,t)}}]),n}(dS),yS=function(){function e(t,n){Qe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Xe(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),mS=function(e){Ze(n,e);var t=rt(n);function n(e,r,i,a,o,u){var s;return Qe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Xe(n,[{key:"exists",value:function(){return hr($e(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new gS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(X_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Q_),gS=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hr($e(n.prototype),"data",this).call(this,e)}}]),n}(mS),kS=function(){function e(t,n,r,i){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yS(i.hasPendingWrites,i.fromCache),this.query=r}return Xe(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new gS(n._firestore,n._userDataWriter,r.key,r,new yS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wp(Gp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new gS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new gS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qp()}}function bS(e,t){return e instanceof mS&&t instanceof mS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kS&&t instanceof kS&&e._firestore===t._firestore&&MI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var xS=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Xe(n,[{key:"convertBytes",value:function(e){return new g_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new NI(this.firestore,null,t)}}]),n}(dS);function ES(e){e=II(e,NI);var t=II(e.firestore,c_),n=l_(t),r=new xS(t);return function(e,t){var n=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function r(){return Ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=We(Ke().mark((function e(t,n,r){var i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Kp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Wp(Gp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Yx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ZI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new mS(t,r,e._key,n,new yS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function IS(e){e=II(e,DI);var t=II(e.firestore,c_),n=l_(t),r=new xS(t);return function(e,t){var n=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function r(){return Ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=We(Ke().mark((function e(t,n,r){var i,a,o,u,s;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cb(t,n,!0);case 3:i=e.sent,a=new vE(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Yx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ZI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new kS(t,r,e,n)}))}function _S(e,t,n){e=II(e,NI);var r=II(e.firestore,c_),i=pS(e.converter,t,n);return AS(r,[A_(C_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mm.none())])}function SS(e,t,n){e=II(e,NI);for(var r=II(e.firestore,c_),i=C_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return AS(r,[("string"==typeof(t=jt(t))||t instanceof k_?F_(i,"updateDoc",e._key,t,n,o):M_(i,"updateDoc",e._key,t)).toMutation(e._key,Mm.exists(!0))])}function TS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=jt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||u_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(u_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof NI)l=II(e.firestore,c_),f=im(e._key.path),c={next:function(t){n[s]&&n[s](NS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=II(e,DI);l=II(p.firestore,c_),f=p._query;var v=new xS(l);c={next:function(e){n[s]&&n[s](new kS(l,v,p,e))},error:n[s+1],complete:n[s+2]},J_(e._query)}return function(e,t,n,r){var i=new UI(r),a=new sE(t,i,n);return e.asyncQueue.enqueueAndForget(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tE,t.next=3,n_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rE,t.next=3,n_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(l_(l),f,h,c)}function CS(e,t){return function(e,t){var n=new UI(t);return e.asyncQueue.enqueueAndForget(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Kp(e).bu.add(t),t.next()},t.next=3,n_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(We(Ke().mark((function t(){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Kp(e).bu.delete(t)},t.next=3,n_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(l_(e=II(e,c_)),u_(t)?t:{next:t})}function AS(e,t){return function(e,t){var n=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function r(){return Ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=_E,r.next=3,e_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(l_(e),t)}function NS(e,t,n){var r=n.docs.get(t._key),i=new xS(e);return new mS(e,i,t._key,r,new yS(n.hasPendingWrites,n.fromCache),t.converter)}var DS={maxAttempts:5},OS=function(){function e(t,n){Qe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=C_(t)}return Xe(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=PS(e,this._firestore),i=pS(r.converter,t,n),a=A_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Mm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=PS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=jt(t))||t instanceof k_?F_(this._dataReader,"WriteBatch.update",i._key,t,n,o):M_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Mm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=PS(e,this._firestore);return this._mutations=this._mutations.concat(new Jm(t._key,Mm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Wp(Gp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function PS(e,t){if((e=jt(e)).firestore!==t)throw new Wp(Gp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var RS=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Xe(n,[{key:"get",value:function(e){var t=this,r=PS(e,this._firestore),i=new xS(this._firestore);return hr($e(n.prototype),"get",this).call(this,e).then((function(e){return new mS(t._firestore,i,r._key,e._document,new yS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Qe(this,e),this._firestore=t,this._transaction=n,this._dataReader=C_(t)}return Xe(e,[{key:"get",value:function(e){var t=this,n=PS(e,this._firestore),r=new vS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return qp();var i=e[0];if(i.isFoundDocument())return new Q_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Q_(t._firestore,r,n._key,null,n.converter);throw qp()}))}},{key:"set",value:function(e,t,n){var r=PS(e,this._firestore),i=pS(r.converter,t,n),a=A_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=PS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=jt(t))||t instanceof k_?F_(this._dataReader,"Transaction.update",i._key,t,n,o):M_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=PS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function LS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new P_("arrayUnion",t)}function MS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new R_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mp=e}(Rn),Tn(new Vt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new c_(new Zp(e.getProvider("auth-internal")),new nv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wp(Gp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oy(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Vn(Rp,"3.6.0",e),Vn(Rp,"3.6.0","esm2017")}();function FS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Wp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function US(){if("undefined"===typeof Uint8Array)throw new Wp("unimplemented","Uint8Arrays are not available in this environment.")}function jS(){if("undefined"==typeof atob)throw new Wp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var VS=function(){function e(t){Qe(this,e),this._delegate=t}return Xe(e,[{key:"toBase64",value:function(){return jS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return US(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return jS(),new e(g_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return US(),new e(g_.fromUint8Array(t))}}]),e}();function BS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=it(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var zS=function(){function e(){Qe(this,e)}return Xe(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){m_(e=II(e,c_));var n=l_(e),r=e._freezeSettings(),i=new gI;return h_(n,i,new yI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){m_(e=II(e,c_));var t=l_(e),n=e._freezeSettings(),r=new gI;return h_(t,r,new mI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Wp(Gp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qp;return e._queue.enqueueAndForgetEvenWhileRestricted(We(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=We(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nv.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Nv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(db(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),qS=function(){function e(t,n,r){var i=this;Qe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof oy||(this._appCompat=t)}return Xe(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Bp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};AI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return d_(this._delegate)}},{key:"disableNetwork",value:function(){return p_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ME,n.next=3,e_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(l_(e=II(e,c_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return CS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Wp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new rT(this,PI(this._delegate,e))}catch(t){throw YS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new QS(this,RI(this._delegate,e))}catch(t){throw YS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new eT(this,function(e,t){if(e=II(e,CI),kI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wp(Gp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new DI(e,null,function(e){return new nm(fv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw YS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=II(e,c_);var r=Object.assign(Object.assign({},DS),n);return function(e){if(e.maxAttempts<1)throw new Wp(Gp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qp;return e.asyncQueue.enqueueAndForget(We(Ke().mark((function i(){var a;return Ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t_(e);case 2:a=i.sent,new BI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(l_(e),(function(n){return t(new RS(e,n))}),r)}(this._delegate,(function(n){return e(new KS(t,n))}))}},{key:"batch",value:function(){var e=this;return l_(this._delegate),new GS(new OS(this._delegate,(function(t){return AS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return v_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return y_(this._delegate,e).then((function(e){return e?new eT(t,e):null}))}}]),e}(),HS=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this)).firestore=e,r}return Xe(n,[{key:"convertBytes",value:function(e){return new VS(new g_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return QS.forKey(t,this.firestore,null)}}]),n}(dS);var KS=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new HS(t)}return Xe(e,[{key:"get",value:function(e){var t=this,n=iT(e);return this._delegate.get(n).then((function(e){return new ZS(t._firestore,new mS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=iT(e);return n?(FS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iT(e);return this._delegate.delete(t),this}}]),e}(),GS=function(){function e(t){Qe(this,e),this._delegate=t}return Xe(e,[{key:"set",value:function(e,t,n){var r=iT(e);return n?(FS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),WS=function(){function e(t,n,r){Qe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Xe(e,[{key:"fromFirestore",value:function(e,t){var n=new gS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $S(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new HS(t),n),i.set(n,a)),a}}]),e}();WS.INSTANCES=new WeakMap;var QS=function(){function e(t,n){Qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HS(t)}return Xe(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new rT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new rT(this.firestore,PI(this._delegate,e))}catch(t){throw YS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=jt(e))instanceof NI&&LI(this._delegate,e)}},{key:"set",value:function(e,t){t=FS("DocumentReference.set",t);try{return t?_S(this._delegate,e,t):_S(this._delegate,e)}catch(n){throw YS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?SS(this._delegate,e):SS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw YS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return AS(II(e.firestore,c_),[new Jm(e._key,Mm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XS(n),a=JS(n,(function(t){return new ZS(e.firestore,new mS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return TS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ES(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=II(e,NI);var t=II(e.firestore,c_);return i_(l_(t),e._key,{source:"server"}).then((function(n){return NS(t,e,n)}))}(this._delegate):function(e){e=II(e,NI);var t=II(e.firestore,c_);return i_(l_(t),e._key).then((function(n){return NS(t,e,n)}))}(this._delegate),t.then((function(e){return new ZS(n.firestore,new mS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Wp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new NI(n._delegate,r,new pv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new NI(n._delegate,r,t))}}]),e}();function YS(e,t,n){return e.message=e.message.replace(t,n),e}function XS(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!BS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function JS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=BS(e[0])?e[0]:BS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ZS=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Xe(e,[{key:"ref",get:function(){return new QS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return bS(this._delegate,e._delegate)}}]),e}(),$S=function(e){Ze(n,e);var t=rt(n);function n(){return Qe(this,n),t.apply(this,arguments)}return Xe(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||qp()}(void 0!==t),t}}]),n}(ZS),eT=function(){function e(t,n){Qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HS(t)}return Xe(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,$_(this._delegate,function(e,t,n){var r=t,i=X_("where",e);return new eS(i,r,n)}(t,n,r)))}catch(i){throw YS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,$_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=X_("orderBy",e);return new tS(n,t)}(t,n)))}catch(r){throw YS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,$_(this._delegate,function(e){return _I("limit",e),new nS("limit",e,"F")}(t)))}catch(n){throw YS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,$_(this._delegate,function(e){return _I("limitToLast",e),new nS("limitToLast",e,"L")}(t)))}catch(n){throw YS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,$_(this._delegate,iS.apply(void 0,arguments)))}catch(t){throw YS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,$_(this._delegate,aS.apply(void 0,arguments)))}catch(t){throw YS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,$_(this._delegate,uS.apply(void 0,arguments)))}catch(t){throw YS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,$_(this._delegate,sS.apply(void 0,arguments)))}catch(t){throw YS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return MI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?IS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=II(e,DI);var t=II(e.firestore,c_),n=l_(t),r=new xS(t);return a_(n,e._query,{source:"server"}).then((function(n){return new kS(t,r,e,n)}))}(this._delegate):function(e){e=II(e,DI);var t=II(e.firestore,c_),n=l_(t),r=new xS(t);return J_(e._query),a_(n,e._query).then((function(n){return new kS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new nT(n.firestore,new kS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XS(n),a=JS(n,(function(t){return new nT(e.firestore,new kS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return TS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),tT=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Xe(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $S(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),nT=function(){function e(t,n){Qe(this,e),this._firestore=t,this._delegate=n}return Xe(e,[{key:"query",get:function(){return new eT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $S(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new tT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $S(n._firestore,r))}))}},{key:"isEqual",value:function(e){return bS(this._delegate,e._delegate)}}]),e}(),rT=function(e){Ze(n,e);var t=rt(n);function n(e,r){var i;return Qe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Xe(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new QS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new QS(this.firestore,void 0===e?RI(this._delegate):RI(this._delegate,e))}catch(t){throw YS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=II(e.firestore,c_),r=RI(e),i=pS(e.converter,t);return AS(n,[A_(C_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new QS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return LI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(WS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(eT);function iT(e){return II(e,NI)}var aT=function(){function e(){Qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=st(k_,n)}return Xe(e,[{key:"isEqual",value:function(e){return(e=jt(e))instanceof k_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dv.keyField().canonicalString())}}]),e}(),oT=function(){function e(t){Qe(this,e),this._delegate=t}return Xe(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new O_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new N_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=LS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=MS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new L_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),uT={Firestore:qS,GeoPoint:b_,Timestamp:sv,Blob:VS,Transaction:KS,WriteBatch:GS,DocumentReference:QS,DocumentSnapshot:ZS,Query:eT,QueryDocumentSnapshot:$S,QuerySnapshot:nT,CollectionReference:rT,FieldPath:aT,FieldValue:oT,setLogLevel:function(e){!function(e){Fp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Vt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},uT)))}(e,(function(e,t){return new qS(e,t,new zS)})),e.registerVersion("@firebase/firestore-compat","0.1.26")}(lr);var sT=new Error("timeout while waiting for mutex to become available"),cT=(new Error("mutex already locked"),new Error("request for lock canceled")),lT=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))},fT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cT;if(Qe(this,e),this._maxConcurrency=t,this._cancelError=n,this._queue=[],this._waiters=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return Xe(e,[{key:"acquire",value:function(){var e=this,t=this.isLocked(),n=new Promise((function(t,n){return e._queue.push({resolve:t,reject:n})}));return t||this._dispatch(),n}},{key:"runExclusive",value:function(e){return lT(this,void 0,void 0,Ke().mark((function t(){var n,r,i,a;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.acquire();case 2:return n=t.sent,r=ut(n,2),i=r[0],a=r[1],t.prev=6,t.next=9,e(i);case 9:return t.abrupt("return",t.sent);case 10:return t.prev=10,a(),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[6,,10,13]])})))}},{key:"waitForUnlock",value:function(){return lT(this,void 0,void 0,Ke().mark((function e(){var t,n=this;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLocked()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return t=new Promise((function(e){return n._waiters.push({resolve:e})})),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"isLocked",value:function(){return this._value<=0}},{key:"release",value:function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}}},{key:"cancel",value:function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]}},{key:"_dispatch",value:function(){var e=this,t=this._queue.shift();if(t){var n=!1;this._currentReleaser=function(){n||(n=!0,e._value++,e._resolveWaiters(),e._dispatch())},t.resolve([this._value--,this._currentReleaser])}}},{key:"_resolveWaiters",value:function(){this._waiters.forEach((function(e){return e.resolve()})),this._waiters=[]}}]),e}(),hT=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))},dT=function(){function e(t){Qe(this,e),this._semaphore=new fT(1,t)}return Xe(e,[{key:"acquire",value:function(){return hT(this,void 0,void 0,Ke().mark((function e(){var t,n,r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._semaphore.acquire();case 2:return t=e.sent,n=ut(t,2),r=n[1],e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"runExclusive",value:function(e){return this._semaphore.runExclusive((function(){return e()}))}},{key:"isLocked",value:function(){return this._semaphore.isLocked()}},{key:"waitForUnlock",value:function(){return this._semaphore.waitForUnlock()}},{key:"release",value:function(){this._semaphore.release()}},{key:"cancel",value:function(){return this._semaphore.cancel()}}]),e}(),pT=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))};function vT(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sT;return{acquire:function(){return new Promise((function(i,a){return pT(n,void 0,void 0,Ke().mark((function n(){var o,u,s;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=!1,u=setTimeout((function(){o=!0,a(r)}),t),n.prev=2,n.next=5,e.acquire();case 5:s=n.sent,o?(Array.isArray(s)?s[1]:s)():(clearTimeout(u),i(s)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),o||(clearTimeout(u),a(n.t0));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))}))},runExclusive:function(e){return pT(this,void 0,void 0,Ke().mark((function t(){var n,r;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){},t.prev=1,t.next=4,this.acquire();case 4:if(r=t.sent,!Array.isArray(r)){t.next=12;break}return n=r[1],t.next=9,e(r[0]);case 9:case 15:return t.abrupt("return",t.sent);case 12:return n=r,t.next=15,e();case 16:return t.prev=16,n(),t.finish(16);case 19:case"end":return t.stop()}}),t,this,[[1,,16,19]])})))},release:function(){e.release()},cancel:function(){return e.cancel()},waitForUnlock:function(){return e.waitForUnlock()},isLocked:function(){return e.isLocked()}}}var yT=lr.initializeApp({apiKey:"AIzaSyB_vEdLMXk3Fh649VwaLvg7iWCbwx0Jx08",authDomain:"ajbpos.firebaseapp.com",projectId:"ajbpos",storageBucket:"ajbpos.appspot.com",messagingSenderId:"955048515609",appId:"1:955048515609:web:01ad37f2cdcbf4016f7288",measurementId:"G-F0RFSFCFP6"}),mT=function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o,u;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=bT.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(i=e.sent,"",i.exists){e.next=18;break}return a=t.displayName,o=t.email,u=new Date,e.prev=10,e.next=13,r.set(oe({displayName:a,email:o,printer:"",createAt:u},n));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("error creating user ",e.t0.message);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,n){return e.apply(this,arguments)}}(),gT=function(){var e=We(Ke().mark((function e(t,n){var r,i;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),i=bT.doc("printers/".concat(t,"/queue/").concat(r)),e.prev=2,e.next=5,i.set(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),kT=function(){var e=We(Ke().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vT(new dT,100),e.next=3,r.acquire();case 3:return i=e.sent,a=bT.collection("products").doc(t.toLowerCase()),e.prev=5,e.next=8,a.get();case 8:(o=e.sent).exists&&(u=o.data(),s=u.name,c=u.enable,l=u.stock,f=u.enablestop,h=u.stoplevel,d=u.price,p=u.sales,console.log("PRODUCT "+s+" QTY:"+n),v=l-n,y=p||0+n*d,console.log("PRODUCT "+s+" SALES:"+y),m=c,f&&l<=h&&(m=!1),a.set(oe(oe({},o.data()),{},{stock:v,enable:m,sales:y}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("ERROR",e.t0),e.t0===sT&&console.log("REVERSE OPERATION");case 16:return e.prev=16,i(),e.finish(16);case 19:return e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,null,[[5,12,16,19]])})));return function(t,n){return e.apply(this,arguments)}}(),wT=lr.auth(yT),bT=lr.firestore(),xT=new lr.auth.GoogleAuthProvider;xT.setCustomParameters({prompt:"select_account"});function ET(e,t){if(null==e)return{};var n,r,i=(0,s.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IT(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _T=n(441),ST=n(613),TT=n.n(ST);var CT=function(e){function t(e,r,s,c,h){for(var d,p,v,y,w,x=0,E=0,I=0,_=0,S=0,O=0,R=v=d=0,M=0,F=0,U=0,j=0,V=s.length,B=V-1,z="",q="",H="",K="";M<V;){if(p=s.charCodeAt(M),M===B&&0!==E+_+I+x&&(0!==E&&(p=47===E?10:47),_=I=x=0,V++,B++),0===E+_+I+x){if(M===B&&(0<F&&(z=z.replace(f,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=s.charAt(M)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,j=++M;M<V;){switch(p=s.charCodeAt(M)){case 123:v++;break;case 125:v--;break;case 47:switch(p=s.charCodeAt(M+1)){case 42:case 47:e:{for(R=M+1;R<B;++R)switch(s.charCodeAt(R)){case 47:if(42===p&&42===s.charCodeAt(R-1)&&M+2!==R){M=R+1;break e}break;case 10:if(47===p){M=R+1;break e}}M=R}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<B&&s.charCodeAt(M)!==p;);}if(0===v)break;M++}if(v=s.substring(j,M),0===d&&(d=(z=z.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<F&&(z=z.replace(f,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=D}if(j=(v=t(r,F,v,p,h+1)).length,0<P&&(w=u(3,v,F=n(D,z,U),r,C,T,j,p,h,c),z=F.join(""),void 0!==w&&0===(j=(v=w.trim()).length)&&(p=0,v="")),0<j)switch(p){case 115:z=z.replace(b,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(m,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===c&&(q+=v,v="")}else v=""}else v=t(r,n(r,z,U),v,c,h+1);H+=v,v=U=F=R=d=0,z="",p=s.charCodeAt(++M);break;case 125:case 59:if(1<(j=(z=(0<F?z.replace(f,""):z).trim()).length))switch(0===R&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(j=(z=z.replace(" ",":")).length),0<P&&void 0!==(w=u(1,z,r,e,C,T,q.length,c,h,c))&&0===(j=(z=w.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){K+=z+s.charAt(M);break}default:58!==z.charCodeAt(j-1)&&(q+=i(z,d,p,z.charCodeAt(2)))}U=F=R=d=0,z="",p=s.charCodeAt(++M)}}switch(p){case 13:case 10:47===E?E=0:0===1+d&&107!==c&&0<z.length&&(F=1,z+="\0"),0<P*L&&u(0,z,r,e,C,T,q.length,c,h,c),T=1,C++;break;case 59:case 125:if(0===E+_+I+x){T++;break}default:switch(T++,y=s.charAt(M),p){case 9:case 32:if(0===_+x+E)switch(S){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===_+E+x&&(F=U=1,y="\f"+y);break;case 108:if(0===_+E+x+A&&0<R)switch(M-R){case 2:112===S&&58===s.charCodeAt(M-3)&&(A=S);case 8:111===O&&(A=O)}break;case 58:0===_+E+x&&(R=M);break;case 44:0===E+I+_+x&&(F=1,y+="\r");break;case 34:case 39:0===E&&(_=_===p?0:0===_?p:_);break;case 91:0===_+E+I&&x++;break;case 93:0===_+E+I&&x--;break;case 41:0===_+E+x&&I--;break;case 40:if(0===_+E+x){if(0===d)if(2*S+3*O===533);else d=1;I++}break;case 64:0===E+I+_+x+R+v&&(v=1);break;case 42:case 47:if(!(0<_+x+I))switch(E){case 0:switch(2*p+3*s.charCodeAt(M+1)){case 235:E=47;break;case 220:j=M,E=42}break;case 42:47===p&&42===S&&j+2!==M&&(33===s.charCodeAt(j+2)&&(q+=s.substring(j,M+1)),y="",E=0)}}0===E&&(z+=y)}O=S,S=p,M++}if(0<(j=q.length)){if(F=r,0<P&&(void 0!==(w=u(2,q,F,e,C,T,j,c,h,c))&&0===(q=w).length))return K+q+H;if(q=F.join(",")+"{"+q+"}",0!==N*A){switch(2!==N||a(q,2)||(A=0),A){case 111:q=q.replace(k,":-moz-$1")+q;break;case 112:q=q.replace(g,"::-webkit-input-$1")+q.replace(g,"::-moz-$1")+q.replace(g,":-ms-input-$1")+q}A=0}}return K+q+H}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var u=0;for(e=0===o?"":e[0]+" ";u<a;++u)t[u]=r(e,t[u],n).trim();break;default:var s=u=0;for(t=[];u<a;++u)for(var c=0;c<o;++c)t[s++]=r(e[c]+" ",i[u],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",u=2*t+3*n+4*r;if(944===u){e=o.indexOf(":",9)+1;var s=o.substring(e,o.length-1).trim();return s=o.substring(0,e).trim()+s+";",1===N||2===N&&a(s,1)?"-webkit-"+s+s:s}if(0===N||2===N&&!a(o,1))return o;switch(u){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(S,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(s=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+s+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(s=o.substring(13).trim()).indexOf("-")+1,s.charCodeAt(0)+s.charCodeAt(t)){case 226:s=o.replace(w,"tb");break;case 232:s=o.replace(w,"tb-rl");break;case 220:s=o.replace(w,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+s+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,u=(s=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|s.charCodeAt(7))){case 203:if(111>s.charCodeAt(8))break;case 115:o=o.replace(s,"-webkit-"+s)+";"+o;break;case 207:case 102:o=o.replace(s,"-webkit-"+(102<u?"inline-":"")+"box")+";"+o.replace(s,"-webkit-"+s)+";"+o.replace(s,"-ms-"+s+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return s=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+s+"-ms-flex-"+s+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(E,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(E,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===_.test(e))return 115===(s=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(s,"-webkit-"+s)+o.replace(s,"-moz-"+s.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),R(2!==t?r:r.replace(I,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(x," or ($1)").substring(4):"("+t+")"}function u(e,t,n,r,i,a,o,u,s,l){for(var f,h=0,d=t;h<P;++h)switch(f=O[h].call(c,e,d,n,r,i,a,o,u,s,l)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!==typeof e?N=1:(N=2,R=e):N=0),s}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var i=u(-1,n,r,r,C,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(D,r,n,0,0);return 0<P&&(void 0!==(i=u(-2,a,r,r,C,T,a.length,0,0,0))&&(a=i)),"",A=0,T=C=1,a}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,E=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,_=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,T=1,C=1,A=0,N=1,D=[],O=[],P=0,R=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:P=O.length=0;break;default:if("function"===typeof t)O[P++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=s,void 0!==e&&s(e),c},AT={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var NT=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},DT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,OT=NT((function(e){return DT.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function PT(){return(PT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var RT=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},LT=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,_T.typeOf)(e)},MT=Object.freeze([]),FT=Object.freeze({});function UT(e){return"function"==typeof e}function jT(e){return e.displayName||e.name||"Component"}function VT(e){return e&&"string"==typeof e.styledComponentId}var BT="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",zT="undefined"!=typeof window&&"HTMLElement"in window,qT=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function HT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var KT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&HT(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),u=0,s=t.length;u<s;u++)this.tag.insertRule(o,t[u])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),GT=new Map,WT=new Map,QT=1,YT=function(e){if(GT.has(e))return GT.get(e);for(;WT.has(QT);)QT++;var t=QT++;return GT.set(e,t),WT.set(t,e),t},XT=function(e){return WT.get(e)},JT=function(e,t){t>=QT&&(QT=t+1),GT.set(e,t),WT.set(t,e)},ZT="style["+BT+'][data-styled-version="5.3.6"]',$T=new RegExp("^"+BT+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),eC=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},tC=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var u=o.match($T);if(u){var s=0|parseInt(u[1],10),c=u[2];0!==s&&(JT(c,s),eC(e,c,u[3]),e.getTag().insertRules(s,r)),r.length=0}else r.push(o)}}},nC=function(){return n.nc},rC=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(BT))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(BT,"active"),r.setAttribute("data-styled-version","5.3.6");var o=nC();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},iC=function(){function e(e){var t=this.element=rC(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}HT(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),aC=function(){function e(e){var t=this.element=rC(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),oC=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),uC=zT,sC={isServer:!zT,useCSSOMInjection:!qT},cC=function(){function e(e,t,n){void 0===e&&(e=FT),void 0===t&&(t={}),this.options=PT({},sC,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&zT&&uC&&(uC=!1,function(e){for(var t=document.querySelectorAll(ZT),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(BT)&&(tC(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return YT(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(PT({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new oC(i):r?new iC(i):new aC(i),new KT(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(YT(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(YT(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(YT(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=XT(i);if(void 0!==a){var o=e.names.get(a),u=t.getGroup(i);if(o&&u&&o.size){var s=BT+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+u+s+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),lC=/(a)(d)/gi,fC=function(e){return String.fromCharCode(e+(e>25?39:97))};function hC(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=fC(t%52)+n;return(fC(t%52)+n).replace(lC,"$1-$2")}var dC=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},pC=function(e){return dC(5381,e)};function vC(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(UT(n)&&!VT(n))return!1}return!0}var yC=pC("5.3.6"),mC=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&vC(e),this.componentId=t,this.baseHash=dC(yC,t),this.baseStyle=n,cC.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=LC(this.rules,e,t,n).join(""),o=hC(dC(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var u=n(a,"."+o,void 0,r);t.insertRules(r,o,u)}i.push(o),this.staticRulesId=o}else{for(var s=this.rules.length,c=dC(this.baseHash,n.hash),l="",f=0;f<s;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var d=LC(h,e,t,n),p=Array.isArray(d)?d.join(""):d;c=dC(c,p+f),l+=p}}if(l){var v=hC(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),gC=/^\s*\/\/.*$/gm,kC=[":","[",".","#"];function wC(e){var t,n,r,i,a=void 0===e?FT:e,o=a.options,u=void 0===o?FT:o,s=a.plugins,c=void 0===s?MT:s,l=new CT(u),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,u,s,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==kC.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,u){void 0===u&&(u="&");var s=e.replace(gC,""),c=a&&o?o+" "+a+" { "+s+" }":s;return t=u,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||HT(15),dC(e,t.name)}),5381).toString():"",p}var bC=t.createContext(),xC=(bC.Consumer,t.createContext()),EC=(xC.Consumer,new cC),IC=wC();function _C(){return(0,t.useContext)(bC)||EC}function SC(){return(0,t.useContext)(xC)||IC}function TC(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],a=_C(),o=(0,t.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,t.useMemo)((function(){return wC({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){TT()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(bC.Provider,{value:o},t.createElement(xC.Provider,{value:u},e.children))}var CC=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=IC);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return HT(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=IC),this.name+e.hash},e}(),AC=/([A-Z])/,NC=/([A-Z])/g,DC=/^ms-/,OC=function(e){return"-"+e.toLowerCase()};function PC(e){return AC.test(e)?e.replace(NC,OC).replace(DC,"-ms-"):e}var RC=function(e){return null==e||!1===e||""===e};function LC(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,u=e.length;o<u;o+=1)""!==(i=LC(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return RC(e)?"":VT(e)?"."+e.styledComponentId:UT(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:LC(e(t),t,n,r):e instanceof CC?n?(e.inject(n,r),e.getName(r)):e:LT(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!RC(t[o])&&(Array.isArray(t[o])&&t[o].isCss||UT(t[o])?a.push(PC(o)+":",t[o],";"):LT(t[o])?a.push.apply(a,e(t[o],o)):a.push(PC(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in AT?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var s}var MC=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function FC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return UT(e)||LT(e)?MC(LC(RT(MT,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:MC(LC(RT(e,n)))}new Set;var UC=function(e,t,n){return void 0===n&&(n=FT),e.theme!==n.theme&&e.theme||t||n.theme},jC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,VC=/(^-|-$)/g;function BC(e){return e.replace(jC,"-").replace(VC,"")}var zC=function(e){return hC(pC(e)>>>0)};function qC(e){return"string"==typeof e&&!0}var HC=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},KC=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function GC(e,t,n){var r=e[n];HC(t)&&HC(r)?WC(r,t):e[n]=t}function WC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(HC(o))for(var u in o)KC(u)&&GC(e,o[u],u)}return e}var QC=t.createContext();QC.Consumer;var YC={};function XC(e,n,r){var i=VT(e),a=!qC(e),o=n.attrs,u=void 0===o?MT:o,s=n.componentId,c=void 0===s?function(e,t){var n="string"!=typeof e?"sc":BC(e);YC[n]=(YC[n]||0)+1;var r=n+"-"+zC("5.3.6"+n+YC[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):s,l=n.displayName,f=void 0===l?function(e){return qC(e)?"styled."+e:"Styled("+jT(e)+")"}(e):l,h=n.displayName&&n.componentId?BC(n.displayName)+"-"+n.componentId:n.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,u).filter(Boolean):u,p=n.shouldForwardProp;i&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var v,y=new mC(r,h,i?e.componentStyle:void 0),m=y.isStatic&&0===u.length,g=function(e,n){return function(e,n,r,i){var a=e.attrs,o=e.componentStyle,u=e.defaultProps,s=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=FT);var r=PT({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in UT(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(UC(n,(0,t.useContext)(QC),u)||FT,n,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=_C(),a=SC();return t?e.generateAndInjectStyles(FT,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),y=r,m=p.$as||n.$as||p.as||n.as||f,g=qC(m),k=p!==n?PT({},n,{},p):n,w={};for(var b in k)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?w.as=k[b]:(c?c(b,OT,m):!g||OT(b))&&(w[b]=k[b]));return n.style&&p.style!==n.style&&(w.style=PT({},n.style,{},p.style)),w.className=Array.prototype.concat(s,l,v!==l?v:null,n.className,p.className).filter(Boolean).join(" "),w.ref=y,(0,t.createElement)(m,w)}(v,e,n,m)};return g.displayName=f,(v=t.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):MT,v.styledComponentId=h,v.target=i?e.target:e,v.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),a=t&&t+"-"+(qC(e)?e:BC(jT(e)));return XC(e,PT({},i,{attrs:d,componentId:a}),r)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?WC({},e.defaultProps,t):t}}),v.toString=function(){return"."+v.styledComponentId},a&&T()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var JC=function(e){return function e(t,n,r){if(void 0===r&&(r=FT),!(0,_T.isValidElementType)(n))return HT(1,String(n));var i=function(){return t(n,r,FC.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,PT({},r,{},i))},i.attrs=function(i){return e(t,n,PT({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(XC,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){JC[e]=JC(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=vC(e),cC.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(LC(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&cC.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=nC();return"<style "+[n&&'nonce="'+n+'"',BT+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?HT(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return HT(2);var r=((n={})[BT]="",n["data-styled-version"]="5.3.6",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=nC();return i&&(r.nonce=i),[t.createElement("style",PT({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new cC({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?HT(2):t.createElement(TC,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return HT(3)}}();var ZC,$C,eA=JC,tA=eA.div(ZC||(ZC=IT(["\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),nA=eA.div($C||($C=IT(["\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: #636767;\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n"]))),rA=n(184),iA=["isLoading"],aA=function(e){return function(t){var n=t.isLoading,r=ET(t,iA);return n?(0,rA.jsx)(tA,{children:(0,rA.jsx)(nA,{})}):(0,rA.jsx)(e,oe({},r))}},oA="NOT_FOUND";var uA=function(e,t){return e===t};function sA(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?uA:r,a=n.maxSize,o=void 0===a?1:a,u=n.resultEqualityCheck,s=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===o?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:oA},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(s):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return oA}return{get:r,put:function(t,i){r(t)===oA&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(o,s);function l(){var t=c.get(arguments);if(t===oA){if(t=e.apply(null,arguments),u){var n=c.getEntries(),r=n.find((function(e){return u(e.value,t)}));r&&(t=r.value)}c.put(arguments,t)}return t}return l.clearCache=function(){return c.clear()},l}function cA(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function lA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,u={memoizeOptions:void 0},s=r.pop();if("object"===typeof s&&(u=s,s=r.pop()),"function"!==typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var c=u,l=c.memoizeOptions,f=void 0===l?n:l,h=Array.isArray(f)?f:[f],d=cA(r),p=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(h)),v=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return a=p.apply(null,e)}));return Object.assign(v,{resultFunc:s,memoizedResultFunc:p,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),v};return i}var fA,hA,dA,pA,vA,yA,mA,gA,kA,wA,bA,xA,EA,IA,_A,SA,TA,CA,AA,NA,DA,OA,PA,RA,LA,MA,FA,UA,jA,VA,BA,zA,qA,HA,KA,GA,WA,QA,YA,XA,JA,ZA,$A,eN,tN,nN,rN,iN,aN,oN,uN,sN,cN,lN,fN,hN=lA(sA),dN=function(e,t){if(void 0===t&&(t=hN),"object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r},pN=function(){return{type:_e}},vN=eA.div(fA||(fA=IT(["\n    width: auto;\n    height: 35px;\n    display: flex;\n    justify-content: space-between;\n    cursor: pointer;\n    align-items:center;\n"]))),yN=eA.div(hA||(hA=IT(["\n    text-transform: uppercase;\n    width: 5%;\n    text-align: center;\n"]))),mN=eA.span(dA||(dA=IT(["\n    text-transform: uppercase;\n    width: 40%;\n    padding: 0px 5px;\n"]))),gN=eA.span(pA||(pA=IT(["\n    text-transform: uppercase;\n    width: 40%;\n    background-color: yellow;\n    padding: 0px 5px;\n    font-weight: bold;\n    "]))),kN=eA.span(vA||(vA=IT(["\n    text-transform: uppercase;\n    width: 40%;\n    background-color: cyan;\n    padding: 0px 5px;\n    font-weight: bold;\n    "]))),wN=eA.span(yA||(yA=IT(["\n    text-transform: uppercase;\n    width: 40%;\n    background-color: #ff8855;\n    padding: 0px 5px;\n    font-weight: bold;\n"]))),bN=eA.span(mA||(mA=IT(["\n    text-transform: uppercase;\n    width: 15%;\n    padding: 0 25px;\n    text-align: right;\n"]))),xN=eA.span(gA||(gA=IT(["\n    text-transform: uppercase;\n    text-align: center;\n    width: 20%;\n"]))),EN=function(e){return e.cart},IN=hN([EN],(function(e){return e.cartItems})),_N=(hN([EN],(function(e){return e.hidden})),hN([IN],(function(e){return e.reduce((function(e,t){return e+t.quantity}),0)})),hN([IN],(function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0)}))),SN=(hN([IN],(function(e,t){return e.filter((function(e){return e.id===t}))})),hN([function(e){return e.category}],(function(e){return e.categories}))),TN=hN([SN],(function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]})),CN=ne(dN({cartItems:IN,categories:SN,categoriesMap:TN}),(function(e){return{addItem:function(t){return e(function(e){return{type:xe,payload:e}}(t))},removeItem:function(t){return e(function(e){return{type:Ee,payload:e}}(t))},clearItem:function(t){return e(function(e){return{type:Ie,payload:e}}(t))}}}))((function(e){var t=e.item,n=e.addItem,r=e.clearItem,i=e.cartItems,a=e.categoriesMap,o=t.name,u=t.price,s=function(e,t){return e.find((function(e){return e.id===t}))}(i,t.id),c=s?s.quantity:0,l=function(e,t){return e.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))}(a,t.category).color.toLowerCase();return(0,rA.jsxs)(vN,{children:["yellow"===l?(0,rA.jsx)(gN,{onClick:function(){return n(t)},children:o}):"cyan"===l?(0,rA.jsx)(kN,{onClick:function(){return n(t)},children:o}):"pink"===l?(0,rA.jsx)(wN,{onClick:function(){return n(t)},children:o}):(0,rA.jsx)(mN,{onClick:function(){return n(t)},children:o}),(0,rA.jsxs)(bN,{onClick:function(){return n(t)},children:["$",u]}),(0,rA.jsx)(xN,{children:c}),(0,rA.jsxs)(bN,{children:["$",u*c]}),(0,rA.jsx)(yN,{onClick:function(){return r(t)},children:"\u2715"})]})})),AN=hN([function(e){return e.shop}],(function(e){return e.products})),NN=hN([AN],(function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]})),DN=hN([NN],(function(e){return e?e.sort((function(e,t){return e.category.toLowerCase()>t.category.toLowerCase()?-1:1})):null})),ON=eA.div(kA||(kA=IT(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n"]))),PN=eA.div(wA||(wA=IT(["\n    width: auto;\n    padding: 10px 0;\n    display: flex;\n    justify-conent: space-between;\n    border-bottom: 1px solid darkgrey;\n"]))),RN=(eA.div(bA||(bA=IT(["\n    text-transform: capitalize;\n    width: 23%;\n\n    &:last-child {\n        width: 8%\n    }\n"]))),eA.span(xA||(xA=IT(["\n    text-transform: capitalize;\n    width: 40%;\n    text-align: center;\n"])))),LN=eA.span(EA||(EA=IT(["\n    text-transform: capitalize;\n    width: 15%;\n    text-align: center;\n"]))),MN=eA.span(IA||(IA=IT(["\n    text-transform: capitalize;\n    text-align: center;\n    width: 20%;\n"]))),FN=eA.span(_A||(_A=IT(["\n    text-transform: capitalize;\n    width: 10%;\n    text-align: center;\n"]))),UN=ne(dN({collections:DN}))((function(e){var t=e.collections;return(0,rA.jsxs)(ON,{children:[(0,rA.jsxs)(PN,{children:[(0,rA.jsx)(RN,{children:"Descripci\xf3n"}),(0,rA.jsx)(LN,{children:"Precio"}),(0,rA.jsx)(MN,{children:"Cant."}),(0,rA.jsx)(LN,{children:"S.Total"}),(0,rA.jsx)(FN,{children:"Borrar"})]}),null!==t?t.map((function(e){return e.enable?(0,rA.jsx)(CN,{item:e},e.id):null})):null]})})),jN=FC(SA||(SA=IT(["\n  background-color: black;\n  color: white;\n  border: none;\n  &:hover {\n    background-color: white;\n    color: black;\n    border: 1px solid black;\n  }\n"]))),VN=FC(TA||(TA=IT(["\n  background-color: white;\n  color: black;\n  border: 1px solid black;\n  &:hover {\n    background-color: black;\n    color: white;\n    border: none;\n  }\n"]))),BN=FC(CA||(CA=IT(["\n  background-color: #4285f4;\n  color: white;\n  &:hover {\n    background-color: #357ae8;\n    border: none;\n  }\n"]))),zN=eA.button(AA||(AA=IT(["\n  min-width: 145px;\n  width: auto;\n  height: 50px;\n  letter-spacing: 0.5px;\n  line-height: 50px;\n  padding: 0 35px 0 35px;\n  font-size: 15px;\n  text-transform: uppercase;\n  font-family: 'Open Sans Condensed';\n  font-weight: bolder;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  ","\n"])),(function(e){return e.isGoogleSignIn?BN:e.inverted?VN:jN})),qN=["children"],HN=function(e){var t=e.children,n=ET(e,qN);return(0,rA.jsx)(zN,oe(oe({},n),{},{children:t}))},KN=eA.div(NA||(NA=IT(["\n    display: flex;\n    justify-content: space-between;\n"]))),GN=eA.span(DA||(DA=IT(["\n    width: 20%\n"]))),WN=eA.span(OA||(OA=IT(["\n    width: 60%\n"]))),QN=eA.span(PA||(PA=IT(["\n    width: 20%\n    align:right;\n    padding-right:20px;\n"]))),YN=function(e){var t=e.item;return(0,rA.jsxs)(KN,{children:[(0,rA.jsx)(GN,{children:t.quantity}),(0,rA.jsx)(WN,{children:t.name}),(0,rA.jsxs)(QN,{children:["$",t.price*t.quantity]})]})},XN=eA.div(RA||(RA=IT(["\n    width:300px;\n    display: flex;\n    flex-direction: column;\n    min-height: 10vh;\n    border: 1px solid darkgrey;\n    padding: 5px\n"]))),JN=eA.div(LA||(LA=IT(["\n    with:100%;\n    border-bottom: 1px solid darkgrey;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    text-transform: capitalize;\n    font-weight: bold;\n"]))),ZN=eA.span(MA||(MA=IT(["\n    width: 20%\n"]))),$N=eA.span(FA||(FA=IT(["\n    width: 60%\n"]))),eD=eA.span(UA||(UA=IT(["\n    width: 20%\n"]))),tD=eA.div(jA||(jA=IT(["\n  margin-top: 30px;\n  margin-left: auto;\n  font-size: 36px;\n"]))),nD=ne(dN({cartItems:IN,total:_N}))((function(e){var t=e.cartItems,n=e.total;return(0,rA.jsxs)(XN,{children:[(0,rA.jsxs)(JN,{children:[(0,rA.jsx)(ZN,{children:"CANT."}),(0,rA.jsx)($N,{children:"DESCRIPCION"}),(0,rA.jsx)(eD,{children:"S.TOTAL"})]}),t?t.map((function(e){return(0,rA.jsx)(YN,{item:e},e.id)})):null,(0,rA.jsxs)(tD,{children:["TOTAL: $",n]})]})})),rD=function(e,t,n){var r=new Date,i=[];return t.map((function(e){return i.push({description:e.name,price:e.price,subtotal:e.price*e.quantity,quantity:e.quantity,category:e.category})})),{user:{email:e.email,displayName:e.displayName},total:n,items:i,printAt:r}},iD=hN([function(e){return e.user}],(function(e){return e.currentUser})),aD=eA.div(VA||(VA=IT(["\n    width: auto;\n    min-height: 10vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 50px auto 0;\n    padding: 5px 10px;\n    "]))),oD=eA.h2(BA||(BA=IT(["\n\n"]))),uD=eA.div(zA||(zA=IT(["\n    display: flex;\n    flex-direction: row;\n    padding: 5px;\n"]))),sD=dN({currentUser:iD,cartItems:IN,total:_N}),cD=(0,i.withRouter)(ne(sD,(function(e){return{clearAllItems:function(){return e(pN())}}}))((function(e){var n=e.cartItems,r=e.total,i=e.history,a=e.clearAllItems,o=e.currentUser,u=ut((0,t.useState)(!1),2),s=u[0],c=u[1];console.log("__CHECKOUT!");var l=function(){n.map((function(e){return console.log("ITEM: "+e.name.toUpperCase()+" Quantity: "+e.quantity),kT(e.name.toLowerCase(),e.quantity)}))},f=function(){var e=We(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gT(o.printer,rD(o,n,r));case 2:h();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){a(),i.push("/")};return(0,rA.jsxs)(aD,{children:[(0,rA.jsx)(oD,{children:"TICKET"}),(0,rA.jsx)(nD,{}),(0,rA.jsxs)(uD,{children:[(0,rA.jsx)(HN,{onClick:function(){s||(c(!0),l(),f())},children:"IMPRIMIR"}),(0,rA.jsx)(HN,{isGoogleSignIn:!0,onClick:function(){return a()},children:"CANCELAR"})]})]})}))),lD=eA.div(qA||(qA=IT(["\n    width:100%\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 5px 20px;\n"]))),fD=aA(UN),hD=aA(cD),dD=function(e){Ze(n,e);var t=rt(n);function n(){var e;Qe(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,collectionsUpdated:!1,categoriesUpdated:!1},e.unsubscribeFromSnapshot=null,e}return Xe(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.updateCollections,r=t.updateCategories,i=bT.collection("products"),a=bT.collection("categories");i.onSnapshot(function(){var t=We(Ke().mark((function t(r){var i;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("DB Change detected!"),t.next=3,r.docs.map((function(e){var t=e.data(),n=t.name,r=t.category,i=t.price,a=t.enable,o=t.stock,u=t.warninglevel,s=t.stoplevel,c=t.enablestop,l=t.sales;return{id:e.id,name:n,price:i,category:r,enable:a,stock:o,warninglevel:u,stoplevel:s,enablestop:c,sales:l}})).reduce((function(e,t){return e[t.name.toLowerCase()]=t,e}),{});case 3:i=t.sent,n(i),e.setState(oe(oe({},e.state),{},{collectionsUpdated:!0})),e.state.categoriesUpdated&&e.setState(oe(oe({},e.state),{},{loading:!1}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.get().then((function(t){var n=t.docs.map((function(e){var t=e.data(),n=t.order,r=t.name,i=t.color;return{id:e.id,order:n,name:r,color:i}})).reduce((function(e,t){return e[t.name.toLowerCase()]=t,e}),{});r(n),e.setState(oe(oe({},e.state),{},{categoriesUpdated:!1})),e.state.collectionsUpdated&&e.setState(oe(oe({},e.state),{},{loading:!1}))}))}},{key:"render",value:function(){var e=this.state.loading,t=this.props.total;return(0,rA.jsxs)(lD,{children:[(0,rA.jsx)(fD,{isLoading:e}),t>0?(0,rA.jsx)(hD,{isLoading:e}):null]})}}]),n}(t.Component),pD=ne(dN({total:_N}),(function(e){return{updateCollections:function(t){return e({type:ke.UPDATE_PRODUCTS,payload:t})},updateCategories:function(t){return e(function(e){return{type:Re.UPDATE_CATEGORIES,payload:e}}(t))}}}))(dD),vD=eA.div(HA||(HA=IT(["\n    height: 70px;\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 5px;\n"]))),yD=eA(y)(KA||(KA=IT(["\n    height: 100%;\n    width:75px;\n    padding: 5px;\n"]))),mD=eA.img(GA||(GA=IT(["\n    width:60px;\n"]))),gD=eA.div(WA||(WA=IT(["\n    width: 85%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n"]))),kD=eA(y)(QA||(QA=IT(["\n    padding: 10px 15px;\n    cursor: pointer;\n"]))),wD=ne(dN({currentUser:iD}))((function(e){var t=e.currentUser;return(0,rA.jsxs)(vD,{children:[(0,rA.jsx)(yD,{to:"/",children:(0,rA.jsx)(mD,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAGTRJREFUeJztnXmcFNW1x7/VMwzDJgwgqLgAAwpGZHFnkajBZ5QkbkmMmpcXE42Jic+Yxe3FZ2LeBxONieZpjMaNBBdE4/JeRJQoIKKiAhJkXxz2GbaRWbp6qfP+uFVUdfVWW0/3xPf7fPrT3VV1l7q/urfOPfecczU6PaQXMByoB4a5vuuAHkUy2A9sB5qATcA6YC3wD+Aj0JIlqXYHQSt3BfxDDgYmAaebn+OBqgIJ4sBeoN1xrBroBdRQ+AHQgeXAG8BrwHzQ2gtcX3HoJATLScDXgH8BRpJZ7zZgFarnrTc/1u9doMWL5N0DGAgcAgxB9f6jgdHACDIfnjiwEHgVeBm0D8Pd16cacjTIbSBrQMTxaQb5G8iNIONBakpYh+4gE0F+DrIQJOmqyxKQa0H6la4O/1SQapDLQd51NWQDyK9ATgQpNByXun69Qc4HuQ9ku6N+OsgzIOeCxMpXv4qFdAX5V1dv3QsyHeQL5SU1H6QK5HMgM0ESjnp/ZN5LBda5wyG9QW4FaXI00IdmLy7h0Bs1ZCDIj0DWuoi+9FNKtGgg3wTZ4WiQ+SDnqXOdFVJt9t7VjvtaCfKlctesAyEngixyNMBckNPKXatoIVXmKLTKcZ/PgxxR7pqVEFIH8iBI2iE4fbnctSotpArkSpA95j3vB7nun3DYlgkgm8ybbAf5pZqCfFogA0FmOHrz+yCfKXetIoBUgfzMMX9cAFJf7lqVD3I2yDqzLVrUMN5pIYeDvGHeTAqlLKgud63KD+kG8pCjN/9BTRM7FeQUkEbzBjaDnF7uGim0DCx3DWzIN0BazTZaDDK43DXyCJnqqPhLIH3LXSMb7U/B/oPLXQsbcrxjStUIckK5a1QEcqXjfXt/ZUmLUgd6C+g3lLsmmZCDQF7A1rNPLneN8kB+blbSALm53LXJRvw+SCdBX1t5ErxUgzxmtl8byBfKXSMX5L/MyiWUJqfSkDgBkubiQDoB+uPlrlE2RAP5raMdLyt3jUzIj7FXVM4td22y0TYI9A0OqVUguQfi/17umuWG3GrWMw1yYbkr821zSE5VplZK+oL+ERiSSbAIJHeCflG5a5gb8hOHUmhiuSpxgSlQGUq4qjTonwF9NRjpbHIPkNwE+s/KXdPckLvNeu4DGdXRhZ9iDsmihuhKg34x6FvyE+v8pPaB/gwVtzwpMdRas4BsBDm0owruD/KxWfBvOqhQj5A60J9XPdMLudYnrYO+CtrLNRzmgdSCzDPr+W4HPIQSA5ltFjiPilE9Sg3ot4G+qfCQXOyTbAT9FWgfUu47siF12JYud5W6sNvMgnaAHFbiwjxA6kC/A/T1kI4HJ9b5MQSSWxXRiXHlvkMFGQcSN+WdqaUq5HOm6G5AaoYaPsoB6QLxL0Li76A3QDoVDbE5iW4CfTnot8D+AeW5X4D2syC5y6zbTpBDIi5AupsveoH0ZtVb9A2gPwz6sREXlgPxYRC/BuLzVbmp/aUhNe87OgXJLaB/CInfQdtppX8fSh91z/oyRW6yCWX9IiBz8Gi96dH+SX4N/ARYDIkuUDPGPA6kG8HYh3LzeA5kCdSsDubyIV0gMRwYBdp4lMH7AIj1hFh/iFWAbltQ95v+BOUxsRLkLTDeg24rQdsXLN/Ww6DqOIidDXImxA6G2ACImQ9SugnkS1A9CzgMuAK0R4vl6oFgGQW8b157MiQeh5oc8zLBHML3QLodaEG5iySAPSjfn0bQqlGG4l2AfkBvoBblQlILsa4Q66uu6wz2d2J99oG0gqGjvC3aQGtR7UEraHtQeoOeoA0ArR/Kq6IGOAhitaDVQaxb7vtO7wZjCnQZCswCGoFjgj9QqvIxlEW/gNypjunLgr/T3J+OHGbL9cl130HuPdUE+vEmL9ZM5rchyAWQq8yMNplPG6B/UP5G+zR+ktuVLAIgx6IWJJIgxxVisMA8VroClhrvWtBazd/pMI9MEHz+87BwIXzyib90p54K11/v7dq1a+GWW9Tv+nr46U+9pUsmYfdu2LED5s+Hjz5SdJQABqTb1E/tI5DfA9cD9wJnBshPvmc+Pe9kHtcXle4pzf1Zs0bk7LP9p/vyl8UzFi2y040f7z2dG8uXq3JL0IO3gPRx8HMQtuPAWX7J7YJt5npe5rnEqx1Jbs+eIum0yE03+U87erTIU0+JtLYWJuWdd0R+/GM7XdeuIiNHilx9tUhjYzCiH35YpEuXKNtCbyBLc3hgqXaOX4KvNhO+T5Yrif5oRwpIEyeqBps1K3ge9fUiO3bkJuKWWwqnPeus7DS6LvL88yIzZ4rMmSPS0JA778cfj5TgNTl46oVtVO/Vnku6YC8mfDH7vP6fkO4wgn/wA9VYGzeGy+eGG7IJ2LJFpLq6cDpNy344pk/PvmbKFJG1a7PLuPzyyAhenoevX5rXPO2V4AvNBEvJ6QimXwZpo6MIfuQRu7H69w+ez7hx2Y0/Y4a3tHPnZqb7xS9yX9e/v8iKFdkPUW1tJAQvzsPXAJQdVwpkuPtsLnXXN83vh0CT7NPGVpDW7OOlwTiHun/s2OD5rFqVfWztWm9pGxsz/+/Lo1rYtQsuvxzSjnnGoEFwySXeyikMrTnP8UbgUVSoie+5z7oIloHAOahYFE/kzjC2Qz0xpUdNDYwcaf8/IYTVcFsb7NmTeWzbNm9pW12Ps+R47C0sWQKPPZZ57PLQDioCyJYCFzxofl+Cy1TZ3YP/DTU3/itoe3PnVbMZpX4sOY47TpFsIQzBkD2Pbmnxlq7N5+P86KOZ/ydNgu6hDHUFYHX+89oyVNinQ4AznGfcBH/DqmOBzFrB6JAe7B6Sx4VcnY3HC//PB78EL1qUOTrU1MBJJ/nLIxPSDvJekYueMr+/5jzoIFjGoUIUNQBzi2TWIe9gN8FDhkDfEI4wQQlO+ByvDAPefjvz2GdCOYvKPpAc06QMPInq6hfiWKt39uCzze8XQTOKZLbFHDZKCneP1bRwgla7K4SZrgfPqxhWrsz8P3hwmNyMBNRuLnyNtgFYBPQBPm8ddRI8xfx+1UOJS0pNcCwGo0ZBKpV5PMx7OGgPDoLVrjdm796hstvvodMBPGd+W1xaBEt3YAKQQoXtKwJZDFLC5oGjj4aePWH27MzjYQh2PyzpEi6buKdS4QgWr2u+88zvA+66MceBrsDboHlZs1kNkmdeFg2sofiZZ2D/fvt4WEm6o+CsM4QhWECFavSCJUAzcKxSgNgE+xmega4bTcuFksEi+IMP4ENHRMihQ8MJWh0F9xSsW7egOYmAvOvtWi0NvIUyCZkINsETzO/XPWaUAnyuzvrDuHFKCFq9WikPDpSswZgxpSw5GnTpkvnf71TLhuyC2NvFrzuA+eb3ZIAYagnqeMBAdXGv2FRKQWv0aFi+XC2oL3HVqjMM0z17Zv53a8O8I90GNSuLX3cAFsETQPXgEUA3YI0yEvMKeaWw0i44jjwS+ve3if1nIDif/toD9pgjpldYL7RjQBFsaXvzLEflgzYfZLe/NN5gzX+XLlXfK1ZkKhs6A8FHHZX5f/36ILkUU1HmgtYC7AR6ggyMocLhgwpj7wM1KyDto8d7hyVgWT03kVC2Thbq66FPn+x0lYTjXKZwGzYEyUXSoL0SIKH1ONXHUHsbOA96hJamRILW2LFK3bfcMaZ0NkHLrYVzqy69wdgFxlsBEq4zv4fFgMPNPx8HyGhVKQStsWPVWq1zqtGZ3sPDh2c+gKtWQUNDkJyMNui6rvh1WbA667AYYDlVNea5uFAFZqthJDr06weHH55NaGci+Mor1Shj4cknA2e126OK0g3rhTA4hlpDBNjhPx/tLTAiFbQs4iwBy8LSpWrYdl9XaRg3Dq67zv7f1gb33x8kJwG1xhsEu8zvvjGUbxBAAEG+6xowIhW0LAHLTXBLS6YkOnx4aAV+5BgzBp59NlPJcfPNypTHP4w48FLAqljGGnXVKMevVDBvQE1A3wEMDViRLOQjGNQwPdyU+S1Ba9687OtKjalTYaAj6mVtrVrvPeMMqHIYzNx5J9xzT9BSZBfoQe/OWifoXY3SW4bZ7Gk2GONz2+/5x9ixyhpi587sc0uWwFe+Yv8/4YTyEHzmmeqTD83N8J3vwNNeDVlzwmiGg4K+/qzOWh1zHQgA7aWoFB49e8KwYdkClYXOImjV1Cjrk6rA3syh3r9g89nFIjiEY3WXDyEdydLhmDFqoT/X8Aydh+Bu3WDaNJg1Sw3f/mEkUD7AQWHNbKoiIFgzCCSBZ6PQ+xeUfbLTmG34cOjVK4qS/eH66xWJBx8MJ58M3/0uvPxytmb+/PPh4YeDlCCNoHtc2csJa3GyPYZaRarN7cXgGS8of6VwcKsoc8F5LhYrn0YrHlfS8eLF8MADcO65cNpp8LFLXXTppXDFFX5zN/aGeP+CTXBbDLW9ajXQM//1RSv0DBg5xCJ/GDtW2S4X0ttW8jD9zjswebLyFXZi2jQ46CCvuQggQdSTTlhctsaw50wh1PfdNiqpLzhqauDYY2HZsuKeA05UEsGgevDVV2ceGzAAvv51rzkYzSB5vEo8w4pqvyuGraIMGwtxZRi9tOXFUGh4hsonGOCFF5TxuxNXXeU1dXov1C4qfl1BWAQ3xXAsLYXMdDoYgefTxQQsC5s2wV6HU80xx5RH0CoGt3B1/PGebaO3RbDruNVZd1YTGcE1r0KiCaqODJLaEpZuugmuuabwtc6pRyymzHvefDNIqaXDiy+qV41z0eGzn812TMuEYYA8G0HxlmZxY4QEay2g7wQCEWytnw7P8nAtjhNOqDyCm5qU7nzYMPvYaacVJXgHGKH0XyYOGHHEsC05huW52Adkpor26g+xmBrCgqIS38OQ/boZVrSFjd3QfWsERR9tfq9z9uAICE4/AVU/hJivSLTDhys1ZUMDrCnmYoUy1znxRPt/WK/DUmGzy5toSMEgxQJoxZz+PEAORa3xN4K2oxploNUEHAJyBGhFnJwKocc20JtRsRQ9wyLonnvg7ruLXz9oEGxxuEOPHKkeEK/+vh2F7dsz/x9acJ6SbgIp4LbrGZZ73lKAmBmmYYF5MIIt6OQ1v9MlS4J2ejAUwtatmatNlqBVaXAbu9fWFlqAMPZBV48tUBAnm99LwF7jswieFD7/2MOQ9rXEbUnQy30Y7rrfb5X4Hna7qwL06JHrSgH4IKJiLTfg18Em2LKGj6AH1yzzY8ajaYqcpqbca8D58IGrOSrxPex2X4F8PdhoBuO/w5coBwEnomKsLACb4GUok50RZiCWsAXN8zpM19crZ7JiCg43OoNGK5cCJreckN4NtWH1zwBnocI0vwlaGxwgWEsDC1HWHUECW7oQu9/rMG1Jw36GZ8juwSNH5hv+yge3+0o8rnytMiEAiwNaT7rxOfP7gJeo087GMvCKIKqT92Ha6nl+Cd6wIdPfp6oq3Fy6FKiry/zfnHM5xmgG476IirTevzkJnoUKj3QOkez5622YDtqDRSpf0HLG+AJYl9OEPb0baheGL01OQukytmJOkSCDYG038AoqxPzF4QuM3a/mdgWuiCnhKJ3O9D3yin+4rJYqjWB3ZB13YBazA7wf0fBsRSic7oxQ6DaFtGzwLw1fXs0yMAoSPGKEWghfty73lKIY3A9FuFhU+ZFLGi6GQw+Fw1zqHvcDqXqv9uug9bIhtdiv1unOM26CX0BtpjEJJNCigQt/ASOvb+vp5qQsmN9Odo849tjSeB26hSUvcJr3Wngly0/QaISaYgHOvOB8oA5YCFpGPA8XwVob8Kx5/Afhy635A6S35zs70dwp0G3i4hXuYKKaVppeHCQM4WWu7Z3Xr3cHRDXSwJ9DVMsJa3h+zH0il7X6b1Avh++QEUI+CLR9wJp8wpbVg4MS3NiY6a8EakkuarinX8UMDM47L/tBy3ZAS22DmgfC1g1kJGp61ArMdJ/NQbC2HPgb0Isc4Wn9w/iVuXFWBsaOhSOOUL+D2Q6rOaU7zOBZfncv8ICBLtXPgAKb3B11FDz0UOax1la4917nEUENpfkCvvrCrSgeH/QYAgtAJpnhe3aCBA4AZOalgb7WHeB62jQ7aPZLLwULkt2/f3aQ71RKpF+/3NfPmZN57amnFi9D07L3bWhoEOnePfu6iy4S2bYtu0533OHON7VX7UcYFjJSue9KO/43Cz2wIdZ3w1dEv1Xt0atucMiQzI0yWlpEBg3yT/Cll2Y3pojIjTd6I/iUU4qXMXly7jK2bxd55hmRP/5R7SeRi1gRkffeU5t8ZOarrwxph25x9ISZ5++CJP6imXibqcQOU5Eeam9fkXPOEVm3LrshGhpE7rpLpE+f4o1+0UVqV5OWltyNmk6rfRXcD42b4HHj8pfRu7fIBRfk33DDC1avFhk8OKv3tkDim0WbrHibjkSF8W8n+O7g8rpZsQg2Jk7cDenUHXcUbpShQ4sTPGOGtwYeP74wwaNG5c4/zL5JIuo18eST+R5WfS2RbKwtplmfFHRQLTJMyCjUOqUAo0HzE5DLnVdvSCzr27fmqEJz1c2bcynkMzFggLe56bZtmRFl58yBKVPs/yNGZEeFBWWKe/vtxfN3o7FR6ciffTbbhUXB0CF5A9QG9hpWkAtR09k9wEhz34bAmd1rPike41gWQvzBcFuwh/u4e/CQIR1dB30dofcdll4gm808vx2eE6QPSpoWkIvC5dUy0NzBqyIIPvzwjiw/HVc7iYfm4x4zzwVEIqipTK8wM23CvzjuQuJup0RdToJ79erQ3rs6gt57Ekqw0kFCbRLgzlgDed6s7Bu4tm7xmVetOVSVleBEQs1dO6bs1F7Qzw/JQS+QlWaevwyXV+4C6rC3vLs5XF6Jr0NqXzkJ3r69o8o1BOIh/S5EA5ll5vkuauvfUkBORw0RSZDx4fLS3y/VJpc9eqhdR0ePzk/wihUdRXByG8SPCdnuPzLz2wNS0Hw+AsjtZmENIIOC55MYC8kdpWjUb31LkTh7dn6CX3+9I8hNJ0F/JGR7T0Tt9p0ma6vfkkCqQeaaN7EMJEQ4ssTdKuB1tA378suKxHQ6U9nw2ms2wX/6U0cQrK8mlC5fBoNsNfMrxXs3b8G9QT40C55LYOlQqkFfFuVQrWkiu3bZRE6dap9bsMA+fsMNpSY3uQMSp4Ro44Ega8z8ZhNQsA0YvUxrRm1i+THKzHY6SIC8tBTIhZDMaxTgF3V1KqCpBaelZVeHaJLbAC4qGHGQJ6DmnWDppTdqyXY48C5wsWna3NGQ40D2mk/Z7wk88dZvhFRzFD1n6NDMue4jj9jnli2zj48YUaqeawjoSwmsb5buKCWGgCwnEgvXUJDJqA2KBeTx4Dem/xXSibANfMQRmQQvWGCf27pVHWtsLOUcWG+AtiMCtmVPDuyFIRsIrVSKDDIZxOqBz+PYHNFHHrVRvI9razMJ3r1bHe/aVQldIiLPPVfK927QhXw5BOQ9M6+tIGFjpkQNGYets36DQGvILYeAvjFsQzc3Z5J86KEiJ51k/7/22lKQm9oL8R8GbLt6bIFqLUgEzvglgYxAzY8FZGmwiiZOBX1rmMaeOzeT4OuuE5k5U/1OJEQGDoyc3P0Q/1PANhsPssvMawHlf+cWgxwJssKs8D6QADrY9jMgGZjk22+XvHjhhajJTbeC/hy+BUzRQL6PssgQlCoyoPlhh0N6YtsLGSB34lv4ik8Nquk644zc5KbT3gztfJAbB/1FfE8RpR/24o0Bcpf/PCoCcg1qaUtA5oP4jAyvXxKEZE1Txm5uPPBA5D33b/hWQMhk7AX7JpAv+EtfcZCTsVeh2kBuAvHh7dM+OYiRQH29yJo1NrlPP60k7GjITTWD/hd/vU56gfwatVgjIH8nlC6/oiB9QR4xhyNBTeAnFE9nQR+ljNX8TaG6dROZMCFqpUayCfRf+Lh3DeQybJ1yEuQ//Pf8TgGZjL1obYA8BOJRKdA2SGmIymMNYmqotoB+WfG6HrjfsdhaKUH5TFeYm3rkkBqQn2FLj3GQ+/HkzSjVkPg9JHdFR5yn920K9FUQ9xhoUUaB/NkxHG8B+RrR2VB1Bkg9SrWZNBtBB3kA5KjiafWvKkN6w4iOxLxDciPoT+JpCiMTQf4H+1UUB5kGEiLYeqeHDAN5zEF0EmXUfQEFlyGlr5qiJJtK1Gt19d5vLxKURrqBfBXkTUf6T1BTw0rRJVcCpB4liMUdDdUI8ls15OVD/GzQVyhtUiTvWkNJ7fqd5LV9kmqQc0Cmm2Ra6XeC3AJSlzvd/wPVM+X72Ip367MG5D6Q88myIpEYxK9SPS7VErDHpkHfDPoM2H9wjnoNBLkYJS/sdKQ1UHP8qwjtifmpgxxv9mC3siOJ8n78OciXOCCgSRXol6tVqWSjt2lVqhX0DRC/D/abnr9SA3I0yKUoueCjHGmXgvyUaEJdlAydRKqTGDAGmGJ+JqD2XHRiL2pj5HXARqAKUpOAI0HrDrE6FeRBAGkD4xOQPVA1D2IfA4NRYYjqVZqsvaSagTeBecD/ghYgLlDHo5MQ7IZ0RwVOnYQKnzsGnyGMiyABbAJWoOJ4zgeWlclsJhQ6KcG5IHWoHjgM1QMHonYf6YeK/eX2aWxBxefci9pvdz2q968HGjojmbnwf2lks+KG66kOAAAAAElFTkSuQmCC",alt:"logo"})}),(0,rA.jsxs)(gD,{children:[(0,rA.jsx)(kD,{to:"/help",children:"AYUDA"}),(0,rA.jsx)(kD,{to:"/config",children:"CONF"}),t?(0,rA.jsx)(kD,{as:"div",onClick:function(){return wT.signOut()},children:"SALIR"}):(0,rA.jsx)(kD,{to:"/signin",children:"INGRESAR"})]})]})})),bD=n(542),xD=eA.div(YA||(YA=IT(["\n    width:75%;\n    height: 75%;\n    border: 1px solid black;\n    padding 10px;\n"]))),ED=eA.h2(XA||(XA=IT(["\n    font-size: 36px;\n"]))),ID=eA.p(JA||(JA=IT(["\n    font-size: 18px;\n"]))),_D=eA.div(ZA||(ZA=IT(["\n    display:flex;\n    flex-direction: row;\n    justify-content: flex-end;\n"]))),SD={branch:"no-printer",tags:[],commit:{shortHash:"721eb28",hash:"721eb28f1a83b375694bfe5af1b67587106e42ff",date:"2022-10-08T11:48:44-03:00",message:"skip confirm"}},TD=(0,bD.EN)((function(e){var t=e.history;return(0,rA.jsxs)(xD,{children:[(0,rA.jsx)(ED,{children:"Punto de Venta"}),(0,rA.jsx)(ID,{children:"tocando el Icono de arriba ala Izquierda se retorna a la pantalla principal"}),(0,rA.jsx)(ID,{children:"En la parte superior  tocando el nombre del producto se suma a la venta."}),(0,rA.jsx)(ID,{children:"Cuando se desea eliminar un  articul presionar la cruz al final de la linea"}),(0,rA.jsx)(ID,{children:"Antes de imprimir la venta se hace una confirmaci\xf3n, desde alli se puede volver para EDITAR, CANCELAR la orden o CONFIRMARLA"}),(0,rA.jsx)(_D,{children:(0,rA.jsx)(HN,{onClick:function(){return t.goBack()},children:"VOLVER"})}),(0,rA.jsx)("p",{children:SD.commit.shortHash})]})})),CD="grey",AD=FC($A||($A=IT(["\n  top: -14px;\n  font-size: 12px;\n  color: ",";\n"])),"black"),ND=eA.div(eN||(eN=IT(["\n  position: relative;\n  margin: 45px 0;\n  input[type='password'] {\n    letter-spacing: 0.3em;\n  }\n"]))),DD=eA.input(tN||(tN=IT(["\n  background: none;\n  background-color: white;\n  color: ",";\n  font-size: 18px;\n  padding: 10px 10px 10px 5px;\n  display: block;\n  width: 100%;\n  border: none;\n  border-radius: 0;\n  border-bottom: 1px solid ",";\n  margin: 25px 0;\n  &:focus {\n    outline: none;\n  }\n  &:focus ~ label {\n    ","\n  }\n"])),CD,CD,AD),OD=eA.label(nN||(nN=IT(["\n  color: ",";\n  font-size: 16px;\n  font-weight: normal;\n  position: absolute;\n  pointer-events: none;\n  left: 5px;\n  top: 10px;\n  transition: 300ms ease all;\n  &.shrink {\n    ","\n  }\n"])),CD,AD),PD=["handleChange","label"],RD=function(e){var t=e.handleChange,n=e.label,r=ET(e,PD);return(0,rA.jsxs)(ND,{children:[(0,rA.jsx)(DD,oe({onChange:t},r)),n?(0,rA.jsx)(OD,{className:r.value.length?"shrink":"",children:n}):null]})},LD=eA.div(rN||(rN=IT(["\n  width: 380px;\n  display: flex;\n  flex-direction: column;\n"]))),MD=eA.h2(iN||(iN=IT(["\n  margin: 10px 0;\n"]))),FD=eA.div(aN||(aN=IT(["\n  display: flex;\n  justify-content: space-between;\n"]))),UD=function(e){Ze(n,e);var t=rt(n);function n(e){var r;return Qe(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=We(Ke().mark((function e(t){var n,i,a;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,i=n.email,a=n.password,e.prev=2,e.next=5,wT.signInWithEmailAndPassword(i,a);case 5:r.setState({email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(ie({},i,n))},r.state={email:"",password:""},r}return Xe(n,[{key:"render",value:function(){return(0,rA.jsxs)(LD,{children:[(0,rA.jsx)(MD,{children:"Ingrese su email y password"}),(0,rA.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,rA.jsx)(RD,{name:"email",type:"email",label:"Email",value:this.state.email,handleChange:this.handleChange,required:!0}),(0,rA.jsx)(RD,{name:"password",type:"password",label:"Password",value:this.state.password,handleChange:this.handleChange,required:!0}),(0,rA.jsxs)(FD,{children:[(0,rA.jsx)(HN,{type:"submit",children:" INGRESAR "}),"                    "]})]})]})}}]),n}(t.Component),jD=UD,VD=eA.div(oN||(oN=IT(["\n    width: 850px;\n    display: flex;\n    justify-content: space-between;\n    margin: 30px auto;\n"]))),BD=function(){return(0,rA.jsx)(VD,{children:(0,rA.jsx)(jD,{})})},zD=eA.div(uN||(uN=IT(["\n    width:100%;\n    padding: 20px;\n"]))),qD=ne(dN({currentUSer:iD}))((function(e){var t=e.currentUSer;return console.log(t),(0,rA.jsxs)(zD,{children:[(0,rA.jsx)("h1",{children:"Config"}),(0,rA.jsx)("p",{children:t.displayName}),(0,rA.jsx)("p",{children:t.email}),(0,rA.jsx)("p",{children:t.printer}),(0,rA.jsx)("p",{children:t.type}),"    "]})})),HD=eA.div(sN||(sN=IT(["\n    width: 350px;\n    background-color: white;\n    padding: 30px;\n"]))),KD=eA.h2(cN||(cN=IT(["\n    font-weight: bold;\n"]))),GD=eA.div(lN||(lN=IT(["\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n\n"]))),WD=eA.button(fN||(fN=IT(["\n    margin-top:auto;\n    height: 30px;\n    background-color:black;\n    color: white;\n"]))),QD=function(e){Ze(n,e);var t=rt(n);function n(){var e;return Qe(this,n),(e=t.call(this)).handlePrint=function(t){e.state.disabled||(e.setState({disabled:!0}),e.updateStocks(),e.sendPrint())},e.updateStocks=function(){e.props.cartItems.map((function(e){return console.log("ITEM: "+e.name.toUpperCase()+" Quantity: "+e.quantity),kT(e.name.toLowerCase(),e.quantity)}))},e.sendPrint=We(Ke().mark((function t(){var n,r,i,a;return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currentUser,i=n.cartItems,a=n.total,t.next=3,gT(r.printer,rD(r,i,a));case 3:e.clearAndHome();case 4:case"end":return t.stop()}}),t)}))),e.clearAndHome=function(){var t=e.props,n=t.clearAllItems,r=t.history;n(),r.push("/")},e.state={disabled:!1},e}return Xe(n,[{key:"render",value:function(){var e=this.props,t=e.clearAllItems,n=e.history;return(0,rA.jsxs)(HD,{children:[(0,rA.jsx)(KD,{children:"VENTA DE VALES"}),(0,rA.jsx)(nD,{}),(0,rA.jsxs)(GD,{children:[(0,rA.jsx)(WD,{type:"button",onClick:this.handlePrint,children:"IMPRIMIR"}),(0,rA.jsx)(WD,{type:"button",onClick:function(){return n.push("/")},children:"EDITAR"}),(0,rA.jsx)(WD,{type:"button",onClick:function(){t(),n.push("/")},children:"CANCELAR"})]})]})}}]),n}(t.Component),YD=dN({currentUser:iD,cartItems:IN,total:_N}),XD=(0,i.withRouter)(ne(YD,(function(e){return{clearAllItems:function(){return e(pN())}}}))(QD)),JD=function(e){Ze(n,e);var t=rt(n);function n(){var e;Qe(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).unsubscribeFromAuth=null,e}return Xe(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=wT.onAuthStateChanged(function(){var t=We(Ke().mark((function t(n){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,mT(n);case 3:t.sent.onSnapshot((function(t){e(oe({id:t.id},t.data()))}));case 5:e(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this.props.currentUser;return(0,rA.jsxs)("div",{children:[(0,rA.jsx)(wD,{}),(0,rA.jsxs)(i.Switch,{children:[(0,rA.jsx)(i.Route,{exact:!0,path:"/",render:function(){return e?(0,rA.jsx)(pD,{}):(0,rA.jsx)(BD,{})}}),e?(0,rA.jsx)(i.Route,{path:"/config",component:qD}):null,(0,rA.jsx)(i.Route,{path:"/point-of-sale",render:function(){return(0,rA.jsx)(i.Redirect,{to:"/"})}}),(0,rA.jsx)(i.Route,{exact:!0,path:"/confirm",component:XD}),(0,rA.jsx)(i.Route,{path:"/help",component:TD}),(0,rA.jsx)(i.Route,{exact:!0,path:"/SignIn",render:function(){return e?(0,rA.jsx)(pD,{}):(0,rA.jsx)(BD,{})}})]})]})}}]),n}(t.Component),ZD=ne(dN({currentUser:iD}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:ye,payload:e}}(t))}}}))(JD);r.render((0,rA.jsx)(_,{store:qe,children:(0,rA.jsx)(l,{children:(0,rA.jsx)(ZD,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.af95e29e.js.map