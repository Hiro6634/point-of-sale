/*! For license information please see main.db267bac.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,E=60107,I=60108,S=60114,T=60109,C=60110,A=60112,N=60113,O=60120,P=60115,R=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),_=j("react.portal"),E=j("react.fragment"),I=j("react.strict_mode"),S=j("react.profiler"),T=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),N=j("react.suspense"),O=j("react.suspense_list"),P=j("react.memo"),R=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function B(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function W(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case D:return G(e._render);case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Oe(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ae||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){qe=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ye){qe=!1}function Be(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,We=null,He=!1,Ge=null,Qe={onError:function(e){Ke=!0,We=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,We=null,Be.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},It={},St={};function Tt(e){if(It[e])return It[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return It[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=Tt("animationend"),At=Tt("animationiteration"),Nt=Tt("animationstart"),Ot=Tt("transitionend"),Pt=new Map,Rt=new Map,Dt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Ht|0)|0},Wt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=a)||je()}}function Jt(e,t,n,r){Qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Se(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var An=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(An),On=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Fn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){Oe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Jn(e){Ar(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(Qn(t,Yn,e,Se(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<Er.length;Ir++)Rt.set(Er[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=We;Ke=!1,We=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Or]||(e[Or]=!0,u.forEach((function(t){Tr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Nn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case Ct:case At:case Nt:s=wn;break;case Ot:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Gn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(m=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(zn=!0,qn);case"textInput":return(e=t.data)===qn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Fn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ei=null,Ii=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ai?Ai:function(){},ji=null,Vi=null,qi=!1,zi=Ni(),Bi=1e4>zi?Ni:function(){return Ni()-zi};function Ki(){switch(Oi()){case Pi:return 99;case Ri:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Wi(e),Ii(e,t)}function Gi(e,t,n){return e=Wi(e),Si(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}$i()}function $i(){if(!qi&&null!==ji){qi=!0;var e=0;try{var t=ji;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Pi,Qi),n}finally{qi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||z(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||z(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=z(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(z(a))return y(e,r,a,s);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Sa=Ia(!0),Ta=Ia(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Oa=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(fi(Oa,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Da(){li(Aa),li(Na),li(Oa)}function La(e){Pa(Oa.current);var t=Pa(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function Ma(e){Na.current===e&&(li(Aa),li(Na))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,qa=!1;function za(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(qa){var t=Va;if(t){var n=t;if(!Ba(e,t)){if(!(t=Qr(n.nextSibling))||!Ba(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(ja=e);za(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,ja=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ha(e){if(e!==ja)return!1;if(!qa)return Wa(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Qr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,qa=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Po,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,qu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Oo.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Eo(e,t){return bo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Ki();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Oo(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Eo,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Eo,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Sa(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Wo(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Qo,$o,Yo,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Aa.current),Ha(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Nr(Sr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,u),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Nr("invalid",r);break;case"textarea":se(r,u),Nr("invalid",r)}for(var c in Ee(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Nr(Sr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Nr("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Nr("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Oa.current),Pa(Aa.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Ru||0===(134217727&qu)&&0===(134217727&zu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Aa.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ee(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Iu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Eu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function Iu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wu=Bi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=zs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ou=b.ReactCurrentOwner,Pu=0,Ru=null,Du=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,ju=null,Vu=0,qu=0,zu=0,Bu=0,Ku=null,Wu=0,Hu=1/0;function Gu(){Hu=Bi()+500}var Qu,$u=null,Yu=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?Bi():-1!==us?us:us=Bi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Vu),0!==Yi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Pu)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;Bt(e,t,n),e===Ru&&(zu|=t,4===Uu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ys(e,n),0===Pu&&(Gu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Si(Pi,$i)):ji.push(n),n=Fi):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Ss();for(Ru===e&&Lu===r||(Gu(),Es(e,r));;)try{As();break}catch(s){Is(e,s)}if(na(),Nu.current=a,Pu=i,null!==Du?r=0:(Ru=null,Lu=0,r=Uu),0!==(Vu&zu))Es(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=ju,Es(e,0),gs(e,n),ys(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Wu+500-Bi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Wr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ys(e,Bi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&zu)&&(n=Ts(e,t=Ut(e,t)))}else n=Ts(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=ju,Es(e,0),gs(e,t),ys(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ys(e,Bi()),null}function ws(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function bs(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Fu.current,li(Fu)}function Es(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Ru=e,Du=Hs(e.current,null),Lu=Mu=Vu=t,Uu=0,ju=null,Bu=zu=qu=0}function Is(e,t){for(;;){var n=Du;try{if(na(),Ya.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Ou.current=null,null===n||null===n.return){Uu=1,ju=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=qs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(_){t=_,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ss(){var e=Nu.current;return Nu.current=Po,null===e?Po:e}function Ts(e,t){var n=Pu;Pu|=16;var r=Ss();for(Ru===e&&Lu===t||Es(e,t);;)try{Cs();break}catch(i){Is(e,i)}if(na(),Pu=n,Nu.current=r,null!==Du)throw Error(o(261));return Ru=null,Lu=0,Uu}function Cs(){for(;null!==Du;)Ns(Du)}function As(){for(;null!==Du&&!Ci();)Ns(Du)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Os(e):Du=t,Ou.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Uu&&(Uu=5)}function Ps(e){var t=Ki();return Hi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Du=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ou.current=null,qr=$t,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;zr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Ds()}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Su($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Su($u.alternate,$u);break;case 4:Su($u.alternate,$u);break;case 8:Iu(u,s=$u);var x=s.alternate;wu(s),null!==x&&wu(x)}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);if(b=zr,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!qr,zr=qr=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&mu(k,$u.alternate,$u),128&_){w=void 0;var E=$u.ref;if(null!==E){var I=$u.stateNode;$u.tag,w=I,"function"===typeof E?E(w):E.current=w}}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);$u=null,Ui(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(ys(e,Bi()),Yu)throw Yu=!1,e=Ju,Ju=null,e;return 0!==(8&Pu)||Qi(),null}function Ds(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Gi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Hi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Gi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(Bt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))Bt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>Bi()-Wu?Es(e,0):Bu|=n),ys(e,t)}function zs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Vu),0===(t=qt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(Bt(e,t,n),ys(e,n))}function Bs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new Bs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case I:u=8,i|=1;break;case S:return(e=Ks(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case N:return(e=Ks(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case O:return(e=Ks(19,n,t,i)).elementType=O,e.lanes=a,e;case F:return $s(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case A:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),Bo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Vo(e,t,i,a=Ji(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=ws,De=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Gu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,Bi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Gu(),Qi())}};var sc={Events:[ri,ii,ai,Oe,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ei=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===s},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===m||e===a||e===l||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===u||e.$$typeof===s||e.$$typeof===c||e.$$typeof===y||e.$$typeof===p||e[0]===v)},t.typeOf=w},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,E=n[2]||l,I=m||g;r.push({name:y||a++,prefix:v||"",delimiter:E,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+s(E)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function O(){var e=N.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":N(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":N(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var y="undefined"==typeof e?"undefined":N(e),m="undefined"==typeof t?"undefined":N(t),g="undefined"!==y||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==m||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===y&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new u(p,w,new o(void 0,e[w]))):l(e[w],t[w],n,r,p,w,d);for(;w<t.length;)n(new u(p,w,new a(void 0,t[w++])))}else{var b=Object.keys(e),x=Object.keys(t);b.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===y&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function y(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function m(e){return"color: "+R[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+R[t].text,m(t)].concat(O(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function w(e,t,n,r){switch("undefined"==typeof e?"undefined":N(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,O(n)):e[r];case"function":return e(t);default:return e}}function b(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?b(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,y=i.error,m=i.took,g=i.nextState,b=e[f+1];b&&(g=b.prevState,m=b.started-h);var x=r(p),_="function"==typeof o?o((function(){return g}),p,i):o,E=C(d),I=u.title?"color: "+u.title(x)+";":"",S=["color: gray; font-weight: lighter;"];S.push(I),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var T=a(x,E,m);try{_?u.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(S)):n.groupCollapsed(T):u.title&&l?n.group.apply(n,["%c "+T].concat(S)):n.group(T)}catch(e){n.log(T)}var A=w(s,x,[v],"prevState"),N=w(s,x,[x],"action"),O=w(s,x,[y,v],"error"),P=w(s,x,[g],"nextState");if(A)if(u.prevState){var R="color: "+u.prevState(v)+"; font-weight: bold";n[A]("%c prev state",R,v)}else n[A]("prev state",v);if(N)if(u.action){var D="color: "+u.action(x)+"; font-weight: bold";n[N]("%c action    ",D,x)}else n[N]("action    ",x);if(y&&O)if(u.error){var L="color: "+u.error(y,v)+"; font-weight: bold;";n[O]("%c error     ",L,y)}else n[O]("error     ",y);if(P)if(u.nextState){var M="color: "+u.nextState(g)+"; font-weight: bold";n[P]("%c next state",M,g)}else n[P]("next state",g);c&&k(v,g,n,_);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},D,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=A.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=A.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var E,I,S=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return S("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},A="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},P=[];E="object"===("undefined"==typeof n.g?"undefined":N(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(I=E.DeepDiff)&&P.push((function(){"undefined"!=typeof I&&E.DeepDiff===f&&(E.DeepDiff=I,I=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:y,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof I},enumerable:!0},noConflict:{value:function(){return P&&(P.forEach((function(e){e()})),P=null),f},enumerable:!0}});var R={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},D={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=D,e.createLogger=_,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,A=null,N=3,O=!1,P=!1,R=!1;function D(e){for(var t=_(T);null!==t;){if(null===t.callback)E(T);else{if(!(t.startTime<=e))break;E(T),t.sortIndex=t.expirationTime,x(S,t)}t=_(T)}}function L(e){if(R=!1,D(e),!P)if(null!==_(S))P=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,R&&(R=!1,i()),O=!0;var a=N;try{for(D(n),A=_(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===_(S)&&E(S),D(n)}else E(S);A=_(S)}if(null!==A)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,O=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return _(S)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(S)&&e===_(T)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),P||O||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/point-of-sale/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return An},SDK_VERSION:function(){return xr},_DEFAULT_ENTRY_NAME:function(){return ur},_addComponent:function(){return fr},_addOrOverwriteComponent:function(){return hr},_apps:function(){return cr},_clearComponents:function(){return yr},_components:function(){return lr},_getProvider:function(){return pr},_registerComponent:function(){return dr},_removeServiceInstance:function(){return vr},deleteApp:function(){return Sr},getApp:function(){return Er},getApps:function(){return Ir},initializeApp:function(){return _r},onLog:function(){return Ar},registerVersion:function(){return Cr},setLogLevel:function(){return Nr}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function u(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var c=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&u(e),o=t&&u(t),c=a||o;if(e&&u(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?s(i,h):".."===d?(s(i,h),f++):f&&(s(i,h),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&u(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function l(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var f=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=l(t),i=l(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},h="Invariant failed";function d(e,t){if(!e)throw new Error(h)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function k(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=o({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=c(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var _="popstate",E="hashchange";function I(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),b||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,u=void 0!==a&&a,s=i.getUserConfirmation,c=void 0===s?x:s,l=i.keyLength,f=void 0===l?6:l,h=e.basename?m(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=y(a,h)),k(a,r,n)}function S(){return Math.random().toString(36).substr(2,f)}var T=w();function C(e){o(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(v(e.state))}function N(){P(v(I()))}var O=!1;function P(e){if(O)O=!1,C();else{T.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,M(i))}(e)}))}}var R=v(I()),D=[R.key];function L(e){return h+g(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(_,A),r&&window.addEventListener(E,N)):0===F&&(window.removeEventListener(_,A),r&&window.removeEventListener(E,N))}var j=!1;var V={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",a=k(e,r,S(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),D=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=k(e,r,S(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var T="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(A(window.location.href)+"#"+e)}function P(e){void 0===e&&{},b||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?x:r,a=n.hashType,u=void 0===a?"slash":a,s=e.basename?m(p(e.basename)):"",c=C[u],l=c.encodePath,f=c.decodePath;function h(){var e=f(N());return s&&y(e,s),k(e)}var v=w();function _(e){o(V,e),V.length=t.length,v.notifyListeners(V.location,V.action)}var E=!1,I=null;function S(){var e=N(),t=l(e);if(e!==t)O(t);else{var n=h(),r=V.location;if(!E&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(I===g(n))return;null,function(e){if(E)!1,_();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?_({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var P=N(),R=l(P);P!==R&&O(R);var D=h(),L=[g(D)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(T,S):0===F&&window.removeEventListener(T,S)}var j=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&A(window.location.href),n+"#"+l(s+g(e))},push:function(e,t){var n="PUSH",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(s+t);if(N()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(g(V.location)),o=L.slice(0,a+1);o.push(t),o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(s+t);N()!==i&&(t,O(i));var a=L.indexOf(g(V.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return j||(U(1),!0),function(){return j&&(!1,U(-1)),t()}},listen:function(e){var t=v.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function R(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,u=void 0===a?0:a,s=t.keyLength,c=void 0===s?6:s,l=w();function f(e){o(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=R(u,0,i.length-1),p=i.map((function(e){return k(e,void 0,"string"===typeof e?h():e.key||h())})),v=g;function y(e){var t=R(m.index+e,0,m.entries.length-1),r=m.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=k(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m}var L=n(7),M=n.n(L),F=1073741823,U="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function j(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var V=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return U[e]=(U[e]||0)+1}()+"__",u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=j(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):F,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);u.childContextTypes=((r={})[o]=M().object.isRequired,r);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?F:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?F:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return s.contextTypes=((i={})[o]=M().object,i),{Provider:u,Consumer:s}},q=V,z=n(239),B=n.n(z);n(228);function K(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var W=n(110),H=n.n(W),G=function(e){var t=q();return t.displayName=e,t},Q=G("Router-History"),$=function(e){var t=q();return t.displayName=e,t},Y=$("Router"),J=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(Y.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Q.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var X=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var Z={},ee=0;function te(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Z[e])return Z[e];var t=B().compile(e);return ee<1e4&&(Z[e]=t,ee++),t}(e)(t,{pretty:!0})}function ne(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var i=e.history,u=e.staticContext,s=a?i.push:i.replace,c=k(n?"string"===typeof r?te(r,n.params):o({},r,{pathname:te(r.pathname,n.params)}):r);return u?(s(c),null):t.createElement(X,{onMount:function(){s(c)},onUpdate:function(e,t){var n=k(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&f(e.state,t.state)})(n,o({},c,{key:n.key}))||s(c)},to:r})}))}var re={},ie=0;function ae(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=re[n]||(re[n]={});if(r[e])return r[e];var i=[],a={regexp:B()(e,i,t),keys:i};return ie<1e4&&(r[e]=a,ie++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var oe=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||d(!1);var r=e.props.location||n.location,i=o({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ae(r.pathname,e.props):n.match}),a=e.props,u=a.children,s=a.component,c=a.render;return Array.isArray(u)&&0===u.length&&(u=null),t.createElement(Y.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:s?t.createElement(s,i):c?c(i):null:"function"===typeof u?u(i):null)}))},n}(t.Component);function ue(e){return"/"===e.charAt(0)?e:"/"+e}function se(e,t){if(!e)return t;var n=ue(e);return 0!==t.pathname.indexOf(n)?t:o({},t,{pathname:t.pathname.substr(n.length)})}function ce(e){return"string"===typeof e?e:g(e)}function le(e){return function(){d(!1)}}function fe(){}t.Component;var he=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||d(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var u=e.props.path||e.props.from;i=u?ae(a.pathname,o({},e.props,{path:u})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);t.useContext;var de=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=S(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(J,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var pe=function(e,t){return"function"===typeof e?e(t):e},ve=function(e,t){return"string"===typeof e?k(e,null,null,t):e},ye=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ye);var ge=me((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,u=K(e,["innerRef","navigate","onClick"]),s=u.target,c=o({},u,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=ye!==me&&n||r,t.createElement("a",c)}));var ke=me((function(e,n){var r=e.component,i=void 0===r?ge:r,a=e.replace,u=e.to,s=e.innerRef,c=K(e,["component","replace","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var r=e.history,l=ve(pe(u,e.location),e.location),f=l?r.createHref(l):"",h=o({},c,{href:f,navigate:function(){var t=pe(u,e.location);(a?r.replace:r.push)(t)}});return ye!==me?h.ref=n||s:h.innerRef=s,t.createElement(i,h)}))})),we=function(e){return e},be=t.forwardRef;"undefined"===typeof be&&(be=we);be((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,u=void 0===a?"active":a,s=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,p=e.sensitive,v=e.strict,y=e.style,m=e.to,g=e.innerRef,k=K(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var r=h||e.location,a=ve(pe(m,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=b?ae(r.pathname,{path:b,exact:l,sensitive:p,strict:v}):null,_=!!(f?f(x,r):x),E=_?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,u):c,I=_?o({},y,{},s):y,S=o({"aria-current":_&&i||null,className:E,style:I,to:a},k);return we!==be?S.ref=n||g:S.innerRef=g,t.createElement(ke,S)}))}));var xe=t.createContext(null);var _e=function(e){e()},Ee=function(){return _e};var Ie={notify:function(){},get:function(){return[]}};function Se(e,t){var n,r=Ie;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Ee(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Ie)},getListeners:function(){return r}};return o}var Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;var Ce=function(e){var n=e.store,r=e.context,i=e.children,a=(0,t.useMemo)((function(){var e=Se(n);return e.onStateChange=e.notifyNestedSubs,{store:n,subscription:e}}),[n]),o=(0,t.useMemo)((function(){return n.getState()}),[n]);Te((function(){var e=a.subscription;return e.trySubscribe(),o!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var u=r||xe;return t.createElement(u.Provider,{value:a},i)},Ae=n(441),Ne=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Oe=["reactReduxForwardedRef"],Pe=[],Re=[null,null];function De(e,t){var n=e[1];return[t.payload,n+1]}function Le(e,t,n){Te((function(){return e.apply(void 0,t)}),n)}function Me(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function Fe(e,t,n,r,i,a,o,u,s,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===a.current?o.current||s():(a.current=e,u.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var Ue=function(){return[null,0]};function je(e,n){void 0===n&&(n={});var r=n,i=r.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,u=r.methodName,s=void 0===u?"connectAdvanced":u,c=r.renderCountProp,l=void 0===c?void 0:c,f=r.shouldHandleStateChanges,h=void 0===f||f,d=r.storeKey,p=void 0===d?"store":d,v=(r.withRef,r.forwardRef),y=void 0!==v&&v,m=r.context,g=void 0===m?xe:m,k=K(r,Ne),w=g;return function(n){var r=n.displayName||n.name||"Component",i=a(r),u=o({},k,{getDisplayName:a,methodName:s,renderCountProp:l,shouldHandleStateChanges:h,storeKey:p,displayName:i,wrappedComponentName:r,WrappedComponent:n}),c=k.pure;var f=c?t.useMemo:function(e){return e()};function d(r){var i=(0,t.useMemo)((function(){var e=r.reactReduxForwardedRef,t=K(r,Oe);return[r.context,e,t]}),[r]),a=i[0],s=i[1],c=i[2],l=(0,t.useMemo)((function(){return a&&a.Consumer&&(0,Ae.isContextConsumer)(t.createElement(a.Consumer,null))?a:w}),[a,w]),d=(0,t.useContext)(l),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var v=p?r.store:d.store,y=(0,t.useMemo)((function(){return function(t){return e(t.dispatch,u)}(v)}),[v]),m=(0,t.useMemo)((function(){if(!h)return Re;var e=Se(v,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,p,d]),g=m[0],k=m[1],b=(0,t.useMemo)((function(){return p?d:o({},d,{subscription:g})}),[p,d,g]),x=(0,t.useReducer)(De,Pe,Ue),_=x[0][0],E=x[1];if(_&&_.error)throw _.error;var I=(0,t.useRef)(),S=(0,t.useRef)(c),T=(0,t.useRef)(),C=(0,t.useRef)(!1),A=f((function(){return T.current&&c===S.current?T.current:y(v.getState(),c)}),[v,_,c]);Le(Me,[S,I,C,c,A,T,k]),Le(Fe,[h,v,g,y,S,I,C,T,k,E],[v,g,y]);var N=(0,t.useMemo)((function(){return t.createElement(n,o({},A,{ref:s}))}),[s,n,A]);return(0,t.useMemo)((function(){return h?t.createElement(l.Provider,{value:b},N):N}),[l,N,b])}var v=c?t.memo(d):d;if(v.WrappedComponent=n,v.displayName=d.displayName=i,y){var m=t.forwardRef((function(e,n){return t.createElement(v,o({},e,{reactReduxForwardedRef:n}))}));return m.displayName=i,m.WrappedComponent=n,H()(m,n)}return H()(v,n)}}function Ve(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function qe(e,t){if(Ve(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Ve(e[n[i]],t[n[i]]))return!1;return!0}function ze(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Be(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Ke(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Be(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Be(i),i=r(t,n)),i},r}}var We=[function(e){return"function"===typeof e?Ke(e):void 0},function(e){return e?void 0:ze((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?ze((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var He=[function(e){return"function"===typeof e?Ke(e):void 0},function(e){return e?void 0:ze((function(){return{}}))}];function Ge(e,t,n){return o({},n,e,t)}var Qe=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,u){var s=e(t,n,u);return o?i&&a(s,r)||(r=s):(o=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return Ge}}],$e=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ye(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function Je(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function Xe(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=K(t,$e),o=n(e,a),u=r(e,a),s=i(e,a);return(a.pure?Je:Ye)(o,u,s,e,a)}var Ze=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function et(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function tt(e,t){return e===t}function nt(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?je:n,i=t.mapStateToPropsFactories,a=void 0===i?He:i,u=t.mapDispatchToPropsFactories,s=void 0===u?We:u,c=t.mergePropsFactories,l=void 0===c?Qe:c,f=t.selectorFactory,h=void 0===f?Xe:f;return function(e,t,n,i){void 0===i&&(i={});var u=i,c=u.pure,f=void 0===c||c,d=u.areStatesEqual,p=void 0===d?tt:d,v=u.areOwnPropsEqual,y=void 0===v?qe:v,m=u.areStatePropsEqual,g=void 0===m?qe:m,k=u.areMergedPropsEqual,w=void 0===k?qe:k,b=K(u,Ze),x=et(e,a,"mapStateToProps"),_=et(t,s,"mapDispatchToProps"),E=et(n,l,"mergeProps");return r(h,o({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:_,initMergeProps:E,pure:f,areStatesEqual:p,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:w},b))}}var rt=nt();var it;function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}it=r.unstable_batchedUpdates,_e=it;var ct="function"===typeof Symbol&&Symbol.observable||"@@observable",lt=function(){return Math.random().toString(36).substring(7).split("").join(".")},ft={INIT:"@@redux/INIT"+lt(),REPLACE:"@@redux/REPLACE"+lt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lt()}};function ht(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var pt=n(896),vt=n.n(pt),yt="SET_CURRENT_USERS",mt={currentUser:null},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;return t.type===yt?ut(ut({},e),{},{currentUser:t.payload}):e},kt={UPDATE_COLLECTIONS:"UPDATE_COLLECTIONS",INC_SHOP_ITEM:"INC_SHOP_ITEM"},wt="NOT_FOUND";var bt=function(e,t){return e===t};function xt(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?bt:r,a=n.maxSize,o=void 0===a?1:a,u=n.resultEqualityCheck,s=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===o?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:wt},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(s):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return wt}return{get:r,put:function(t,i){r(t)===wt&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(o,s);function l(){var t=c.get(arguments);if(t===wt){if(t=e.apply(null,arguments),u){var n=c.getEntries(),r=n.find((function(e){return u(e.value,t)}));r&&(t=r.value)}c.put(arguments,t)}return t}return l.clearCache=function(){return c.clear()},l}function _t(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,u={memoizeOptions:void 0},s=r.pop();if("object"===typeof s&&(u=s,s=r.pop()),"function"!==typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var c=u,l=c.memoizeOptions,f=void 0===l?n:l,h=Array.isArray(f)?f:[f],d=_t(r),p=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(h)),v=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return a=p.apply(null,e)}));return Object.assign(v,{resultFunc:s,memoizedResultFunc:p,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),v};return i}var It=Et(xt),St=function(e,t){if(void 0===t&&(t=It),"object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r},Tt=It([function(e){return e.shop}],(function(e){return e.collections})),Ct=It([Tt],(function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]})),At=function(e,t){var n=Object.keys(e).map((function(t){return e[t]}));return n.map((function(e){return e.id===t?ut(ut({},e),{},{quantity:e.quantity+1}):e}))},Nt={collections:null},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(console.log("REDUCER",t),t.type){case kt.UPDATE_COLLECTIONS:return ut(ut({},e),{},{collections:t.payload});case kt.INC_SHOP_ITEM:return ut(ut({},e),{},{collections:At(e.collections,t.payload)});default:return e}},Pt="ADD_ITEM",Rt="REMOVE_ITEM",Dt="CLEAR_ITEM_FROM_CART";function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ft(e,t){if(e){if("string"===typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}function Ut(e){return function(e){if(Array.isArray(e))return Lt(e)}(e)||Mt(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jt=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?ut(ut({},e),{},{quantity:e.quantity+1}):e})):[].concat(Ut(e),[ut(ut({},t),{},{quantity:1})])},Vt=function(e,t){return 1===e.find((function(e){return e.id===t.id})).quantity?e.filter((function(e){return e.id!==t.id})):e.map((function(e){return e.id===t.id?ut(ut({},e),{},{quantity:e.quantity-1}):e}))},qt={cartItems:[]},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pt:return ut(ut({},e),{},{cartItems:jt(e.cartItems,t.payload)});case Rt:return ut(ut({},e),{},{cartItems:Vt(e.cartItems,t.payload)});case Dt:return ut(ut({},e),{},{cartItems:e.cartItems.filter((function(e){return e.id!==t.payload.id}))});default:return e}},Bt=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:ft.INIT}))throw new Error(st(12));if("undefined"===typeof n(void 0,{type:ft.PROBE_UNKNOWN_ACTION()}))throw new Error(st(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(st(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:gt,shop:Ot,cart:zt}),Kt=[vt()],Wt=function e(t,n,r){var i;if("function"===typeof n&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(st(0));if("function"===typeof n&&"undefined"===typeof r&&(r=n,n=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(st(1));return r(e)(t,n)}if("function"!==typeof t)throw new Error(st(2));var a=t,o=n,u=[],s=u,c=!1;function l(){s===u&&(s=u.slice())}function f(){if(c)throw new Error(st(3));return o}function h(e){if("function"!==typeof e)throw new Error(st(4));if(c)throw new Error(st(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(st(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),u=null}}}function d(e){if(!ht(e))throw new Error(st(7));if("undefined"===typeof e.type)throw new Error(st(8));if(c)throw new Error(st(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var t=u=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(st(10));a=e,d({type:ft.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(st(11));function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[ct]=function(){return this},e}return d({type:ft.INIT}),(i={dispatch:d,subscribe:h,getState:f,replaceReducer:p})[ct]=v,i}(Bt,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(st(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=dt.apply(void 0,a)(n.dispatch),ut(ut({},n),{},{dispatch:r})}}}.apply(void 0,Kt)),Ht=Wt;function Gt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Gt(a,r,i,o,u,"next",e)}function u(e){Gt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&Yt(e.prototype,t),n&&Yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function Zt(e){return Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zt(e)}function en(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,t){if(t&&("object"===tn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nn(e)}function an(e){var t=en();return function(){var n,r=Zt(e);if(t){var i=Zt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rn(this,n)}}var on=n(757),un=n.n(on);function sn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ft(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function cn(e){if(Array.isArray(e))return e}function ln(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fn(e,t){return cn(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||Ft(e,t)||ln()}function hn(e,t,n){return hn=en()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},hn.apply(null,arguments)}function dn(e){var t="function"===typeof Map?new Map:void 0;return dn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return hn(e,arguments,Zt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},dn(e)}var pn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},vn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},yn=function(e){return function(e){var t=pn(e);return vn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},mn=function(e){try{return vn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function gn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&kn(n)&&(e[n]=gn(e[n],t[n]));return e}function kn(e){return"__proto__"!==e}var wn=function(){function e(){var t=this;$t(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Jt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function bn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yn(JSON.stringify({alg:"none",type:"JWT"})),yn(JSON.stringify(a)),""].join(".")}function xn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _n(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function En(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function In(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Sn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Tn(){var e=xn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cn(){return"object"===typeof indexedDB}var An=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(nn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(nn(a),Nn.prototype.create),a}return Jt(n)}(dn(Error)),Nn=function(){function e(t,n,r){$t(this,e),this.service=t,this.serviceName=n,this.errors=r}return Jt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?On(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new An(n,a,t);return o}}]),e}();function On(e,t){return e.replace(Pn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Pn=/\{\$([^}]+)}/g;function Rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ln(u)&&Ln(s)){if(!Dn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ln(e){return null!==e&&"object"===typeof e}function Mn(e){for(var t=[],n=function(){var e=fn(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Fn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=fn(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Un(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function jn(e,t){var n=new Vn(e,t);return n.subscribe.bind(n)}var Vn=function(){function e(t,n){var r=this;$t(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Jt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=sn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=qn),void 0===r.error&&(r.error=qn),void 0===r.complete&&(r.complete=qn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function qn(){}function zn(e){return e&&e._delegate?e._delegate:e}var Bn=function(){function e(t,n,r){$t(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Jt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Kn="[DEFAULT]",Wn=function(){function e(t,n){$t(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Jt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new wn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Kn})}catch(s){}var t,n=sn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=fn(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Qt(on.mark((function e(){var t;return on.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ut(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ut(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=sn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=fn(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(gI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Kn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(gI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn;return this.component?this.component.multipleInstances?e:Kn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Hn,Gn,Qn=function(){function e(t){$t(this,e),this.name=t,this.providers=new Map}return Jt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Wn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),$n=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gn||(Gn={}));var Yn,Jn,Xn={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},Zn=Gn.INFO,er=(at(Hn={},Gn.DEBUG,"log"),at(Hn,Gn.VERBOSE,"log"),at(Hn,Gn.INFO,"info"),at(Hn,Gn.WARN,"warn"),at(Hn,Gn.ERROR,"error"),Hn),tr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=er[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},nr=function(){function e(t){$t(this,e),this.name=t,this._logLevel=Zn,this._logHandler=tr,this._userLogHandler=null,$n.push(this)}return Jt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Gn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Xn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gn.DEBUG].concat(t)),this._logHandler.apply(this,[this,Gn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Gn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gn.INFO].concat(t)),this._logHandler.apply(this,[this,Gn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gn.WARN].concat(t)),this._logHandler.apply(this,[this,Gn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gn.ERROR].concat(t)),this._logHandler.apply(this,[this,Gn.ERROR].concat(t))}}]),e}();var rr=function(){function e(t){$t(this,e),this.container=t}return Jt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ir="@firebase/app",ar="0.7.17",or=new nr("@firebase/app"),ur="[DEFAULT]",sr=(at(Yn={},ir,"fire-core"),at(Yn,"@firebase/app-compat","fire-core-compat"),at(Yn,"@firebase/analytics","fire-analytics"),at(Yn,"@firebase/analytics-compat","fire-analytics-compat"),at(Yn,"@firebase/app-check","fire-app-check"),at(Yn,"@firebase/app-check-compat","fire-app-check-compat"),at(Yn,"@firebase/auth","fire-auth"),at(Yn,"@firebase/auth-compat","fire-auth-compat"),at(Yn,"@firebase/database","fire-rtdb"),at(Yn,"@firebase/database-compat","fire-rtdb-compat"),at(Yn,"@firebase/functions","fire-fn"),at(Yn,"@firebase/functions-compat","fire-fn-compat"),at(Yn,"@firebase/installations","fire-iid"),at(Yn,"@firebase/installations-compat","fire-iid-compat"),at(Yn,"@firebase/messaging","fire-fcm"),at(Yn,"@firebase/messaging-compat","fire-fcm-compat"),at(Yn,"@firebase/performance","fire-perf"),at(Yn,"@firebase/performance-compat","fire-perf-compat"),at(Yn,"@firebase/remote-config","fire-rc"),at(Yn,"@firebase/remote-config-compat","fire-rc-compat"),at(Yn,"@firebase/storage","fire-gcs"),at(Yn,"@firebase/storage-compat","fire-gcs-compat"),at(Yn,"@firebase/firestore","fire-fst"),at(Yn,"@firebase/firestore-compat","fire-fst-compat"),at(Yn,"fire-js","fire-js"),at(Yn,"firebase","fire-js-all"),Yn),cr=new Map,lr=new Map;function fr(e,t){try{e.container.addComponent(t)}catch(n){or.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function hr(e,t){e.container.addOrOverwriteComponent(t)}function dr(e){var t=e.name;if(lr.has(t))return or.debug("There were multiple attempts to register component ".concat(t,".")),!1;lr.set(t,e);var n,r=sn(cr.values());try{for(r.s();!(n=r.n()).done;){fr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function pr(e,t){return e.container.getProvider(t)}function vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ur;pr(e,t).clearInstance(n)}function yr(){lr.clear()}var mr,gr,kr=(at(Jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),at(Jn,"bad-app-name","Illegal App name: '{$appName}"),at(Jn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),at(Jn,"app-deleted","Firebase App named '{$appName}' already deleted"),at(Jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),at(Jn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Jn),wr=new Nn("app","Firebase",kr),br=function(){function e(t,n,r){var i=this;$t(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",(function(){return i}),"PUBLIC"))}return Jt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}]),e}(),xr="9.6.7";function _r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ur,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wr.create("bad-app-name",{appName:String(i)});var a=cr.get(i);if(a){if(Dn(e,a.options)&&Dn(r,a.config))return a;throw wr.create("duplicate-app",{appName:i})}var o,u=new Qn(i),s=sn(lr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new br(e,r,u);return cr.set(i,l),l}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=cr.get(e);if(!t)throw wr.create("no-app",{appName:e});return t}function Ir(){return Array.from(cr.values())}function Sr(e){return Tr.apply(this,arguments)}function Tr(){return Tr=Qt(on.mark((function e(t){var n;return on.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!cr.has(n)){e.next=6;break}return cr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Cr(e,t,n){var r,i=null!==(r=sr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void or.warn(u.join(" "))}dr(new Bn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ar(e,t){if(null!==e&&"function"!==typeof e)throw wr.create("invalid-log-argument");!function(e,t){var n,r=sn($n);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Xn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Gn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Nr(e){var t;t=e,$n.forEach((function(e){e.setLogLevel(t)}))}mr="",dr(new Bn("platform-logger",(function(e){return new rr(e)}),"PRIVATE")),Cr(ir,ar,mr),Cr(ir,ar,"esm2017"),Cr("fire-js","");var Or=function(){function e(t,n){var r=this;$t(this,e),this._delegate=t,this.firebase=n,fr(t,new Bn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Jt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Sr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){fr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){hr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Pr=(at(gr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),at(gr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),gr),Rr=new Nn("app-compat","Firebase",Pr);var Dr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=_r(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Rn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Cr,setLogLevel:Nr,onLog:Ar,apps:null,SDK_VERSION:xr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(dr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Rr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&gn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Rn(n,e=e||ur))throw Rr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Or);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){gn(n,e)},createSubscribe:jn,ErrorFactory:Nn,deepExtend:gn}),n}(),Lr=new nr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Lr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Mr=self.firebase.SDK_VERSION;Mr&&Mr.indexOf("LITE")>=0&&Lr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Fr=Dr;!function(e){Cr("@firebase/app-compat","0.1.18",e)}();function Ur(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}function jr(){return jr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ur(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jr.apply(this,arguments)}Fr.registerVersion("firebase","9.6.7","app-compat");function Vr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var qr;Object.create;var zr="facebook.com",Br="github.com",Kr="google.com",Wr="password",Hr="twitter.com",Gr="EMAIL_SIGNIN",Qr="PASSWORD_RESET",$r="RECOVER_EMAIL",Yr="REVERT_SECOND_FACTOR_ADDITION",Jr="VERIFY_AND_CHANGE_EMAIL",Xr="VERIFY_EMAIL";function Zr(){return at({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ei=function(){var e;return at(e={},"admin-restricted-operation","This operation is restricted to administrators only."),at(e,"argument-error",""),at(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),at(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),at(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),at(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),at(e,"cordova-not-ready","Cordova framework is not ready."),at(e,"cors-unsupported","This browser is not supported."),at(e,"credential-already-in-use","This credential is already associated with a different user account."),at(e,"custom-token-mismatch","The custom token corresponds to a different audience."),at(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),at(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),at(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),at(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),at(e,"email-already-in-use","The email address is already in use by another account."),at(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),at(e,"expired-action-code","The action code has expired."),at(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),at(e,"internal-error","An internal AuthError has occurred."),at(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),at(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),at(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),at(e,"invalid-auth-event","An internal AuthError has occurred."),at(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),at(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),at(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),at(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),at(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),at(e,"invalid-email","The email address is badly formatted."),at(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),at(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),at(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),at(e,"invalid-credential","The supplied auth credential is malformed or has expired."),at(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),at(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),at(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),at(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),at(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),at(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),at(e,"wrong-password","The password is invalid or the user does not have a password."),at(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),at(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),at(e,"invalid-provider-id","The specified provider ID is invalid."),at(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),at(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),at(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),at(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),at(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),at(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),at(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),at(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),at(e,"missing-continue-uri","A continue URL must be provided in the request."),at(e,"missing-iframe-start","An internal AuthError has occurred."),at(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),at(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),at(e,"missing-multi-factor-info","No second factor identifier is provided."),at(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),at(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),at(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),at(e,"app-deleted","This instance of FirebaseApp has been deleted."),at(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),at(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),at(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),at(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),at(e,"no-auth-event","An internal AuthError has occurred."),at(e,"no-such-provider","User was not linked to an account with the given provider."),at(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),at(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),at(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),at(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),at(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),at(e,"provider-already-linked","User can only be linked to one identity for the given provider."),at(e,"quota-exceeded","The project's quota for this operation has been exceeded."),at(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),at(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),at(e,"rejected-credential","The request contains malformed or mismatching credentials."),at(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),at(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),at(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),at(e,"timeout","The operation has timed out."),at(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),at(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),at(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),at(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),at(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),at(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),at(e,"unverified-email","The operation requires a verified email."),at(e,"user-cancelled","The user did not grant your application the permissions it requested."),at(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),at(e,"user-disabled","The user account has been disabled by an administrator."),at(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),at(e,"user-signed-out",""),at(e,"weak-password","The password must be 6 characters long or more."),at(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),at(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ti=Zr,ni=new Nn("auth","Firebase",Zr()),ri=new nr("@firebase/auth");function ii(e){if(ri.logLevel<=Gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ri.error.apply(ri,["Auth (".concat(xr,"): ").concat(e)].concat(n))}}function ai(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ci.apply(void 0,[e].concat(n))}function oi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ci.apply(void 0,[e].concat(n))}function ui(e,t,n){var r=Object.assign(Object.assign({},ti()),at({},t,n));return new Nn("auth","Firebase",r).create(t,{appName:e.name})}function si(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ai(e,"argument-error"),ui(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ci(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ut(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ut(o)))}return ni.create.apply(ni,[e].concat(n))}function li(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ci.apply(void 0,[t].concat(r))}}function fi(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ii(t),new Error(t)}function hi(e,t){e||fi(t)}var di=new Map;function pi(e){hi(e instanceof Function,"Expected a class definition");var t=di.get(e);return t?(hi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,di.set(e,t),t)}function vi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yi(){return"http:"===mi()||"https:"===mi()}function mi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var gi=function(){function e(t,n){$t(this,e),this.shortDelay=t,this.longDelay=n,hi(n>t,"Short delay should be less than long delay!"),this.isMobile=_n()||Sn()}return Jt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yi()||In()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ki(e,t){hi(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var wi=function(){function e(){$t(this,e)}return Jt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),bi=(at(qr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),at(qr,"MISSING_CUSTOM_TOKEN","internal-error"),at(qr,"INVALID_IDENTIFIER","invalid-email"),at(qr,"MISSING_CONTINUE_URI","internal-error"),at(qr,"INVALID_PASSWORD","wrong-password"),at(qr,"MISSING_PASSWORD","internal-error"),at(qr,"EMAIL_EXISTS","email-already-in-use"),at(qr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),at(qr,"INVALID_IDP_RESPONSE","invalid-credential"),at(qr,"INVALID_PENDING_TOKEN","invalid-credential"),at(qr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),at(qr,"MISSING_REQ_TYPE","internal-error"),at(qr,"EMAIL_NOT_FOUND","user-not-found"),at(qr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),at(qr,"EXPIRED_OOB_CODE","expired-action-code"),at(qr,"INVALID_OOB_CODE","invalid-action-code"),at(qr,"MISSING_OOB_CODE","internal-error"),at(qr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),at(qr,"INVALID_ID_TOKEN","invalid-user-token"),at(qr,"TOKEN_EXPIRED","user-token-expired"),at(qr,"USER_NOT_FOUND","user-token-expired"),at(qr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),at(qr,"INVALID_CODE","invalid-verification-code"),at(qr,"INVALID_SESSION_INFO","invalid-verification-id"),at(qr,"INVALID_TEMPORARY_PROOF","invalid-credential"),at(qr,"MISSING_SESSION_INFO","missing-verification-id"),at(qr,"SESSION_EXPIRED","code-expired"),at(qr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),at(qr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),at(qr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),at(qr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),at(qr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),at(qr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),at(qr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),at(qr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),at(qr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),at(qr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),at(qr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),qr),xi=new gi(3e4,6e4);function _i(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ei(e,t,n,r){return Ii.apply(this,arguments)}function Ii(){return Ii=Qt(un().mark((function e(t,n,r,i){var a,o=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Si(t,a,Qt(un().mark((function e(){var a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Mn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",wi.fetch()(Ni(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Si(e,t,n){return Ti.apply(this,arguments)}function Ti(){return Ti=Qt(un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},bi),n),e.prev=2,a=new Oi(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Pi(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=fn(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Pi(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw Pi(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw ui(t,d,h);case 30:ai(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof An)){e.next=37;break}throw e.t0;case 37:ai(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Ti.apply(this,arguments)}function Ci(e,t,n,r){return Ai.apply(this,arguments)}function Ai(){return Ai=Qt(un().mark((function e(t,n,r,i){var a,o,u=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ei(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ai(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Ni(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ki(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Oi=function(){function e(t){var n=this;$t(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(oi(n.auth,"network-request-failed"))}),xi.get())}))}return Jt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Pi(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=oi(e,t,r);return i.customData._tokenResponse=n,i}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return Di=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Fi(e,t){return Ui.apply(this,arguments)}function Ui(){return Ui=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}function ji(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vi(){return Vi=Qt(un().mark((function e(t){var n,r,i,a,o,u,s=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=zn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,li((a=zi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ji(qi(a.auth_time)),issuedAtTime:ji(qi(a.iat)),expirationTime:ji(qi(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(e){return 1e3*Number(e)}function zi(e){var t=fn(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ii("JWT malformed, contained fewer than 3 sections"),null;try{var a=mn(r);return a?JSON.parse(a):(ii("Failed to decode base64 JWT payload"),null)}catch(o){return ii("Caught error parsing JWT payload as JSON",o),null}}function Bi(e,t){return Ki.apply(this,arguments)}function Ki(){return Ki=Qt(un().mark((function e(t,n){var r=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof An&&Wi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ki.apply(this,arguments)}function Wi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Hi=function(){function e(t){$t(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Jt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gi=function(){function e(t,n){$t(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Jt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ji(this.lastLoginAt),this.creationTime=ji(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Qi(e){return $i.apply(this,arguments)}function $i(){return $i=Qt(un().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Bi(t,Fi(r,{idToken:i}));case 6:li(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Xi(o.providerUserInfo):[],s=Ji(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Gi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Yi(){return(Yi=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zn(t),e.next=3,Qi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ut(n),Ut(t))}function Xi(e){return e.map((function(e){var t=e.providerId,n=Vr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Si(t,{},Qt(un().mark((function e(){var r,i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ni(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",wi.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}var ta=function(){function e(){$t(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Jt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){li(e.idToken,"internal-error"),li("undefined"!==typeof e.idToken,"internal-error"),li("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=zi(e);return li(t,"internal-error"),li("undefined"!==typeof t.exp,"internal-error"),li("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Qt(un().mark((function e(t){var n,r=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],li(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return fi("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(li("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(li("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(li("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function na(e,t){li("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ra=function(){function e(t){$t(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Vr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ut(a.providerData):[],this.metadata=new Gi(a.createdAt||void 0,a.lastLoginAt||void 0)}return Jt(e,[{key:"getIdToken",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(li(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vi.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Yi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(li(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){li(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Qt(un().mark((function e(t){var n,r,i=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Qi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Bi(this,Ri(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;li(k&&_,t,"internal-error");var E=ta.fromJSON(this.name,_);li("string"===typeof k,t,"internal-error"),na(f,t.name),na(h,t.name),li("boolean"===typeof w,t,"internal-error"),li("boolean"===typeof b,t,"internal-error"),na(d,t.name),na(p,t.name),na(v,t.name),na(y,t.name),na(m,t.name),na(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=Qt(un().mark((function t(n,r){var i,a,o,u=arguments;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ta).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Qi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ia=function(){function e(){$t(this,e),this.type="NONE",this.storage={}}return Jt(e,[{key:"_isAvailable",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ia.type="NONE";var aa=ia;function oa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ua=function(){function e(t,n,r){$t(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=oa(this.userKey,a.apiKey,o),this.fullPersistenceKey=oa("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Jt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ra._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Qt(un().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(pi(aa),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||pi(aa),u=oa(i,n.config.apiKey,n.name),s=null,c=sn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ra._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function sa(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ha(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ca(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pa(t))return"Blackberry";if(va(t))return"Webos";if(la(t))return"Safari";if((t.includes("chrome/")||fa(t))&&!t.includes("edge/"))return"Chrome";if(da(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/firefox\//i.test(e)}function la(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/crios\//i.test(e)}function ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/iemobile/i.test(e)}function da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/android/i.test(e)}function pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/blackberry/i.test(e)}function va(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/webos/i.test(e)}function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/iphone|ipad|ipod/i.test(e)}function ma(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return ya(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ga(){return Tn()&&10===document.documentMode}function ka(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return ya(e)||da(e)||va(e)||pa(e)||/windows phone/i.test(e)||ha(e)}function wa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=sa(xn());break;case"Worker":t="".concat(sa(xn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xr,"/").concat(r)}var ba=function(){function e(t,n){$t(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _a(this),this.idTokenSubscription=new _a(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ni,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return Jt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(Qt(un().mark((function r(){var i,a;return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ua.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Qt(un().mark((function e(t){var n,r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return li(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?zn(t):null)&&li(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Qt(un().mark((function e(t){var n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&li(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(pi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Nn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return li(n=t&&pi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ua.create(this,[pi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Qt(un().mark((function e(t){var n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return li(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return li(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wa(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=at({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xa(e){return zn(e)}var _a=function(){function e(t){var n=this;$t(this,e),this.auth=t,this.observer=null,this.addObserver=jn((function(e){return n.observer=e}))}return Jt(e,[{key:"next",get:function(){return li(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Ea(e,t,n){var r=xa(e);li(r._canInitEmulator,r,"emulator-config-failed"),li(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ia(t),o=function(e){var t=Ia(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Sa(r.substr(a.length+1))}}var o=fn(r.split(":"),2);return{host:o[0],port:Sa(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ia(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sa(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ta=function(){function e(t,n){$t(this,e),this.providerId=t,this.signInMethod=n}return Jt(e,[{key:"toJSON",value:function(){return fi("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return fi("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return fi("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return fi("not implemented")}}]),e}();function Ca(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:resetPassword",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}function Na(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Pa(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:update",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Da(e,t){return La.apply(this,arguments)}function La(){return La=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithPassword",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:sendOobCode",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t){return ja.apply(this,arguments)}function ja(){return ja=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,n));case 1:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Va(e,t){return qa.apply(this,arguments)}function qa(){return qa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,n));case 1:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function za(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,n));case 1:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function Ka(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ma(t,n));case 1:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ha(e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return $a=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}var Ya=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return $t(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Jt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Da(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ha(t,{email:this._email,oobCode:this._password}));case 5:ai(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Na(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Qa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ai(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ta);function Ja(e,t){return Xa.apply(this,arguments)}function Xa(){return Xa=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithIdp",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}var Za=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Jt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ja(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ja(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ja(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Vr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ta);function eo(e,t){return to.apply(this,arguments)}function to(){return to=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:sendVerificationCode",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}function no(){return no=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithPhoneNumber",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(){return ro=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(t,"POST","/v1/accounts:signInWithPhoneNumber",_i(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Pi(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}var io=at({},"USER_NOT_FOUND","user-not-found");function ao(){return ao=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithPhoneNumber",_i(t,r),io));case 2:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}var oo=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Jt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return no.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ro.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ao.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ta);var uo=function(){function e(t){var n,r,i,a,o,u;$t(this,e);var s=Fn(Un(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);li(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Jt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Fn(Un(e)).link,n=t?Fn(Un(t)).deep_link_id:null,r=Fn(Un(e)).deep_link_id;return(r?Fn(Un(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(gI){return null}}}]),e}();var so=function(){function e(){$t(this,e),this.providerId=e.PROVIDER_ID}return Jt(e,null,[{key:"credential",value:function(e,t){return Ya._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=uo.parseLink(t);return li(n,"argument-error"),Ya._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();so.PROVIDER_ID="password",so.EMAIL_PASSWORD_SIGN_IN_METHOD="password",so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var co=function(){function e(t){$t(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Jt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),lo=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Jt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ut(this.scopes)}}]),n}(co),fo=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return li(e.idToken||e.accessToken,"argument-error"),Za._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return li("providerId"in t&&"signInMethod"in t,"argument-error"),Za._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(lo),ho=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.call(this,"facebook.com")}return Jt(n,null,[{key:"credential",value:function(e){return Za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(gI){return null}}}]),n}(lo);ho.FACEBOOK_SIGN_IN_METHOD="facebook.com",ho.PROVIDER_ID="facebook.com";var po=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Jt(n,null,[{key:"credential",value:function(e,t){return Za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(gI){return null}}}]),n}(lo);po.GOOGLE_SIGN_IN_METHOD="google.com",po.PROVIDER_ID="google.com";var vo=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.call(this,"github.com")}return Jt(n,null,[{key:"credential",value:function(e){return Za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(gI){return null}}}]),n}(lo);vo.GITHUB_SIGN_IN_METHOD="github.com",vo.PROVIDER_ID="github.com";var yo=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Jt(n,[{key:"_getIdTokenResponse",value:function(e){return Ja(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ja(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ja(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ta),mo=function(e){Xt(n,e);var t=an(n);function n(e){return $t(this,n),li(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Jt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=yo.fromJSON(e);return li(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return yo._create(r,n)}catch(i){return null}}}]),n}(co),go=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.call(this,"twitter.com")}return Jt(n,null,[{key:"credential",value:function(e,t){return Za._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(gI){return null}}}]),n}(lo);function ko(e,t){return wo.apply(this,arguments)}function wo(){return wo=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signUp",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}go.TWITTER_SIGN_IN_METHOD="twitter.com",go.PROVIDER_ID="twitter.com";var bo=function(){function e(t){$t(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Jt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Qt(un().mark((function t(n,r,i){var a,o,u,s,c=arguments;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ra._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=xo(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Qt(un().mark((function t(n,r,i){var a;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=xo(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function xo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function _o(){return _o=Qt(un().mark((function e(t){var n,r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xa(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new bo({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ko(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,bo._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}var Eo=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a){var o,u;return $t(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(nn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Jt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(An);function Io(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Eo._fromErrorAndOperation(e,n,t,r);throw n}))}function So(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function To(e,t){return Co.apply(this,arguments)}function Co(){return Co=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,Oo(!0,r,n);case 3:return e.t0=Li,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=So(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function Ao(e,t){return No.apply(this,arguments)}function No(){return No=Qt(un().mark((function e(t,n){var r,i,a=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Bi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",bo._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Oo(e,t,n){return Po.apply(this,arguments)}function Po(){return Po=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(n);case 2:i=So(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",li(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Ro(e,t){return Do.apply(this,arguments)}function Do(){return Do=Qt(un().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Bi(t,Io(i,a,n,t),r);case 6:return li((o=e.sent).idToken,i,"internal-error"),li(u=zi(o.idToken),i,"internal-error"),s=u.sub,li(t.uid===s,i,"user-mismatch"),e.abrupt("return",bo._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ai(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Do.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=Qt(un().mark((function e(t,n){var r,i,a,o,u=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Io(t,i,n);case 4:return a=e.sent,e.next=7,bo._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lo(xa(t),n));case 1:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function jo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,Oo(!1,r,n.providerId);case 3:return e.abrupt("return",Ao(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t){return zo.apply(this,arguments)}function zo(){return(zo=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(zn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(t,"POST","/v1/accounts:signInWithCustomToken",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Wo(){return Wo=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xa(t),e.next=3,Bo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,bo._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}var Ho=function(){function e(t,n){$t(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Jt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Go._fromServerResponse(e,t):ai(e,"internal-error")}}]),e}(),Go=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Jt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ho);function Qo(e,t,n){var r;li((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),li("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(li(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(li(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function $o(){return $o=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),a={requestType:"PASSWORD_RESET",email:n},r&&Qo(i,a,r),e.next=5,Va(i,a);case 5:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Yo(){return Yo=Qt(un().mark((function e(t,n,r){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca(zn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Jo(){return Jo=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(zn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Jo.apply(this,arguments)}function Xo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,Ca(r,{oobCode:n});case 3:i=e.sent,li(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return li(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:li(i.mfaInfo,r,"internal-error");case 13:li(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ho._fromServerResponse(xa(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function eu(){return eu=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xo(zn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e,t,n){return nu.apply(this,arguments)}function nu(){return nu=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(t),e.next=3,ko(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,bo._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(){return ru=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),a={requestType:"EMAIL_SIGNIN",email:n},li(r.handleCodeInApp,i,"argument-error"),r&&Qo(i,a,r),e.next=6,za(i,a);case 6:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function iu(){return iu=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),li((a=so.credentialWithLink(n,r||vi()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Fo(i,a));case 4:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function au(e,t){return ou.apply(this,arguments)}function ou(){return ou=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:createAuthUri",_i(t,n)));case 1:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(){return uu=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yi()?vi():"http://localhost",i={identifier:n,continueUri:r},e.next=4,au(zn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function su(){return(su=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Qo(r.auth,a,n),e.next=8,Ua(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(){return(cu=Qt(un().mark((function e(t,n,r){var i,a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Qo(i.auth,o,r),e.next=8,Ka(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return fu=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ei(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function hu(){return(hu=Qt(un().mark((function e(t,n){var r,i,a,o,u,s,c;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=zn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Bi(a,lu(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function du(e,t,n){return pu.apply(this,arguments)}function pu(){return pu=Qt(un().mark((function e(t,n,r){var i,a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Bi(t,Na(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}var vu=Jt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$t(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),yu=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a){var o;return $t(this,n),(o=t.call(this,e,r,i)).username=a,o}return Jt(n)}(vu),mu=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"facebook.com",r)}return Jt(n)}(vu),gu=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Jt(n)}(yu),ku=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"google.com",r)}return Jt(n)}(vu),wu=function(e){Xt(n,e);var t=an(n);function n(e,r,i){return $t(this,n),t.call(this,e,"twitter.com",r,i)}return Jt(n)}(yu);function bu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=zi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new vu(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new mu(a,i);case"github.com":return new gu(a,i);case"google.com":return new ku(a,i);case"twitter.com":return new wu(a,i,e.screenName||null);case"custom":case"anonymous":return new vu(a,null);default:return new vu(a,r,i)}}(n)}var xu=function(){function e(t,n){$t(this,e),this.type=t,this.credential=n}return Jt(e,[{key:"toJSON",value:function(){return{multiFactorSession:at({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),_u=function(){function e(t,n,r){$t(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Jt(e,[{key:"resolveSignIn",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=xa(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ho._fromServerResponse(r,e)}));li(i.mfaPendingCredential,r,"internal-error");var o=xu._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Qt(un().mark((function e(t){var a,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,bo._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return li(n.user,r,"internal-error"),e.abrupt("return",bo._forOperation(n.user,n.operationType,u));case 17:ai(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Eu(e,t){return Ei(e,"POST","/v2/accounts/mfaEnrollment:start",_i(e,t))}function Iu(e,t){return Ei(e,"POST","/v2/accounts/mfaEnrollment:withdraw",_i(e,t))}var Su=function(){function e(t){var n=this;$t(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ho._fromServerResponse(t.auth,e)})))}))}return Jt(e,[{key:"getSession",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=xu,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Bi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Qt(un().mark((function e(t){var n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Bi(this.user,Iu(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Tu=new WeakMap;var Cu="__sak",Au=function(){function e(t,n){$t(this,e),this.storageRetriever=t,this.type=n}return Jt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch(gI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Nu=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=xn();return la(e)||ya(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ka(),e._shouldAllowMigration=!0,e}return Jt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ga()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Qt(un().mark((function e(t,r){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(Zt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(un().mark((function e(t){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(Zt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(Zt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Au);Nu.type="LOCAL";var Ou=Nu,Pu=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Jt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Au);Pu.type="SESSION";var Ru=Pu;function Du(e){return Promise.all(e.map(function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Lu=function(){function e(t){$t(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Jt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Qt(un().mark((function e(t){var n,r,i,a,o,u,s,c;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Du(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Mu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Lu.receivers=[];var Fu=function(){function e(t){$t(this,e),this.target=t,this.handlers=new Set}return Jt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Mu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Uu(){return window}function ju(){return"undefined"!==typeof Uu().WorkerGlobalScope&&"function"===typeof Uu().importScripts}function Vu(){return qu.apply(this,arguments)}function qu(){return(qu=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function zu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Bu="firebaseLocalStorageDb",Ku="firebaseLocalStorage",Wu="fbase_key",Hu=function(){function e(t){$t(this,e),this.request=t}return Jt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Gu(e,t){return e.transaction([Ku],t?"readwrite":"readonly").objectStore(Ku)}function Qu(){var e=indexedDB.deleteDatabase(Bu);return new Hu(e).toPromise()}function $u(){var e=indexedDB.open(Bu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ku,{keyPath:Wu})}catch(r){n(r)}})),e.addEventListener("success",Qt(un().mark((function n(){var r;return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ku)){n.next=12;break}return r.close(),n.next=5,Qu();case 5:return n.t0=t,n.next=8,$u();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Yu(e,t,n){return Ju.apply(this,arguments)}function Ju(){return Ju=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gu(t,!0).put((at(i={},Wu,n),at(i,"value",r),i)),e.abrupt("return",new Hu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function Xu(e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu(t,!1).get(n),e.next=3,new Hu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function es(e,t){var n=Gu(e,!0).delete(t);return new Hu(n).toPromise()}var ts=function(){function e(){$t(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Jt(e,[{key:"_openDb",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,$u();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ju()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Qt(un().mark((function e(){var t=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Lu._getInstance(ju()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Qt(un().mark((function e(n,r){var i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Qt(un().mark((function e(){var t,n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Fu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&zu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,$u();case 5:return t=e.sent,e.next=8,Yu(t,Cu,"1");case 8:return e.next=10,es(t,Cu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qt(un().mark((function e(t,n){var r=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Yu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Xu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qt(un().mark((function e(t){var n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return es(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Gu(e,!1).getAll();return new Hu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=sn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ts.type="LOCAL";var ns=ts;function rs(e,t){return Ei(e,"POST","/v2/accounts/mfaSignIn:start",_i(e,t))}function is(e){return as.apply(this,arguments)}function as(){return as=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function os(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=oi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function us(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ss=1e12,cs=function(){function e(t){$t(this,e),this.auth=t,this.counter=ss,this._widgets=new Map}return Jt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ls(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ss;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ss;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ss,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ls=function(){function e(t,n,r){var i=this;$t(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;li(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Jt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var fs=us("rcb"),hs=new gi(3e4,6e4),ds="https://www.google.com/recaptcha/api.js?",ps=function(){function e(){$t(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Uu().grecaptcha}return Jt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return li(vs(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Uu().grecaptcha):new Promise((function(r,i){var a=Uu().setTimeout((function(){i(oi(e,"network-request-failed"))}),hs.get());Uu()[fs]=function(){Uu().clearTimeout(a),delete Uu()[fs];var o=Uu().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(oi(e,"internal-error"))},os("".concat(ds,"?").concat(Mn({onload:fs,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(oi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Uu().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function vs(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ys=function(){function e(){$t(this,e)}return Jt(e,[{key:"load",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new cs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ms="recaptcha",gs={theme:"light",type:"image"},ks=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},gs),r=arguments.length>2?arguments[2]:void 0;$t(this,e),this.parameters=n,this.type=ms,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xa(r),this.isInvisible="invisible"===this.parameters.size,li("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;li(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ys:new ps,this.validateStartingState()}return Jt(e,[{key:"verify",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){li(!this.parameters.sitekey,this.auth,"argument-error"),li(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),li("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Uu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){li(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Qt(un().mark((function e(){var t,n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return li(yi()&&!ju(),this.auth,"internal-error"),e.next=3,ws();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,is(this.auth);case 8:li(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return li(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ws(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var bs=function(){function e(t,n){$t(this,e),this.verificationId=t,this.onConfirmation=n}return Jt(e,[{key:"confirm",value:function(e){var t=oo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function xs(){return xs=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(t),e.next=3,Ss(i,n,zn(r));case 3:return a=e.sent,e.abrupt("return",new bs(a,(function(e){return Fo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function _s(e,t,n){return Es.apply(this,arguments)}function Es(){return(Es=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),e.next=3,Oo(!1,i,"phone");case 3:return e.next=5,Ss(i.auth,n,zn(r));case 5:return a=e.sent,e.abrupt("return",new bs(a,(function(e){return jo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(){return(Is=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zn(t),e.next=3,Ss(i.auth,n,zn(r));case 3:return a=e.sent,e.abrupt("return",new bs(a,(function(e){return qo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e,t,n){return Ts.apply(this,arguments)}function Ts(){return Ts=Qt(un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,li("string"===typeof a,t,"argument-error"),li(r.type===ms,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return li("enroll"===u.type,t,"internal-error"),e.next=13,Eu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return li("signin"===u.type,t,"internal-error"),li(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,rs(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,eo(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ts.apply(this,arguments)}function Cs(){return(Cs=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao(zn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var As=function(){function e(t){$t(this,e),this.providerId=e.PROVIDER_ID,this.auth=xa(t)}return Jt(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ss(this.auth,e,zn(t))}}],[{key:"credential",value:function(e,t){return oo._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?oo._fromTokenResponse(n,r):null}}]),e}();function Ns(e,t){return t?pi(t):(li(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}As.PROVIDER_ID="phone",As.PHONE_SIGN_IN_METHOD="phone";var Os=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Jt(n,[{key:"_getIdTokenResponse",value:function(e){return Ja(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ja(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ja(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ta);function Ps(e){return Lo(e.auth,new Os(e),e.bypassAuthState)}function Rs(e){var t=e.auth,n=e.user;return li(n,t,"internal-error"),Ro(n,new Os(e),e.bypassAuthState)}function Ds(e){return Ls.apply(this,arguments)}function Ls(){return Ls=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,li(r=t.user,n,"internal-error"),e.abrupt("return",Ao(r,new Os(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}var Ms=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];$t(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Jt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Qt(un().mark((function t(n,r){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Qt(un().mark((function e(t){var n,r,i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ps;case"linkViaPopup":case"linkViaRedirect":return Ds;case"reauthViaPopup":case"reauthViaRedirect":return Rs;default:ai(this.auth,"internal-error")}}},{key:"resolve",value:function(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Fs=new gi(2e3,1e4);function Us(e,t,n){return js.apply(this,arguments)}function js(){return js=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(t),si(t,n,co),a=Ns(i,r),o=new Bs(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Vs(){return Vs=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si((i=zn(t)).auth,n,co),a=Ns(i.auth,r),o=new Bs(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function qs(e,t,n){return zs.apply(this,arguments)}function zs(){return zs=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si((i=zn(t)).auth,n,co),a=Ns(i.auth,r),o=new Bs(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}var Bs=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a,o){var u;return $t(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=nn(u),u}return Jt(n,[{key:"executeNotNull",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return li(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qt(un().mark((function e(){var t,n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hi(1===this.filter.length,"Popup operations only handle one event"),t=Mu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(oi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(oi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(oi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Fs.get())}()}}]),n}(Ms);Bs.currentPopupAction=null;var Ks=new Map,Ws=function(e){Xt(n,e);var t=an(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $t(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Jt(n,[{key:"execute",value:function(){var e=Qt(un().mark((function e(){var t,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ks.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Hs(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,jr(Zt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ks.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ks.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Qt(un().mark((function e(t){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",jr(Zt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",jr(Zt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ms);function Hs(e,t){return Gs.apply(this,arguments)}function Gs(){return Gs=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Js(n),i=Ys(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Qs(e,t){return $s.apply(this,arguments)}function $s(){return $s=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ys(t)._set(Js(n),"true"));case 1:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Ys(e){return pi(e._redirectPersistence)}function Js(e){return oa("pendingRedirect",e.config.apiKey,e.name)}function Xs(e,t,n){return function(e,t,n){return Zs.apply(this,arguments)}(e,t,n)}function Zs(){return Zs=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xa(t),si(t,n,co),a=Ns(i,r),e.next=5,Qs(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function ec(e,t,n){return function(e,t,n){return tc.apply(this,arguments)}(e,t,n)}function tc(){return tc=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si((i=zn(t)).auth,n,co),a=Ns(i.auth,r),e.next=5,Qs(a,i.auth);case 5:return e.next=7,sc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(e,t,n){return function(e,t,n){return rc.apply(this,arguments)}(e,t,n)}function rc(){return rc=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si((i=zn(t)).auth,n,co),a=Ns(i.auth,r),e.next=5,Oo(!1,i,n.providerId);case 5:return e.next=7,Qs(a,i.auth);case 7:return e.next=9,sc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return ac=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(t)._initializationPromise;case 2:return e.abrupt("return",oc(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t){return uc.apply(this,arguments)}function uc(){return uc=Qt(un().mark((function e(t,n){var r,i,a,o,u,s=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=xa(t),a=Ns(i,n),o=new Ws(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(e){return cc.apply(this,arguments)}function cc(){return(cc=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lc=function(){function e(t){$t(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Jt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!hc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(oi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(fc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function fc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function hc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function dc(e){return pc.apply(this,arguments)}function pc(){return pc=Qt(un().mark((function e(t){var n,r=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ei(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}var vc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yc=/^https?/;function mc(){return mc=Qt(un().mark((function e(t){var n,r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dc(t);case 4:n=e.sent,r=n.authorizedDomains,i=sn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!gc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ai(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),mc.apply(this,arguments)}function gc(e){var t=vi(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!yc.test(r))return!1;if(vc.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var kc=new gi(3e4,6e4);function wc(){var e=Uu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ut(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var bc=null;function xc(e){return bc=bc||function(e){return new Promise((function(t,n){var r,i,a;function o(){wc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){wc(),n(oi(e,"network-request-failed"))},timeout:kc.get()})}if(null===(i=null===(r=Uu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Uu().gapi)||void 0===a?void 0:a.load)){var u=us("iframefcb");return Uu()[u]=function(){gapi.load?o():n(oi(e,"network-request-failed"))},os("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw bc=null,e}))}(e),bc}var _c=new gi(5e3,15e3),Ec={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ic=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sc(e){var t=e.config;li(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ki(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:xr},i=Ic.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Mn(r).slice(1))}function Tc(e){return Cc.apply(this,arguments)}function Cc(){return Cc=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xc(t);case 2:return n=e.sent,li(r=Uu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Sc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ec,dontclear:!0},(function(e){return new Promise(function(){var n=Qt(un().mark((function n(r,i){var a,o,u;return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Uu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=oi(t,"network-request-failed"),o=Uu().setTimeout((function(){i(a)}),_c.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}var Ac={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nc="_blank",Oc="http://localhost",Pc=function(){function e(t){$t(this,e),this.window=t,this.associatedEvent=null}return Jt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Rc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ac),{width:r.toString(),height:i.toString(),top:a,left:o}),c=xn().toLowerCase();n&&(u=fa(c)?Nc:n),ca(c)&&(t=t||Oc,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=fn(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ma(c)&&"_self"!==u)return Dc(t||"",u),new Pc(null);var f=window.open(t||"",u,l);li(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Pc(f)}function Dc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Lc="__/auth/handler",Mc="emulator/auth/handler";function Fc(e,t,n,r,i,a){li(e.config.authDomain,e,"auth-domain-config-required"),li(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xr,eventId:i};if(t instanceof co){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=fn(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof lo){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Lc);return ki(t,Mc)}(e),"?").concat(Mn(d).slice(1))}var Uc="webStorageSupport",jc=function(){function e(){$t(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ru,this._completeRedirectFn=oc}return Jt(e,[{key:"_openPopup",value:function(){var e=Qt(un().mark((function e(t,n,r,i){var a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hi(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Fc(t,n,r,vi(),i),e.abrupt("return",Rc(t,o,Mu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qt(un().mark((function e(t,n,r,i){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Fc(t,n,r,vi(),i),Uu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(hi(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tc(t);case 2:return n=e.sent,r=new lc(t),n.register("authEvent",(function(e){return li(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Uc,{type:Uc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ai(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return mc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ka()||la()||ya()}}]),e}(),Vc=jc,qc=function(){function e(t){$t(this,e),this.factorId=t}return Jt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return fi("unexpected MultiFactorSessionType")}}}]),e}(),zc=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,"phone")).credential=e,r}return Jt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ei(e,"POST","/v2/accounts/mfaEnrollment:finalize",_i(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ei(e,"POST","/v2/accounts/mfaSignIn:finalize",_i(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(qc),Bc=function(){function e(){$t(this,e)}return Jt(e,null,[{key:"assertion",value:function(e){return zc._fromCredential(e)}}]),e}();Bc.FACTOR_ID="phone";var Kc,Wc="@firebase/auth",Hc="0.19.9",Gc=function(){function e(t){$t(this,e),this.auth=t,this.internalListeners=new Map}return Jt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){li(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Qc(){return window}Kc="Browser",dr(new Bn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){li(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),li(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:Kc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wa(Kc)},r=new ba(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),dr(new Bn("auth-internal",(function(e){return function(e){return new Gc(e)}(xa(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(Wc,Hc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Kc)),Cr(Wc,Hc,"esm2017");function $c(e,t,n){return Yc.apply(this,arguments)}function Yc(){return Yc=Qt(un().mark((function e(t,n,r){var i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Qc(),o=a.BuildInfo,hi(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,nl(n.sessionId);case 4:return u=e.sent,s={},ya()?s.ibi=o.packageName:da()?s.apn=o.packageName:ai(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Fc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function Jc(){return Jc=Qt(un().mark((function e(t){var n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qc(),r=n.BuildInfo,i={},ya()?i.iosBundleId=r.packageName:da()?i.androidPackageName=r.packageName:ai(t,"operation-not-supported-in-this-environment"),e.next=5,dc(t,i);case 5:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function Xc(e){var t=Qc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Zc(e,t,n){return el.apply(this,arguments)}function el(){return el=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(oi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),da()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),el.apply(this,arguments)}function tl(e){var t,n,r,i,a,o,u,s,c,l,f=Qc();li("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),li("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),li("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),li("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),li("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function nl(e){return rl.apply(this,arguments)}function rl(){return(rl=Qt(un().mark((function e(t){var n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=il(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function il(e){if(hi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var al=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Jt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),jr(Zt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(lc);function ol(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:fl(),postBody:null,tenantId:e.tenantId,error:oi(e,"no-auth-event")}}function ul(e,t){return hl()._set(dl(e),t)}function sl(e){return cl.apply(this,arguments)}function cl(){return cl=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hl()._get(dl(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,hl()._remove(dl(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function ll(e,t){var n,r,i=function(e){var t=pl(e),n=t.link?decodeURIComponent(t.link):void 0,r=pl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return pl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=pl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?oi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function fl(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function hl(){return pi(Ou)}function dl(e){return oa("authEvent",e.config.apiKey,e.name)}function pl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=cn(t=n)||Mt(t)||Ft(t)||ln();r[0];return Fn(r.slice(1).join("?"))}var vl=function(){function e(){$t(this,e),this._redirectPersistence=Ru,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=oc}return Jt(e,[{key:"_initialize",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new al(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ai(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Qt(un().mark((function e(t,n,r,i){var a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ks.clear(),e.next=10,this._originValidation(t);case 10:return o=ol(t,r,i),e.next=13,ul(t,o);case 13:return e.next=15,$c(t,o,n);case 15:return u=e.sent,e.next=18,Xc(u);case 18:return s=e.sent,e.abrupt("return",Zc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Qc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,sl(e);case 2:t.onEvent(ml());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Qt(un().mark((function n(r){var i,a;return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,sl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ll(i,r.url)),t.onEvent(a||ml());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Qc().handleOpenURL=function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),yl=vl;function ml(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:oi("no-auth-event")}}function gl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function kl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return!("file:"!==gl()&&"ionic:"!==gl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function wl(){return Tn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return/Edge\/\d+/.test(e)}function xl(){try{var e=self.localStorage,t=Mu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();return wl()||bl(e)}()||Cn()}catch(n){return _l()&&Cn()}return!1}function _l(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function El(){return("http:"===gl()||"https:"===gl()||In()||kl())&&!(Sn()||En())&&xl()&&!_l()}function Il(){return kl()&&"undefined"!==typeof document}function Sl(){return Tl.apply(this,arguments)}function Tl(){return(Tl=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Il()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cl={LOCAL:"local",NONE:"none",SESSION:"session"},Al=li,Nl="persistence";function Ol(e,t){Al(Object.values(Cl).includes(t),e,"invalid-persistence-type"),Sn()?Al(t!==Cl.SESSION,e,"unsupported-persistence-type"):En()?Al(t===Cl.NONE,e,"unsupported-persistence-type"):_l()?Al(t===Cl.NONE||t===Cl.LOCAL&&Cn(),e,"unsupported-persistence-type"):Al(t===Cl.NONE||xl(),e,"unsupported-persistence-type")}function Pl(e){return Rl.apply(this,arguments)}function Rl(){return Rl=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Dl(),r=oa(Nl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Rl.apply(this,arguments)}function Dl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ll=li,Ml=function(){function e(){$t(this,e),this.browserResolver=pi(Vc),this.cordovaResolver=pi(yl),this.underlyingResolver=null,this._redirectPersistence=Ru,this._completeRedirectFn=oc}return Jt(e,[{key:"_initialize",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Qt(un().mark((function e(t,n,r,i){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qt(un().mark((function e(t,n,r,i){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Il()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ll(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Sl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fl(e){return e.unwrap()}function Ul(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Bl(e,function(e,t){var n,r=zn(e),i=t;return li(t.customData.operationType,r,"argument-error"),li(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_u._fromError(r,i)}(e,t));else if(r){var i=jl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function jl(e){var t=(e instanceof An?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof An)&&"temporaryProof"in t&&"phoneNumber"in t)return As.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Wr)return null;switch(r){case Kr:n=po;break;case zr:n=ho;break;case Br:n=vo;break;case Hr:n=go;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?yo._create(r,u):Za._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new fo(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof An?n.credentialFromError(e):n.credentialFromResult(e)}function Vl(e,t){return t.catch((function(t){throw t instanceof An&&Ul(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,jl(t)),additionalUserInfo:bu(e),user:Kl.getOrCreate(r)}}))}function ql(e,t){return zl.apply(this,arguments)}function zl(){return zl=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Vl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}var Bl=function(){function e(t,n){$t(this,e),this.resolver=n,this.auth=t.wrapped()}return Jt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Vl(Fl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Kl=function(){function e(t){$t(this,e),this._delegate=t,this.multiFactor=function(e){var t=zn(e);return Tu.has(t)||Tu.set(t,Su._fromUser(t)),Tu.get(t)}(t)}return Jt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vl(this.auth,jo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ql(this.auth,_s(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vl(this.auth,qs(this._delegate,t,Ml)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pl(xa(this.auth));case 2:return e.abrupt("return",nc(this._delegate,t,Ml));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vl(this.auth,qo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ql(this.auth,function(e,t,n){return Is.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Vl(this.auth,function(e,t,n){return Vs.apply(this,arguments)}(this._delegate,e,Ml))}},{key:"reauthenticateWithRedirect",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pl(xa(this.auth));case 2:return e.abrupt("return",ec(this._delegate,t,Ml));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return su.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,To(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return du(zn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return du(zn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Cs.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return hu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return cu.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Kl.USER_MAP=new WeakMap;var Wl=li,Hl=function(){function e(t,n){if($t(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Wl(r,"invalid-api-key",{appName:t.name}),Wl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ml:void 0;this._delegate=n.initialize({options:{persistence:Ql(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ei),this.linkUnderlyingAuth()}return Jt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Kl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Ea(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Jo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Xo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Yo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vl(this._delegate,tu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return uu.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=uo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wl(El(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ic(this._delegate,Ml);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Vl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){xa(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Gl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Gl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ru.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return $o.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ol(this._delegate,t),e.t0=t,e.next=e.t0===Cl.SESSION?4:e.t0===Cl.LOCAL?6:e.t0===Cl.NONE?11:13;break;case 4:return n=Ru,e.abrupt("break",14);case 6:return e.next=8,pi(ns)._isAvailable();case 8:return r=e.sent,n=r?ns:Ou,e.abrupt("break",14);case 11:return n=aa,e.abrupt("break",14);case 13:return e.abrupt("return",ai("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Vl(this._delegate,function(e){return _o.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Vl(this._delegate,Fo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Vl(this._delegate,function(e,t){return Wo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Vl(this._delegate,function(e,t,n){return Fo(zn(e),so.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Vl(this._delegate,function(e,t,n){return iu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ql(this._delegate,function(e,t,n){return xs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wl(El(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Vl(this._delegate,Us(this._delegate,t,Ml)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wl(El(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Pl(this._delegate);case 3:return e.abrupt("return",Xs(this._delegate,t,Ml));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return eu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Gl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Kl.getOrCreate(e))},error:t,complete:n}}function Ql(e,t){var n=function(e,t){var n=Dl();if(!n)return[];var r=oa(Nl,e,t);switch(n.getItem(r)){case Cl.NONE:return[aa];case Cl.LOCAL:return[ns,Ru];case Cl.SESSION:return[Ru];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ns)||n.push(ns),"undefined"!==typeof window)for(var r=0,i=[Ou,Ru];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(aa)||n.push(aa),n}Hl.Persistence=Cl;var $l=function(){function e(){$t(this,e),this.providerId="phone",this._delegate=new As(Fl(Fr.auth()))}return Jt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return As.credential(e,t)}}]),e}();$l.PHONE_SIGN_IN_METHOD=As.PHONE_SIGN_IN_METHOD,$l.PROVIDER_ID=As.PROVIDER_ID;var Yl,Jl=li,Xl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fr.app();$t(this,e),Jl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ks(t,n,i.auth()),this.type=this._delegate.type}return Jt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Yl=Fr).INTERNAL.registerComponent(new Bn("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Hl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Gr,PASSWORD_RESET:Qr,RECOVER_EMAIL:$r,REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:Jr,VERIFY_EMAIL:Xr}},EmailAuthProvider:so,FacebookAuthProvider:ho,GithubAuthProvider:vo,GoogleAuthProvider:po,OAuthProvider:fo,SAMLAuthProvider:mo,PhoneAuthProvider:$l,PhoneMultiFactorGenerator:Bc,RecaptchaVerifier:Xl,TwitterAuthProvider:go,Auth:Hl,AuthCredential:Ta,Error:An}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Yl.registerVersion("@firebase/auth-compat","0.2.9");var Zl,ef="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},tf={},nf=nf||{},rf=ef||self;function af(){}function of(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function uf(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var sf="closure_uid_"+(1e9*Math.random()>>>0),cf=0;function lf(e,t,n){return e.call.apply(e.bind,arguments)}function ff(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hf(e,t,n){return(hf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lf:ff).apply(null,arguments)}function df(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function pf(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function vf(){this.s=this.s,this.o=this.o}var yf={};vf.prototype.s=!1,vf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,sf)&&e[sf]||(e[sf]=++cf)}(this);delete yf[e]}},vf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var mf=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},gf=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function kf(e){return Array.prototype.concat.apply([],arguments)}function wf(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function bf(e){return/^[\s\xa0]*$/.test(e)}var xf,_f=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ef(e,t){return-1!=e.indexOf(t)}function If(e,t){return e<t?-1:e>t?1:0}e:{var Sf=rf.navigator;if(Sf){var Tf=Sf.userAgent;if(Tf){xf=Tf;break e}}xf=""}function Cf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Af(e){var t={};for(var n in e)t[n]=e[n];return t}var Nf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Of(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Nf.length;a++)n=Nf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Pf(e){return Pf[" "](e),e}Pf[" "]=af;var Rf,Df=Ef(xf,"Opera"),Lf=Ef(xf,"Trident")||Ef(xf,"MSIE"),Mf=Ef(xf,"Edge"),Ff=Mf||Lf,Uf=Ef(xf,"Gecko")&&!(Ef(xf.toLowerCase(),"webkit")&&!Ef(xf,"Edge"))&&!(Ef(xf,"Trident")||Ef(xf,"MSIE"))&&!Ef(xf,"Edge"),jf=Ef(xf.toLowerCase(),"webkit")&&!Ef(xf,"Edge");function Vf(){var e=rf.document;return e?e.documentMode:void 0}e:{var qf="",zf=function(){var e=xf;return Uf?/rv:([^\);]+)(\)|;)/.exec(e):Mf?/Edge\/([\d\.]+)/.exec(e):Lf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):jf?/WebKit\/(\S+)/.exec(e):Df?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zf&&(qf=zf?zf[1]:""),Lf){var Bf=Vf();if(null!=Bf&&Bf>parseFloat(qf)){Rf=String(Bf);break e}}Rf=qf}var Kf,Wf={};function Hf(){return function(e){var t=Wf;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=_f(String(Rf)).split("."),n=_f("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=If(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||If(0==a[2].length,0==o[2].length)||If(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(rf.document&&Lf){var Gf=Vf();Kf=Gf||(parseInt(Rf,10)||void 0)}else Kf=void 0;var Qf=Kf,$f=function(){if(!rf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{rf.addEventListener("test",af,t),rf.removeEventListener("test",af,t)}catch(n){}return e}();function Yf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Jf(e,t){if(Yf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Uf){e:{try{Pf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Jf.Z.h.call(this)}}Yf.prototype.h=function(){this.defaultPrevented=!0},pf(Jf,Yf);var Xf={2:"touch",3:"pen",4:"mouse"};Jf.prototype.h=function(){Jf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Zf="closure_listenable_"+(1e6*Math.random()|0),eh=0;function th(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++eh,this.ca=this.fa=!1}function nh(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function rh(e){this.src=e,this.g={},this.h=0}function ih(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=mf(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(nh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ah(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}rh.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ah(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new th(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var oh="closure_lm_"+(1e6*Math.random()|0),uh={};function sh(e,t,n,r,i){if(r&&r.once)return lh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)sh(e,t[a],n,r,i);return null}return n=mh(n),e&&e[Zf]?e.N(t,n,uf(r)?!!r.capture:!!r,i):ch(e,t,n,!1,r,i)}function ch(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=uf(i)?!!i.capture:!!i,u=vh(e);if(u||(e[oh]=u=new rh(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ph;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$f||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(dh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function lh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)lh(e,t[a],n,r,i);return null}return n=mh(n),e&&e[Zf]?e.O(t,n,uf(r)?!!r.capture:!!r,i):ch(e,t,n,!0,r,i)}function fh(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)fh(e,t[a],n,r,i);else r=uf(r)?!!r.capture:!!r,n=mh(n),e&&e[Zf]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ah(a=e.g[t],n,r,i))&&(nh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=vh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ah(t,n,r,i)),(n=-1<e?t[e]:null)&&hh(n))}function hh(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Zf])ih(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(dh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=vh(t))?(ih(n,e),0==n.h&&(n.src=null,t[oh]=null)):nh(e)}}}function dh(e){return e in uh?uh[e]:uh[e]="on"+e}function ph(e,t){if(e.ca)e=!0;else{t=new Jf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&hh(e),e=n.call(r,t)}return e}function vh(e){return(e=e[oh])instanceof rh?e:null}var yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function mh(e){return"function"===typeof e?e:(e[yh]||(e[yh]=function(t){return e.handleEvent(t)}),e[yh])}function gh(){vf.call(this),this.i=new rh(this),this.P=this,this.I=null}function kh(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Yf(t,e);else if(t instanceof Yf)t.target=t.target||e;else{var i=t;Of(t=new Yf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=wh(o,r,!0,t)&&i}if(i=wh(o=t.g=e,r,!0,t)&&i,i=wh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=wh(o=t.g=n[a],r,!1,t)&&i}function wh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ih(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}pf(gh,vf),gh.prototype[Zf]=!0,gh.prototype.removeEventListener=function(e,t,n,r){fh(this,e,t,n,r)},gh.prototype.M=function(){if(gh.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)nh(n[r]);delete t.g[e],t.h--}}this.I=null},gh.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},gh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bh=rf.JSON.stringify;function xh(){var e=Nh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _h,Eh=function(){function e(){$t(this,e),this.h=this.g=null}return Jt(e,[{key:"add",value:function(e,t){var n=Ih.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ih=new(function(){function e(t,n){$t(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Jt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Sh}),(function(e){return e.reset()})),Sh=function(){function e(){$t(this,e),this.next=this.g=this.h=null}return Jt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Th(e){rf.setTimeout((function(){throw e}),0)}function Ch(e,t){_h||function(){var e=rf.Promise.resolve(void 0);_h=function(){e.then(Oh)}}(),Ah||(_h(),Ah=!0),Nh.add(e,t)}var Ah=!1,Nh=new Eh;function Oh(){for(var e;e=xh();){try{e.h.call(e.g)}catch(n){Th(n)}var t=Ih;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ah=!1}function Ph(e,t){gh.call(this),this.h=e||1,this.g=t||rf,this.j=hf(this.kb,this),this.l=Date.now()}function Rh(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Dh(e,t,n){if("function"===typeof e)n&&(e=hf(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hf(e.handleEvent,e)}return 2147483647<Number(t)?-1:rf.setTimeout(e,t||0)}function Lh(e){e.g=Dh((function(){e.g=null,e.i&&(e.i=!1,Lh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}pf(Ph,gh),(Zl=Ph.prototype).da=!1,Zl.S=null,Zl.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kh(this,"tick"),this.da&&(Rh(this),this.start()))}},Zl.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zl.M=function(){Ph.Z.M.call(this),Rh(this),delete this.g};var Mh=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Jt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Lh(this)}},{key:"M",value:function(){jr(Zt(n.prototype),"M",this).call(this),this.g&&(rf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(vf);function Fh(e){vf.call(this),this.h=e,this.g={}}pf(Fh,vf);var Uh=[];function jh(e,t,n,r){Array.isArray(n)||(n&&(Uh[0]=n.toString()),n=Uh);for(var i=0;i<n.length;i++){var a=sh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Vh(e){Cf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&hh(e)}),e),e.g={}}function qh(){this.g=!0}function zh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return bh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Fh.prototype.M=function(){Fh.Z.M.call(this),Vh(this)},Fh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qh.prototype.Aa=function(){this.g=!1},qh.prototype.info=function(){};var Bh={},Kh=null;function Wh(){return Kh=Kh||new gh}function Hh(e){Yf.call(this,Bh.Ma,e)}function Gh(e){var t=Wh();kh(t,new Hh(t,e))}function Qh(e,t){Yf.call(this,Bh.STAT_EVENT,e),this.stat=t}function $h(e){var t=Wh();kh(t,new Qh(t,e))}function Yh(e,t){Yf.call(this,Bh.Na,e),this.size=t}function Jh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return rf.setTimeout((function(){e()}),t)}Bh.Ma="serverreachability",pf(Hh,Yf),Bh.STAT_EVENT="statevent",pf(Qh,Yf),Bh.Na="timingevent",pf(Yh,Yf);var Xh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ed(){}function td(e){return e.h||(e.h=e.i())}function nd(){}ed.prototype.h=null;var rd,id={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ad(){Yf.call(this,"d")}function od(){Yf.call(this,"c")}function ud(){}function sd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Fh(this),this.P=ld,e=Ff?125:void 0,this.W=new Ph(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cd}function cd(){this.i=null,this.g="",this.h=!1}pf(ad,Yf),pf(od,Yf),pf(ud,ed),ud.prototype.g=function(){return new XMLHttpRequest},ud.prototype.i=function(){return{}},rd=new ud;var ld=45e3,fd={},hd={};function dd(e,t,n){e.K=1,e.v=Md(Nd(t)),e.s=n,e.U=!0,pd(e,null)}function pd(e,t){e.F=Date.now(),gd(e),e.A=Nd(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),$d(n.h,"t",r),e.C=0,n=e.l.H,e.h=new cd,e.g=Jp(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Mh(hf(e.Ia,e,e.g),e.O)),jh(e.V,e.g,"readystatechange",e.gb),t=e.H?Af(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Gh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function vd(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function yd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=md(e,n))==hd){4==t&&(e.o=4,$h(14),i=!1),zh(e.j,e.m,null,"[Incomplete Response]");break}if(r==fd){e.o=4,$h(15),zh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zh(e.j,e.m,r,null),_d(e,r)}vd(e)&&r!=hd&&r!=fd&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,$h(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bp(t),t.L=!0,$h(11))):(zh(e.j,e.m,n,"[Invalid Chunked Response]"),xd(e),bd(e))}function md(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?hd:(n=Number(t.substring(n,r)),isNaN(n)?fd:(r+=1)+n>t.length?hd:(t=t.substr(r,n),e.C=r+n,t))}function gd(e){e.Y=Date.now()+e.P,kd(e,e.P)}function kd(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Jh(hf(e.eb,e),t)}function wd(e){e.B&&(rf.clearTimeout(e.B),e.B=null)}function bd(e){0==e.l.G||e.I||Hp(e.l,e)}function xd(e){wd(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Rh(e.W),Vh(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function _d(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||rp(n.i,e)))if(n.I=e.N,!e.J&&rp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Wp(n),Dp(n)}zp(n),$h(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Jh(hf(n.ab,n),6e3));if(1>=np(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Qp(n,11)}else if((e.J||n.g==e)&&Wp(n),!bf(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Ef(l,"spdy")||Ef(l,"quic")||Ef(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ip(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ld(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Yp(r,r.H?r.la:null,r.W),d.J){ap(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(wd(p),gd(p)),r.g=d}else qp(r);0<n.l.length&&Fp(n)}else"stop"!=a[0]&&"close"!=a[0]||Qp(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Qp(n,7):Rp(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Gh(4)}catch(a){}}function Ed(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(of(e)||"string"===typeof e)gf(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(of(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(of(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Id(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Id)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Sd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Td(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Td(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Td(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Zl=sd.prototype).setTimeout=function(e){this.P=e},Zl.gb=function(e){e=e.target;var t=this.L;t&&3==Cp(e)?t.l():this.Ia(e)},Zl.Ia=function(e){try{if(e==this.g)e:{var t=Cp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ff||this.g&&(this.h.h||this.g.ga()||Ap(this.g)))){this.I||4!=t||7==n||Gh(8==n||0>=r?3:2),wd(this);var i=this.g.ba();this.N=i;t:if(vd(this)){var a=Ap(this.g);e="";var o=a.length,u=4==Cp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){xd(this),bd(this);var s="";break t}this.h.i=new rf.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bf(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,$h(12),xd(this),bd(this);break e}zh(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_d(this,i)}this.U?(yd(this,t,s),Ff&&this.i&&3==t&&(jh(this.V,this.W,"tick",this.fb),this.W.start())):(zh(this.j,this.m,s,null),_d(this,s)),4==t&&xd(this),this.i&&!this.I&&(4==t?Hp(this.l,this):(this.i=!1,gd(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,$h(12)):(this.o=0,$h(13)),xd(this),bd(this)}}}catch(t){}},Zl.fb=function(){if(this.g){var e=Cp(this.g),t=this.g.ga();this.C<t.length&&(wd(this),yd(this,e,t),this.i&&4!=e&&gd(this))}},Zl.cancel=function(){this.I=!0,xd(this)},Zl.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Gh(3),$h(17)),xd(this),this.o=2,bd(this)):kd(this,this.Y-e)},(Zl=Id.prototype).R=function(){Sd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Zl.T=function(){return Sd(this),this.g.concat()},Zl.get=function(e,t){return Td(this.h,e)?this.h[e]:t},Zl.set=function(e,t){Td(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Zl.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Cd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ad(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ad){this.g=void 0!==t?t:e.g,Od(this,e.j),this.s=e.s,Pd(this,e.i),Rd(this,e.m),this.l=e.l,t=e.h;var n=new Wd;n.i=t.i,t.g&&(n.g=new Id(t.g),n.h=t.h),Dd(this,n),this.o=e.o}else e&&(n=String(e).match(Cd))?(this.g=!!t,Od(this,n[1]||"",!0),this.s=Fd(n[2]||""),Pd(this,n[3]||"",!0),Rd(this,n[4]),this.l=Fd(n[5]||"",!0),Dd(this,n[6]||"",!0),this.o=Fd(n[7]||"")):(this.g=!!t,this.h=new Wd(null,this.g))}function Nd(e){return new Ad(e)}function Od(e,t,n){e.j=n?Fd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Pd(e,t,n){e.i=n?Fd(t,!0):t}function Rd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Dd(e,t,n){t instanceof Wd?(e.h=t,function(e,t){t&&!e.j&&(Hd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gd(this,t),$d(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ud(t,Bd)),e.h=new Wd(t,e.g))}function Ld(e,t,n){e.h.set(t,n)}function Md(e){return Ld(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ud(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,jd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function jd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ad.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ud(t,Vd,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ud(t,Vd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ud(n,"/"==n.charAt(0)?zd:qd,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ud(n,Kd)),e.join("")};var Vd=/[#\/\?@]/g,qd=/[#\?:]/g,zd=/[#\?]/g,Bd=/[#\?@]/g,Kd=/#/g;function Wd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Hd(e){e.g||(e.g=new Id,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gd(e,t){Hd(e),t=Yd(e,t),Td(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Td((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Sd(e)))}function Qd(e,t){return Hd(e),t=Yd(e,t),Td(e.g.h,t)}function $d(e,t,n){Gd(e,t),0<n.length&&(e.i=null,e.g.set(Yd(e,t),wf(n)),e.h+=n.length)}function Yd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Zl=Wd.prototype).add=function(e,t){Hd(this),this.i=null,e=Yd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Zl.forEach=function(e,t){Hd(this),this.g.forEach((function(n,r){gf(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Zl.T=function(){Hd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Zl.R=function(e){Hd(this);var t=[];if("string"===typeof e)Qd(this,e)&&(t=kf(t,this.g.get(Yd(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=kf(t,e[n])}return t},Zl.set=function(e,t){return Hd(this),this.i=null,Qd(this,e=Yd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Zl.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Zl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Jd=Jt((function e(t,n){$t(this,e),this.h=t,this.g=n}));function Xd(e){this.l=e||ep,rf.PerformanceNavigationTiming?e=0<(e=rf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(rf.g&&rf.g.Ea&&rf.g.Ea()&&rf.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zd,ep=10;function tp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function np(e){return e.h?1:e.g?e.g.size:0}function rp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ip(e,t){e.g?e.g.add(t):e.h=t}function ap(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function op(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=sn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return wf(e.i)}function up(){}function sp(){this.g=new up}function cp(e,t,n){var r=n||"";try{Ed(e,(function(e,n){var i=e;uf(e)&&(i=bh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function lp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function fp(e){this.l=e.$b||null,this.j=e.ib||!1}function hp(e,t){gh.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=dp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xd.prototype.cancel=function(){if(this.i=op(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=sn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},up.prototype.stringify=function(e){return rf.JSON.stringify(e,void 0)},up.prototype.parse=function(e){return rf.JSON.parse(e,void 0)},pf(fp,ed),fp.prototype.g=function(){return new hp(this.l,this.j)},fp.prototype.i=(Zd={},function(){return Zd}),pf(hp,gh);var dp=0;function pp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function vp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yp(e)}function yp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Zl=hp.prototype).open=function(e,t){if(this.readyState!=dp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yp(this)},Zl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||rf).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Zl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vp(this)),this.readyState=dp},Zl.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yp(this)),this.g&&(this.readyState=3,yp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof rf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Zl.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vp(this):yp(this),3==this.readyState&&pp(this)}},Zl.Ua=function(e){this.g&&(this.response=this.responseText=e,vp(this))},Zl.Ta=function(e){this.g&&(this.response=e,vp(this))},Zl.ha=function(){this.g&&vp(this)},Zl.setRequestHeader=function(e,t){this.v.append(e,t)},Zl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Zl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(hp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var mp=rf.JSON.parse;function gp(e){gh.call(this),this.headers=new Id,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kp,this.K=this.L=!1}pf(gp,gh);var kp="",wp=/^https?$/i,bp=["POST","PUT"];function xp(e){return"content-type"==e.toLowerCase()}function _p(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ep(e),Sp(e)}function Ep(e){e.D||(e.D=!0,kh(e,"complete"),kh(e,"error"))}function Ip(e){if(e.h&&"undefined"!=typeof nf&&(!e.C[1]||4!=Cp(e)||2!=e.ba()))if(e.v&&4==Cp(e))Dh(e.Fa,0,e);else if(kh(e,"readystatechange"),4==Cp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Cd)[1]||null;if(!a&&rf.self&&rf.self.location){var o=rf.self.location.protocol;a=o.substr(0,o.length-1)}i=!wp.test(a?a.toLowerCase():"")}t=i}if(t)kh(e,"complete"),kh(e,"success");else{e.m=6;try{var u=2<Cp(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Ep(e)}}finally{Sp(e)}}}function Sp(e,t){if(e.g){Tp(e);var n=e.g,r=e.C[0]?af:null;e.g=null,e.C=null,t||kh(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Tp(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(rf.clearTimeout(e.A),e.A=null)}function Cp(e){return e.g?e.g.readyState:0}function Ap(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case kp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(MT){return null}}function Np(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Cf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ld(e,t,n))}function Op(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pp(e){this.za=0,this.l=[],this.h=new qh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Op("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Op("baseRetryDelayMs",5e3,e),this.$a=Op("retryDelaySeedMs",1e4,e),this.Ya=Op("forwardChannelMaxRetries",2,e),this.ra=Op("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Xd(e&&e.concurrentRequestLimit),this.Ca=new sp,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Rp(e){if(Lp(e),3==e.G){var t=e.V++,n=Nd(e.F);Ld(n,"SID",e.J),Ld(n,"RID",t),Ld(n,"TYPE","terminate"),jp(e,n),(t=new sd(e,e.h,t,void 0)).K=2,t.v=Md(Nd(n)),n=!1,rf.navigator&&rf.navigator.sendBeacon&&(n=rf.navigator.sendBeacon(t.v.toString(),"")),!n&&rf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jp(t.l,null),t.g.ea(t.v)),t.F=Date.now(),gd(t)}$p(e)}function Dp(e){e.g&&(Bp(e),e.g.cancel(),e.g=null)}function Lp(e){Dp(e),e.u&&(rf.clearTimeout(e.u),e.u=null),Wp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&rf.clearTimeout(e.m),e.m=null)}function Mp(e,t){e.l.push(new Jd(e.Za++,t)),3==e.G&&Fp(e)}function Fp(e){tp(e.i)||e.m||(e.m=!0,Ch(e.Ha,e),e.C=0)}function Up(e,t){var n;n=t?t.m:e.V++;var r=Nd(e.F);Ld(r,"SID",e.J),Ld(r,"RID",n),Ld(r,"AID",e.U),jp(e,r),e.o&&e.s&&Np(r,e.o,e.s),n=new sd(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Vp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ip(e.i,n),dd(n,r,t)}function jp(e,t){e.j&&Ed({},(function(e,n){Ld(t,n,e)}))}function Vp(e,t,n){n=Math.min(e.l.length,n);var r=e.j?hf(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{cp(l,o,"req"+c+"_")}catch(Iv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function qp(e){e.g||e.u||(e.Y=1,Ch(e.Ga,e),e.A=0)}function zp(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Jh(hf(e.Ga,e),Gp(e,e.A)),e.A++,!0)}function Bp(e){null!=e.B&&(rf.clearTimeout(e.B),e.B=null)}function Kp(e){e.g=new sd(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Nd(e.oa);Ld(t,"RID","rpc"),Ld(t,"SID",e.J),Ld(t,"CI",e.N?"0":"1"),Ld(t,"AID",e.U),jp(e,t),Ld(t,"TYPE","xmlhttp"),e.o&&e.s&&Np(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Md(Nd(t)),n.s=null,n.U=!0,pd(n,e)}function Wp(e){null!=e.v&&(rf.clearTimeout(e.v),e.v=null)}function Hp(e,t){var n=null;if(e.g==t){Wp(e),Bp(e),e.g=null;var r=2}else{if(!rp(e.i,t))return;n=t.D,ap(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;kh(r=Wh(),new Yh(r,n,t,i)),Fp(e)}else qp(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(np(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Jh(hf(e.Ha,e,t),Gp(e,e.C)),e.C++,!0))}(e,t)||2==r&&zp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qp(e,5);break;case 4:Qp(e,10);break;case 3:Qp(e,6);break;default:Qp(e,2)}}function Gp(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Qp(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=hf(e.jb,e);n||(n=new Ad("//www.google.com/images/cleardot.gif"),rf.location&&"http"==rf.location.protocol||Od(n,"https"),Md(n)),function(e,t){var n=new qh;if(rf.Image){var r=new Image;r.onload=df(lp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=df(lp,n,r,"TestLoadImage: error",!1,t),r.onabort=df(lp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=df(lp,n,r,"TestLoadImage: timeout",!1,t),rf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $h(2);e.G=0,e.j&&e.j.va(t),$p(e),Lp(e)}function $p(e){e.G=0,e.I=-1,e.j&&(0==op(e.i).length&&0==e.l.length||(e.i.i.length=0,wf(e.l),e.l.length=0),e.j.ua())}function Yp(e,t,n){var r=function(e){return e instanceof Ad?Nd(e):new Ad(e,void 0)}(n);if(""!=r.i)t&&Pd(r,t+"."+r.i),Rd(r,r.m);else{var i=rf.location;r=function(e,t,n,r){var i=new Ad(null,void 0);return e&&Od(i,e),t&&Pd(i,t),n&&Rd(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Cf(e.aa,(function(e,t){Ld(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ld(r,t,n),Ld(r,"VER",e.ma),jp(e,r),r}function Jp(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new gp(new fp({ib:!0})):new gp(e.qa)).L=e.H,t}function Xp(){}function Zp(){if(Lf&&!(10<=Number(Qf)))throw Error("Environmental error: no available transport.")}function ev(e,t){gh.call(this),this.g=new Pp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!bf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bf(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new rv(this)}function tv(e){ad.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function nv(){od.call(this),this.status=1}function rv(e){this.g=e}(Zl=gp.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rd.g(),this.C=this.u?td(this.u):td(rd),this.g.onreadystatechange=hf(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void _p(this,a)}e=n||"";var i=new Id(this.headers);r&&Ed(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=xp,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=rf.FormData&&e instanceof rf.FormData,!(0<=mf(bp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tp(this),0<this.B&&((this.K=function(e){return Lf&&Hf()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hf(this.pa,this)):this.A=Dh(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){_p(this,a)}},Zl.pa=function(){"undefined"!=typeof nf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kh(this,"timeout"),this.abort(8))},Zl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kh(this,"complete"),kh(this,"abort"),Sp(this))},Zl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sp(this,!0)),gp.Z.M.call(this)},Zl.Fa=function(){this.s||(this.F||this.v||this.l?Ip(this):this.cb())},Zl.cb=function(){Ip(this)},Zl.ba=function(){try{return 2<Cp(this)?this.g.status:-1}catch(Zd){return-1}},Zl.ga=function(){try{return this.g?this.g.responseText:""}catch(Zd){return""}},Zl.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mp(t)}},Zl.Da=function(){return this.m},Zl.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Zl=Pp.prototype).ma=8,Zl.G=1,Zl.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(MT){}},Zl.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new sd(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Of(n=Af(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Vp(this,t,r),Ld(i=Nd(this.F),"RID",e),Ld(i,"CVER",22),this.D&&Ld(i,"X-HTTP-Session-Id",this.D),jp(this,i),this.o&&n&&Np(i,this.o,n),ip(this.i,t),this.Ra&&Ld(i,"TYPE","init"),this.ja?(Ld(i,"$req",r),Ld(i,"SID","null"),t.$=!0,dd(t,i,null)):dd(t,i,r),this.G=2}}else 3==this.G&&(e?Up(this,e):0==this.l.length||tp(this.i)||Up(this))},Zl.Ga=function(){if(this.u=null,Kp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Jh(hf(this.bb,this),e)}},Zl.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$h(10),Dp(this),Kp(this))},Zl.ab=function(){null!=this.v&&(this.v=null,Dp(this),zp(this),$h(19))},Zl.jb=function(e){e?(this.h.info("Successfully pinged google.com"),$h(2)):(this.h.info("Failed to ping google.com"),$h(1))},(Zl=Xp.prototype).xa=function(){},Zl.wa=function(){},Zl.va=function(){},Zl.ua=function(){},Zl.Oa=function(){},Zp.prototype.g=function(e,t){return new ev(e,t)},pf(ev,gh),ev.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ch(hf(e.hb,e,t))),$h(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Yp(e,null,e.W),Fp(e)},ev.prototype.close=function(){Rp(this.g)},ev.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Mp(this.g,t)}else this.v?((t={}).__data__=bh(e),Mp(this.g,t)):Mp(this.g,e)},ev.prototype.M=function(){this.g.j=null,delete this.j,Rp(this.g),delete this.g,ev.Z.M.call(this)},pf(tv,ad),pf(nv,od),pf(rv,Xp),rv.prototype.xa=function(){kh(this.g,"a")},rv.prototype.wa=function(e){kh(this.g,new tv(e))},rv.prototype.va=function(e){kh(this.g,new nv(e))},rv.prototype.ua=function(){kh(this.g,"b")},Zp.prototype.createWebChannel=Zp.prototype.g,ev.prototype.send=ev.prototype.u,ev.prototype.open=ev.prototype.m,ev.prototype.close=ev.prototype.close,Xh.NO_ERROR=0,Xh.TIMEOUT=8,Xh.HTTP_ERROR=6,Zh.COMPLETE="complete",nd.EventType=id,id.OPEN="a",id.CLOSE="b",id.ERROR="c",id.MESSAGE="d",gh.prototype.listen=gh.prototype.N,gp.prototype.listenOnce=gp.prototype.O,gp.prototype.getLastError=gp.prototype.La,gp.prototype.getLastErrorCode=gp.prototype.Da,gp.prototype.getStatus=gp.prototype.ba,gp.prototype.getResponseJson=gp.prototype.Qa,gp.prototype.getResponseText=gp.prototype.ga,gp.prototype.send=gp.prototype.ea;var iv=tf.createWebChannelTransport=function(){return new Zp},av=tf.getStatEventTarget=function(){return Wh()},ov=tf.ErrorCode=Xh,uv=tf.EventType=Zh,sv=tf.Event=Bh,cv=tf.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lv=tf.FetchXmlHttpFactory=fp,fv=tf.WebChannel=nd,hv=tf.XhrIo=gp,dv="@firebase/firestore",pv=function(){function e(t){$t(this,e),this.uid=t}return Jt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();pv.UNAUTHENTICATED=new pv(null),pv.GOOGLE_CREDENTIALS=new pv("google-credentials-uid"),pv.FIRST_PARTY=new pv("first-party-uid"),pv.MOCK_USER=new pv("mock-user");var vv="9.6.7",yv=new nr("@firebase/firestore");function mv(){return yv.logLevel}function gv(e){if(yv.logLevel<=Gn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bv);yv.debug.apply(yv,["Firestore (".concat(vv,"): ").concat(e)].concat(Ut(i)))}}function kv(e){if(yv.logLevel<=Gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bv);yv.error.apply(yv,["Firestore (".concat(vv,"): ").concat(e)].concat(Ut(i)))}}function wv(e){if(yv.logLevel<=Gn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(bv);yv.warn.apply(yv,["Firestore (".concat(vv,"): ").concat(e)].concat(Ut(i)))}}function bv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function xv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(vv,") INTERNAL ASSERTION FAILED: ")+e;throw kv(t),new Error(t)}function _v(e,t){e||xv()}function Ev(e,t){return e}var Iv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sv=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Jt(n)}(An),Tv=Jt((function e(){var t=this;$t(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Cv=Jt((function e(t,n){$t(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Av=function(){function e(){$t(this,e)}return Jt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(pv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Nv=function(){function e(t){$t(this,e),this.token=t,this.changeListener=null}return Jt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ov=function(){function e(t){$t(this,e),this.t=t,this.currentUser=pv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Jt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Tv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Tv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){gv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(gv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(gv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(_v("string"==typeof n.accessToken),new Cv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return _v(null===e||"string"==typeof e),new pv(e)}}]),e}(),Pv=Jt((function e(t,n,r){$t(this,e),this.type="FirstParty",this.user=pv.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Rv=function(){function e(t,n,r){$t(this,e),this.h=t,this.l=n,this.m=r}return Jt(e,[{key:"getToken",value:function(){return Promise.resolve(new Pv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(pv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Dv=Jt((function e(t){$t(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Lv=function(){function e(t){$t(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Jt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&gv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,gv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){gv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):gv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(_v("string"==typeof t.token),e.p=t.token,new Dv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Mv=function(){function e(t,n){var r=this;$t(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Jt(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Fv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Mv.A=-1;var Uv=function(){function e(){$t(this,e)}return Jt(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Fv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function jv(e,t){return e<t?-1:e>t?1:0}function Vv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function qv(e){return e+"\0"}var zv=function(){function e(t,n){if($t(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Sv(Iv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Sv(Iv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Sv(Iv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Sv(Iv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Jt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?jv(this.nanoseconds,e.nanoseconds):jv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Bv=function(){function e(t){$t(this,e),this.timestamp=t}return Jt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new zv(0,0))}}]),e}();function Kv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Hv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Gv=function(){function e(t,n,r){$t(this,e),void 0===n?n=0:n>t.length&&xv(),void 0===r?r=t.length-n:r>t.length-n&&xv(),this.segments=t,this.offset=n,this.len=r}return Jt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qv=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ut(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),$v=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yv=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return $v.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Sv(Iv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Sv(Iv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Sv(Iv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),Jv=function(){function e(t){$t(this,e),this.fields=t,t.sort(Yv.comparator)}return Jt(e,[{key:"covers",value:function(e){var t,n=sn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Vv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Xv=function(e){function t(e){$t(this,t),this.binaryString=e}return Jt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return jv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Xv.EMPTY_BYTE_STRING=new Xv("");var Zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ey(e){if(_v(!!e),"string"==typeof e){var t=0,n=Zv.exec(e);if(_v(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ty(e.seconds),nanos:ty(e.nanos)}}function ty(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ny(e){return"string"==typeof e?Xv.fromBase64String(e):Xv.fromUint8Array(e)}function ry(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iy(e){var t=e.mapValue.fields.__previous_value__;return ry(t)?iy(t):t}function ay(e){var t=ey(e.mapValue.fields.__local_write_time__.timestampValue);return new zv(t.seconds,t.nanos)}var oy=Jt((function e(t,n,r,i,a,o,u,s){$t(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),uy=function(){function e(t,n){$t(this,e),this.projectId=t,this.database=n||"(default)"}return Jt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function sy(e){return null==e}function cy(e){return 0===e&&1/e==-1/0}function ly(e){return"number"==typeof e&&Number.isInteger(e)&&!cy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fy=function(){function e(t){$t(this,e),this.path=t}return Jt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qv.fromString(t))}},{key:"fromName",value:function(t){return new e(Qv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qv.emptyPath())}},{key:"comparator",value:function(e,t){return Qv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qv(t.slice()))}}]),e}(),hy={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function dy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ry(e)?4:10:xv()}function py(e,t){if(e===t)return!0;var n=dy(e);if(n!==dy(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ay(e).isEqual(ay(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ey(e.timestampValue),r=ey(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ny(e.bytesValue).isEqual(ny(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ty(e.geoPointValue.latitude)===ty(t.geoPointValue.latitude)&&ty(e.geoPointValue.longitude)===ty(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ty(e.integerValue)===ty(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ty(e.doubleValue),r=ty(t.doubleValue);return n===r?cy(n)===cy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Vv(e.arrayValue.values||[],t.arrayValue.values||[],py);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Kv(n)!==Kv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!py(n[i],r[i])))return!1;return!0}(e,t);default:return xv()}}function vy(e,t){return void 0!==(e.values||[]).find((function(e){return py(e,t)}))}function yy(e,t){if(e===t)return 0;var n=dy(e),r=dy(t);if(n!==r)return jv(n,r);switch(n){case 0:return 0;case 1:return jv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ty(e.integerValue||e.doubleValue),r=ty(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return my(e.timestampValue,t.timestampValue);case 4:return my(ay(e),ay(t));case 5:return jv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ny(e),r=ny(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=jv(n[i],r[i]);if(0!==a)return a}return jv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=jv(ty(e.latitude),ty(t.latitude));return 0!==n?n:jv(ty(e.longitude),ty(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=yy(n[i],r[i]);if(a)return a}return jv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=jv(r[o],a[o]);if(0!==u)return u;var s=yy(n[r[o]],i[a[o]]);if(0!==s)return s}return jv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xv()}}function my(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jv(e,t);var n=ey(e),r=ey(t),i=jv(n.seconds,r.seconds);return 0!==i?i:jv(n.nanos,r.nanos)}function gy(e){return ky(e)}function ky(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ey(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ny(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=sn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ky(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=sn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ky(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):xv();var t,n}function wy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function by(e){return!!e&&"integerValue"in e}function xy(e){return!!e&&"arrayValue"in e}function _y(e){return!!e&&"nullValue"in e}function Ey(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Iy(e){return!!e&&"mapValue"in e}function Sy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Wv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Sy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Sy(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Ty=function(){function e(t){$t(this,e),this.value=t}return Jt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Iy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sy(t)}},{key:"setAll",value:function(e){var t=this,n=Yv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Sy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Iy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return py(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Iy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Wv(t,(function(t,n){return e[t]=n}));var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Sy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cy(e){var t=[];return Wv(e.fields,(function(e,n){var r=new Yv([e]);if(Iy(n)){var i=Cy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=sn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Jv(t)}var Ay=function(){function e(t,n,r,i,a,o){$t(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Jt(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ty.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ty.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Bv.min(),Bv.min(),Ty.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Bv.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Bv.min(),Ty.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Bv.min(),Ty.empty(),2)}}]),e}(),Ny=Jt((function e(t,n,r,i){$t(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Ny.UNKNOWN_ID=-1;var Oy=Jt((function e(t,n){$t(this,e),this.fieldPath=t,this.kind=n})),Py=function(){function e(t,n){$t(this,e),this.sequenceNumber=t,this.offset=n}return Jt(e,null,[{key:"empty",value:function(){return new e(0,Ry.min())}}]),e}(),Ry=function(){function e(t,n,r){$t(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Jt(e,null,[{key:"min",value:function(){return new e(Bv.min(),fy.empty(),-1)}}]),e}(),Dy=Jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;$t(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Ly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Dy(e,t,n,r,i,a,o)}function My(e){var t=Ev(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+gy(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),sy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return gy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return gy(e)})).join(",")),t.P=n}return t.P}function Fy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Yy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!py(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xy(e.startAt,t.startAt)&&Xy(e.endAt,t.endAt)}function Uy(e){return fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var jy=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(yy(t,this.value)):null!==t&&dy(this.value)===dy(t)&&this.V(yy(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xv()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new Vy(e,t,r):"array-contains"===t?new Ky(e,r):"in"===t?new Wy(e,r):"not-in"===t?new Hy(e,r):"array-contains-any"===t?new Gy(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new qy(e,n):new zy(e,n)}}]),n}(function(){return Jt((function e(){$t(this,e)}))}()),Vy=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this,e,r,i)).key=fy.fromName(i.referenceValue),a}return Jt(n,[{key:"matches",value:function(e){var t=fy.comparator(e.key,this.key);return this.V(t)}}]),n}(jy),qy=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,"in",r)).keys=By("in",r),i}return Jt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(jy),zy=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,"not-in",r)).keys=By("not-in",r),i}return Jt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(jy);function By(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fy.fromName(e.referenceValue)}))}var Ky=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"array-contains",r)}return Jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return xy(t)&&vy(t.arrayValue,this.value)}}]),n}(jy),Wy=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"in",r)}return Jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&vy(this.value.arrayValue,t)}}]),n}(jy),Hy=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"not-in",r)}return Jt(n,[{key:"matches",value:function(e){if(vy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!vy(this.value.arrayValue,t)}}]),n}(jy),Gy=function(e){Xt(n,e);var t=an(n);function n(e,r){return $t(this,n),t.call(this,e,"array-contains-any",r)}return Jt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!xy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return vy(t.value.arrayValue,e)}))}}]),n}(jy),Qy=Jt((function e(t,n){$t(this,e),this.position=t,this.inclusive=n})),$y=Jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";$t(this,e),this.field=t,this.dir=n}));function Yy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Jy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?fy.comparator(fy.fromName(o.referenceValue),n.key):yy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Xy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!py(e.position[n],t.position[n]))return!1;return!0}var Zy=Jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;$t(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function em(e,t,n,r,i,a,o,u){return new Zy(e,t,n,r,i,a,o,u)}function tm(e){return new Zy(e)}function nm(e){return!sy(e.limit)&&"F"===e.limitType}function rm(e){return!sy(e.limit)&&"L"===e.limitType}function im(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function am(e){var t,n=sn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function om(e){return null!==e.collectionGroup}function um(e){var t=Ev(e);if(null===t.D){t.D=[];var n=am(t),r=im(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new $y(n)),t.D.push(new $y(Yv.keyField(),"asc"));else{var i,a=!1,o=sn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new $y(Yv.keyField(),s))}}}return t.D}function sm(e){var t=Ev(e);if(!t.C)if("F"===t.limitType)t.C=Ly(t.path,t.collectionGroup,um(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=sn(um(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new $y(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Qy(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Qy(t.startAt.position,!t.startAt.inclusive):null;t.C=Ly(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function cm(e,t,n){return new Zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lm(e,t){return Fy(sm(e),sm(t))&&e.limitType===t.limitType}function fm(e){return"".concat(My(sm(e)),"|lt:").concat(e.limitType)}function hm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(gy(t.value));var t})).join(", "),"]")),sy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return gy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return gy(e)})).join(",")),"Target(".concat(t,")")}(sm(e)),"; limitType=").concat(e.limitType,")")}function dm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=sn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Jy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,um(e),t))&&!(e.endAt&&!function(e,t,n){var r=Jy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,um(e),t))}(e,t)}function pm(e){return function(t,n){var r,i=!1,a=sn(um(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=vm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function vm(e,t,n){var r=e.field.isKeyField()?fy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yy(r,i):xv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xv()}}function ym(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cy(t)?"-0":t}}function mm(e){return{integerValue:""+e}}function gm(e,t){return ly(t)?mm(t):ym(e,t)}var km=Jt((function e(){$t(this,e),this._=void 0}));function wm(e,t,n){return e instanceof _m?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Em?Im(e,t):e instanceof Sm?Tm(e,t):function(e,t){var n=xm(e,t),r=Am(n)+Am(e.k);return by(n)&&by(e.k)?mm(r):ym(e.O,r)}(e,t)}function bm(e,t,n){return e instanceof Em?Im(e,t):e instanceof Sm?Tm(e,t):n}function xm(e,t){return e instanceof Cm?by(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var _m=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n)}(km),Em=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).elements=e,r}return Jt(n)}(km);function Im(e,t){var n,r=Nm(t),i=sn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return py(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sm=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).elements=e,r}return Jt(n)}(km);function Tm(e,t){var n,r=Nm(t),i=sn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!py(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Cm=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).O=e,i.k=r,i}return Jt(n)}(km);function Am(e){return ty(e.integerValue||e.doubleValue)}function Nm(e){return xy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Om=Jt((function e(t,n){$t(this,e),this.field=t,this.transform=n}));var Pm=Jt((function e(t,n){$t(this,e),this.version=t,this.transformResults=n})),Rm=function(){function e(t,n){$t(this,e),this.updateTime=t,this.exists=n}return Jt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Dm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Lm=Jt((function e(){$t(this,e)}));function Mm(e,t,n){e instanceof qm?function(e,t,n){var r=e.value.clone(),i=Km(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zm?function(e,t,n){if(Dm(e.precondition,t)){var r=Km(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fm(e,t,n){e instanceof qm?function(e,t,n){if(Dm(e.precondition,t)){var r=e.value.clone(),i=Wm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Vm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof zm?function(e,t,n){if(Dm(e.precondition,t)){var r=Wm(e.fieldTransforms,n,t),i=t.data;i.setAll(Bm(e)),i.setAll(r),t.convertToFoundDocument(Vm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Dm(e.precondition,t)&&t.convertToNoDocument(Bv.min())}(e,t)}function Um(e,t){var n,r=null,i=sn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=xm(a.transform,o||null);null!=u&&(null==r&&(r=Ty.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Em&&t instanceof Em||e instanceof Sm&&t instanceof Sm?Vv(e.elements,t.elements,py):e instanceof Cm&&t instanceof Cm?py(e.k,t.k):e instanceof _m&&t instanceof _m}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Vm(e){return e.isFoundDocument()?e.version:Bv.min()}var qm=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return $t(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Jt(n)}(Lm),zm=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return $t(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Jt(n)}(Lm);function Bm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Km(e,t,n){var r=new Map;_v(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,bm(o,u,n[i]))}return r}function Wm(e,t,n){var r,i=new Map,a=sn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,wm(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hm,Gm,Qm=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Jt(n)}(Lm),$m=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Jt(n)}(Lm),Ym=Jt((function e(t){$t(this,e),this.count=t}));function Jm(e){switch(e){default:return xv();case Iv.CANCELLED:case Iv.UNKNOWN:case Iv.DEADLINE_EXCEEDED:case Iv.RESOURCE_EXHAUSTED:case Iv.INTERNAL:case Iv.UNAVAILABLE:case Iv.UNAUTHENTICATED:return!1;case Iv.INVALID_ARGUMENT:case Iv.NOT_FOUND:case Iv.ALREADY_EXISTS:case Iv.PERMISSION_DENIED:case Iv.FAILED_PRECONDITION:case Iv.ABORTED:case Iv.OUT_OF_RANGE:case Iv.UNIMPLEMENTED:case Iv.DATA_LOSS:return!0}}function Xm(e){if(void 0===e)return kv("GRPC error has no .code"),Iv.UNKNOWN;switch(e){case Hm.OK:return Iv.OK;case Hm.CANCELLED:return Iv.CANCELLED;case Hm.UNKNOWN:return Iv.UNKNOWN;case Hm.DEADLINE_EXCEEDED:return Iv.DEADLINE_EXCEEDED;case Hm.RESOURCE_EXHAUSTED:return Iv.RESOURCE_EXHAUSTED;case Hm.INTERNAL:return Iv.INTERNAL;case Hm.UNAVAILABLE:return Iv.UNAVAILABLE;case Hm.UNAUTHENTICATED:return Iv.UNAUTHENTICATED;case Hm.INVALID_ARGUMENT:return Iv.INVALID_ARGUMENT;case Hm.NOT_FOUND:return Iv.NOT_FOUND;case Hm.ALREADY_EXISTS:return Iv.ALREADY_EXISTS;case Hm.PERMISSION_DENIED:return Iv.PERMISSION_DENIED;case Hm.FAILED_PRECONDITION:return Iv.FAILED_PRECONDITION;case Hm.ABORTED:return Iv.ABORTED;case Hm.OUT_OF_RANGE:return Iv.OUT_OF_RANGE;case Hm.UNIMPLEMENTED:return Iv.UNIMPLEMENTED;case Hm.DATA_LOSS:return Iv.DATA_LOSS;default:return xv()}}(Gm=Hm||(Hm={}))[Gm.OK=0]="OK",Gm[Gm.CANCELLED=1]="CANCELLED",Gm[Gm.UNKNOWN=2]="UNKNOWN",Gm[Gm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gm[Gm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gm[Gm.NOT_FOUND=5]="NOT_FOUND",Gm[Gm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gm[Gm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gm[Gm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gm[Gm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gm[Gm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gm[Gm.ABORTED=10]="ABORTED",Gm[Gm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gm[Gm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gm[Gm.INTERNAL=13]="INTERNAL",Gm[Gm.UNAVAILABLE=14]="UNAVAILABLE",Gm[Gm.DATA_LOSS=15]="DATA_LOSS";var Zm=function(){function e(t,n){$t(this,e),this.comparator=t,this.root=n||tg.EMPTY}return Jt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new eg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new eg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new eg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new eg(this.root,e,this.comparator,!0)}}]),e}(),eg=function(){function e(t,n,r,i){$t(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Jt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tg=function(){function e(t,n,r,i,a){$t(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Jt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw xv();if(this.right.isRed())throw xv();var e=this.left.check();if(e!==this.right.check())throw xv();return e+(this.isRed()?0:1)}}]),e}();tg.EMPTY=null,tg.RED=!0,tg.BLACK=!1,tg.EMPTY=new(function(){function e(){$t(this,e),this.size=0}return Jt(e,[{key:"key",get:function(){throw xv()}},{key:"value",get:function(){throw xv()}},{key:"color",get:function(){throw xv()}},{key:"left",get:function(){throw xv()}},{key:"right",get:function(){throw xv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ng=function(){function e(t){$t(this,e),this.comparator=t,this.data=new Zm(this.comparator)}return Jt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rg=function(){function e(t){$t(this,e),this.iter=t}return Jt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ig(e){return e.hasNext()?e.getNext():void 0}var ag=new Zm(fy.comparator);function og(){return ag}var ug=new Zm(fy.comparator);function sg(){return ug}var cg=new Zm(fy.comparator),lg=new ng(fy.comparator);function fg(){for(var e=lg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hg=new ng(jv);function dg(){return hg}var pg=function(){function e(t,n,r,i,a){$t(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Jt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,vg.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Bv.min(),r,dg(),og(),fg())}}]),e}(),vg=function(){function e(t,n,r,i,a){$t(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Jt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Xv.EMPTY_BYTE_STRING,n,fg(),fg(),fg())}}]),e}(),yg=Jt((function e(t,n,r,i){$t(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),mg=Jt((function e(t,n){$t(this,e),this.targetId=t,this.F=n})),gg=Jt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$t(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),kg=function(){function e(){$t(this,e),this.B=0,this.L=xg(),this.U=Xv.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Jt(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=fg(),t=fg(),n=fg();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xv()}})),new vg(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=xg()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),wg=function(){function e(t){$t(this,e),this.nt=t,this.st=new Map,this.it=og(),this.rt=bg(),this.ot=new ng(jv)}return Jt(e,[{key:"ct",value:function(e){var t,n=sn(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=sn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:xv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(Uy(i))if(0===n){var a=new fy(i.path);this.at(t,a,Ay.newNoDocument(a,Bv.min()))}else _v(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Uy(a.target)){var o=new fy(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,Ay.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=fg();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new pg(e,n,this.ot,this.it,r);return this.it=og(),this.rt=bg(),this.ot=new ng(jv),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new kg,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new ng(jv),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||gv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new kg),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function bg(){return new Zm(fy.comparator)}function xg(){return new Zm(fy.comparator)}var _g={asc:"ASCENDING",desc:"DESCENDING"},Eg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ig=Jt((function e(t,n){$t(this,e),this.databaseId=t,this.N=n}));function Sg(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tg(e,t){return e.N?t.toBase64():t.toUint8Array()}function Cg(e,t){return Sg(e,t.toTimestamp())}function Ag(e){return _v(!!e),Bv.fromTimestamp(function(e){var t=ey(e);return new zv(t.seconds,t.nanos)}(e))}function Ng(e,t){return function(e){return new Qv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Og(e){var t=Qv.fromString(e);return _v(ek(t)),t}function Pg(e,t){return Ng(e.databaseId,t.path)}function Rg(e,t){var n=Og(t);if(n.get(1)!==e.databaseId.projectId)throw new Sv(Iv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Sv(Iv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fy(Fg(n))}function Dg(e,t){return Ng(e.databaseId,t)}function Lg(e){var t=Og(e);return 4===t.length?Qv.emptyPath():Fg(t)}function Mg(e){return new Qv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fg(e){return _v(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ug(e,t,n){return{name:Pg(e,t),fields:n.value.mapValue.fields}}function jg(e,t,n){var r=Rg(e,t.name),i=Ag(t.updateTime),a=new Ty({mapValue:{fields:t.fields}}),o=Ay.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vg(e,t){return"found"in t?function(e,t){_v(!!t.found),t.found.name,t.found.updateTime;var n=Rg(e,t.found.name),r=Ag(t.found.updateTime),i=new Ty({mapValue:{fields:t.found.fields}});return Ay.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){_v(!!t.missing),_v(!!t.readTime);var n=Rg(e,t.missing),r=Ag(t.readTime);return Ay.newNoDocument(n,r)}(e,t):xv()}function qg(e,t){var n;if(t instanceof qm)n={update:Ug(e,t.key,t.value)};else if(t instanceof Qm)n={delete:Pg(e,t.key)};else if(t instanceof zm)n={update:Ug(e,t.key,t.data),updateMask:Zg(t.fieldMask)};else{if(!(t instanceof $m))return xv();n={verify:Pg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof _m)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Em)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cm)return{fieldPath:t.field.canonicalString(),increment:n.k};throw xv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xv()}(e,t.precondition)),n}function zg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Rm.updateTime(Ag(e.updateTime)):void 0!==e.exists?Rm.exists(e.exists):Rm.none()}(t.currentDocument):Rm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)_v("REQUEST_TIME"===t.setToServerValue),n=new _m;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Em(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Sm(i)}else"increment"in t?n=new Cm(e,t.increment):xv();var a=Yv.fromServerFormat(t.fieldPath);return new Om(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Rg(e,t.update.name),a=new Ty({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Jv(t.map((function(e){return Yv.fromServerFormat(e)})))}(t.updateMask);return new zm(i,a,o,n,r)}return new qm(i,a,n,r)}if(t.delete){var u=Rg(e,t.delete);return new Qm(u,n)}if(t.verify){var s=Rg(e,t.verify);return new $m(s,n)}return xv()}function Bg(e,t){return{documents:[Dg(e,t.path)]}}function Kg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Dg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Dg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ey(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NAN"}};if(_y(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ey(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NOT_NAN"}};if(_y(e.value))return{unaryFilter:{field:$g(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$g(e.field),op:Qg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$g(e.field),direction:Gg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||sy(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wg(e){var t=Lg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_v(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Hg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new $y(Yg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return sy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Qy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Qy(n,t)}(n.endAt)),em(t,i,u,o,s,"F",c,l)}function Hg(e){return e?void 0!==e.unaryFilter?[Xg(e)]:void 0!==e.fieldFilter?[Jg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Hg(e)})).reduce((function(e,t){return e.concat(t)})):xv():[]}function Gg(e){return _g[e]}function Qg(e){return Eg[e]}function $g(e){return{fieldPath:e.canonicalString()}}function Yg(e){return Yv.fromServerFormat(e.fieldPath)}function Jg(e){return jy.create(Yg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xv()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yg(e.unaryFilter.field);return jy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yg(e.unaryFilter.field);return jy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yg(e.unaryFilter.field);return jy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yg(e.unaryFilter.field);return jy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xv()}}function Zg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ek(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function tk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=rk(t)),t=nk(e.get(n),t);return rk(t)}function nk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function rk(e){return e+"\x01\x01"}function ik(e){var t=e.length;if(_v(t>=2),2===t)return _v("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&xv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:xv()}a=o+2}return new Qv(r)}var ak=Jt((function e(t,n){$t(this,e),this.seconds=t,this.nanoseconds=n})),ok=Jt((function e(t,n,r){$t(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));ok.store="owner",ok.key="owner";var uk=Jt((function e(t,n,r){$t(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));uk.store="mutationQueues",uk.keyPath="userId";var sk=Jt((function e(t,n,r,i,a){$t(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));sk.store="mutations",sk.keyPath="batchId",sk.userMutationsIndex="userMutationsIndex",sk.userMutationsKeyPath=["userId","batchId"];var ck=function(){function e(){$t(this,e)}return Jt(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,tk(t)]}},{key:"key",value:function(e,t,n){return[e,tk(t),n]}}]),e}();ck.store="documentMutations",ck.PLACEHOLDER=new ck;var lk=Jt((function e(t,n){$t(this,e),this.path=t,this.readTime=n})),fk=Jt((function e(t,n){$t(this,e),this.path=t,this.version=n})),hk=Jt((function e(t,n,r,i,a,o){$t(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));hk.store="remoteDocuments",hk.readTimeIndex="readTimeIndex",hk.readTimeIndexPath="readTime",hk.collectionReadTimeIndex="collectionReadTimeIndex",hk.collectionReadTimeIndexPath=["parentPath","readTime"];var dk=Jt((function e(t){$t(this,e),this.byteSize=t}));dk.store="remoteDocumentGlobal",dk.key="remoteDocumentGlobalKey";var pk=Jt((function e(t,n,r,i,a,o,u){$t(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));pk.store="targets",pk.keyPath="targetId",pk.queryTargetsIndexName="queryTargetsIndex",pk.queryTargetsKeyPath=["canonicalId","targetId"];var vk=Jt((function e(t,n,r){$t(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));vk.store="targetDocuments",vk.keyPath=["targetId","path"],vk.documentTargetsIndex="documentTargetsIndex",vk.documentTargetsKeyPath=["path","targetId"];var yk=Jt((function e(t,n,r,i){$t(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));yk.key="targetGlobalKey",yk.store="targetGlobal";var mk=Jt((function e(t,n){$t(this,e),this.collectionId=t,this.parent=n}));mk.store="collectionParents",mk.keyPath=["collectionId","parent"];var gk=Jt((function e(t,n,r,i){$t(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));gk.store="clientMetadata",gk.keyPath="clientId";var kk=Jt((function e(t,n,r){$t(this,e),this.bundleId=t,this.createTime=n,this.version=r}));kk.store="bundles",kk.keyPath="bundleId";var wk=Jt((function e(t,n,r){$t(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));wk.store="namedQueries",wk.keyPath="name";var bk=Jt((function e(t,n,r){$t(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));bk.store="indexConfiguration",bk.keyPath="indexId",bk.collectionGroupIndex="collectionGroupIndex",bk.collectionGroupIndexPath="collectionGroup";var xk=Jt((function e(t,n,r,i,a,o){$t(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));xk.store="indexState",xk.keyPath=["indexId","uid"],xk.sequenceNumberIndex="sequenceNumberIndex",xk.sequenceNumberIndexPath=["uid","sequenceNumber"];var _k=Jt((function e(t,n,r,i,a){$t(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));_k.store="indexEntries",_k.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],_k.documentKeyIndex="documentKeyIndex",_k.documentKeyIndexPath=["indexId","uid","documentKey"];var Ek=Jt((function e(t,n,r,i,a,o){$t(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));Ek.store="documentOverlays",Ek.keyPath=["userId","collectionPath","documentId"],Ek.collectionPathOverlayIndex="collectionPathOverlayIndex",Ek.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Ek.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Ek.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var Ik=[uk.store,sk.store,ck.store,hk.store,pk.store,ok.store,yk.store,vk.store].concat([gk.store]).concat([dk.store]).concat([mk.store]).concat([kk.store,wk.store]),Sk=[].concat(Ut(Ik),[Ek.store]),Tk=[].concat(Ut(Sk),[bk.store,xk.store,_k.store]),Ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ak=function(){function e(){$t(this,e),this.onCommittedListeners=[]}return Jt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Nk=function(){function e(t){var n=this;$t(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Jt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&xv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=sn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Ok=function(){function e(t,n){var r=this;$t(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Tv,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Dk(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=jk(e.target.error);r.At.reject(new Dk(t,n))}}return Jt(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(gv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Mk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dk(n,t)}}}]),e}(),Pk=function(){function e(t,n,r){$t(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(xn())&&kv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Jt(e,[{key:"xt",value:function(){var e=Qt(un().mark((function e(t){var n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return gv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dk(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Sv(Iv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Sv(Iv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dk(t,n))},i.onupgradeneeded=function(e){gv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){gv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Qt(un().mark((function e(t,n,r,i){var a,o,u,s,c=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(un().mark((function e(){var n,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.xt(t);case 2:return c.db=e.sent,n=Ok.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Nk.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,gv("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return gv("SimpleDb","Removing database:",e),Fk(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!Cn())return!1;if(e.St())return!0;var t=xn(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Rk=function(){function e(t){$t(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return Jt(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Fk(this.$t.delete())}}]),e}(),Dk=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,Iv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Jt(n)}(Sv);function Lk(e){return"IndexedDbTransactionError"===e.name}var Mk=function(){function e(t){$t(this,e),this.store=t}return Jt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(gv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(gv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Fk(n)}},{key:"add",value:function(e){return gv("SimpleDb","ADD",this.store.name,e,e),Fk(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Fk(this.store.get(e)).next((function(n){return void 0===n&&(n=null),gv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return gv("SimpleDb","DELETE",this.store.name,e),Fk(this.store.delete(e))}},{key:"count",value:function(){return gv("SimpleDb","COUNT",this.store.name),Fk(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Nk((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){gv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new Nk((function(n,r){t.onerror=function(e){var t=jk(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Nk((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Rk(i),o=t(i.primaryKey,i.value,a);if(o instanceof Nk){var u=o.catch((function(e){return a.done(),Nk.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Nk.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Fk(e){return new Nk((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=jk(e.target.error);n(t)}}))}var Uk=!1;function jk(e){var t=Pk.vt(xn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Sv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Uk||(Uk=!0,setTimeout((function(){throw r}),0)),r}}return e}var Vk=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return Jt(n)}(Ak);function qk(e,t){var n=Ev(e);return Pk.Nt(n.zt,t)}var zk=function(){function e(t,n,r,i){$t(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Jt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Mm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=sn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Fm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=sn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Fm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Bv.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Vv(this.mutations,e.mutations,(function(e,t){return jm(e,t)}))&&Vv(this.baseMutations,e.baseMutations,(function(e,t){return jm(e,t)}))}}]),e}(),Bk=function(){function e(t,n,r,i){$t(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Jt(e,null,[{key:"from",value:function(t,n,r){_v(t.mutations.length===r.length);for(var i=cg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Kk=function(){function e(t,n){$t(this,e),this.largestBatchId=t,this.mutation=n}return Jt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Wk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xv.EMPTY_BYTE_STRING;$t(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Jt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Hk=Jt((function e(t){$t(this,e),this.Ht=t}));function Gk(e,t){var n;if(t.document)n=jg(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=fy.fromSegments(t.noDocument.path),i=Xk(t.noDocument.readTime);n=Ay.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xv();var a=fy.fromSegments(t.unknownDocument.path),o=Xk(t.unknownDocument.version);n=Ay.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(Yk(t.readTime)),n}function Qk(e,t){var n=$k(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:Pg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sg(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new hk(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),u=Jk(t.version),s=t.hasCommittedMutations;return new hk(null,new lk(o,u),null,s,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Jk(t.version);return new hk(new fk(c,l),null,null,!0,n,r)}return xv()}function $k(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Yk(e){var t=new zv(e[0],e[1]);return Bv.fromTimestamp(t)}function Jk(e){var t=e.toTimestamp();return new ak(t.seconds,t.nanoseconds)}function Xk(e){var t=new zv(e.seconds,e.nanoseconds);return Bv.fromTimestamp(t)}function Zk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return zg(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return zg(e.Ht,t)})),u=zv.fromMillis(t.localWriteTimeMs);return new zk(t.batchId,u,n,o)}function ew(e){var t,n,r=Xk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Xk(e.lastLimboFreeSnapshotVersion):Bv.min();return void 0!==e.query.documents?(_v(1===(n=e.query).documents.length),t=sm(tm(Lg(n.documents[0])))):t=function(e){return sm(Wg(e))}(e.query),new Wk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Xv.fromBase64String(e.resumeToken))}function tw(e,t){var n,r=Jk(t.snapshotVersion),i=Jk(t.lastLimboFreeSnapshotVersion);n=Uy(t.target)?Bg(e.Ht,t.target):Kg(e.Ht,t.target);var a=t.resumeToken.toBase64();return new pk(t.targetId,My(t.target),r,a,t.sequenceNumber,i,n)}function nw(e){var t=Wg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cm(t,t.limit,"L"):t}function rw(e,t){return new Kk(t.largestBatchId,zg(e.Ht,t.overlayMutation))}function iw(e,t){var n=t.path.lastSegment();return[e,tk(t.path.popLast()),n]}var aw=function(){function e(){$t(this,e)}return Jt(e,[{key:"getBundleMetadata",value:function(e,t){return ow(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Xk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ow(e).put({bundleId:(n=t).id,createTime:Jk(Ag(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return uw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:nw(t.bundledQuery),readTime:Xk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return uw(e).put(function(e){return{name:e.name,readTime:Jk(Ag(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ow(e){return qk(e,kk.store)}function uw(e){return qk(e,wk.store)}var sw=function(){function e(t,n){$t(this,e),this.O=t,this.userId=n}return Jt(e,[{key:"getOverlay",value:function(e,t){var n=this;return cw(e).get(iw(this.userId,t)).next((function(e){return e?rw(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new Kk(t,n);i.push(r.Yt(e,a))})),Nk.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(tk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(cw(e).Gt(Ek.collectionPathOverlayIndex,i))})),Nk.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=tk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cw(e).qt(Ek.collectionPathOverlayIndex,o).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=rw(r.O,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cw(e).Qt({index:Ek.collectionGroupOverlayIndex,range:u},(function(e,t,n){var u=rw(a.O,t);o.size<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return cw(e).put(function(e,t,n){var r=fn(iw(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new Ek(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,qg(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function cw(e){return qk(e,Ek.store)}var lw=function(){function e(){$t(this,e)}return Jt(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(ty(e.integerValue));else if("doubleValue"in e){var n=ty(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),cy(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(ny(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?py(e,hy)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):xv()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),fy.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function fw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=fw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lw.le=new lw;var dw=function(){function e(){$t(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Jt(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=hw(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=hw(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pw=function(){function e(t){$t(this,e),this.Se=t}return Jt(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),vw=function(){function e(t){$t(this,e),this.Se=t}return Jt(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),yw=function(){function e(){$t(this,e),this.Se=new dw,this.De=new pw(this.Se),this.Ce=new vw(this.Se)}return Jt(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),mw=Jt((function e(t,n,r,i){$t(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function gw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=fy.comparator(e.documentKey,t.documentKey))?n:0!==(n=kw(e.arrayValue,t.arrayValue))?n:kw(e.directionalValue,t.directionalValue)}function kw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ww=function(){function e(){$t(this,e),this.xe=new bw}return Jt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),Nk.resolve()}},{key:"getCollectionParents",value:function(e,t){return Nk.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Nk.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Nk.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Nk.resolve(fg())}},{key:"getFieldIndex",value:function(e,t){return Nk.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Nk.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Nk.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Nk.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Nk.resolve()}}]),e}(),bw=function(){function e(){$t(this,e),this.index={}}return Jt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ng(Qv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ng(Qv.comparator)).toArray()}}]),e}(),xw=function(){function e(t){$t(this,e),this.user=t,this.ke=new bw,this.uid=t.uid||""}return Jt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:tk(i)};return _w(e).put(a)}return Nk.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[qv(t),""],!1,!0);return _w(e).qt(r).next((function(e){var r,i=sn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ik(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Iw(e),r=function(e){return new bk(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Iw(e),r=Sw(e),i=Ew(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Nk.resolve(fg())}},{key:"getFieldIndex",value:function(e,t){return Nk.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new yw,i=sn(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);lw.le.Xt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new yw;return lw.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Iw(e),i=Sw(e);return(t?r.qt(bk.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Nk.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Py(t.sequenceNumber,new Ry(Xk(t.readTime),new fy(ik(t.documentKey)),t.largestBatchId)):Py.empty(),r=e.fields.map((function(e){var t=fn(e,2),n=t[0],r=t[1];return new Oy(Yv.fromServerFormat(n),r)}));return new Ny(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Iw(e),a=Sw(e);return this.$e(e).next((function(e){return i.qt(bk.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return Nk.forEach(t,(function(t){return a.put(function(e,t,n,r){return new xk(e,t.uid||"",n,Jk(r.readTime),tk(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Nk.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Nk.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Nk.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?Nk.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return Ew(e).put(new _k(n.indexId,this.uid,n.arrayValue,n.directionalValue,tk(t.key.path)))}},{key:"qe",value:function(e,t,n){return Ew(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,tk(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=Ew(e),i=new ng(gw);return r.Qt({index:_k.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,tk(t.path)])},(function(e,r){i=i.add(new mw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new ng(gw),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(xy(a)){var o,u=sn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new mw(t.indexId,e.key,this.Me(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new mw(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;gv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ig(a),s=ig(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ig(o)):l?(i(u),u=ig(a)):(u=ig(a),s=ig(o))}}(n,r,gw,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),Nk.waitFor(a)}},{key:"$e",value:function(e){var t=1;return Sw(e).Qt({index:xk.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function _w(e){return qk(e,mk.store)}function Ew(e){return qk(e,_k.store)}function Iw(e){return qk(e,bk.store)}function Sw(e){return qk(e,xk.store)}var Tw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cw=function(){function e(t,n,r){$t(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Jt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Aw(e,t,n){var r=e.store(sk.store),i=e.store(ck.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Qt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){_v(1===u)})));var c,l=[],f=sn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ck.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Nk.waitFor(a).next((function(){return l}))}function Nw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xv();t=e.noDocument}return JSON.stringify(t).length}Cw.DEFAULT_COLLECTION_PERCENTILE=10,Cw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cw.DEFAULT=new Cw(41943040,Cw.DEFAULT_COLLECTION_PERCENTILE,Cw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cw.DISABLED=new Cw(-1,0,0);var Ow=function(){function e(t,n,r,i){$t(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return Jt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rw(e).Qt({index:sk.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Dw(e),o=Rw(e);return o.add({}).next((function(u){_v("number"==typeof u);var s,c=new zk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return qg(e.Ht,t)})),i=n.mutations.map((function(t){return qg(e.Ht,t)}));return new sk(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),f=[],h=new ng((function(e,t){return jv(e.canonicalString(),t.canonicalString())})),d=sn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ck.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ck.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[u]=c.keys()})),Nk.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Rw(e).get(t).next((function(e){return e?(_v(e.userId===n.userId),Zk(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?Nk.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Rw(e).Qt({index:sk.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(_v(t.batchId>=r),a=Zk(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rw(e).Qt({index:sk.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rw(e).qt(sk.userMutationsIndex,n).next((function(e){return e.map((function(e){return Zk(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ck.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dw(e).Qt({range:i},(function(r,i,o){var u=fn(r,3),s=u[0],c=u[1],l=u[2],f=ik(c);if(s===n.userId&&t.path.isEqual(f))return Rw(e).get(l).next((function(e){if(!e)throw xv();_v(e.userId===n.userId),a.push(Zk(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ng(jv),i=[];return t.forEach((function(t){var a=ck.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Dw(e).Qt({range:o},(function(e,i,a){var o=fn(e,3),u=o[0],s=o[1],c=o[2],l=ik(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Nk.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ck.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new ng(jv);return Dw(e).Qt({range:o},(function(e,t,a){var o=fn(e,3),s=o[0],c=o[1],l=o[2],f=ik(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.je(e,u)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Rw(e).get(t).next((function(e){if(null===e)throw xv();_v(e.userId===n.userId),r.push(Zk(n.O,e))})))})),Nk.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Aw(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),Nk.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Nk.resolve();var r=IDBKeyRange.lowerBound(ck.prefixForUser(t.userId)),i=[];return Dw(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ik(e[1]);i.push(a)}else r.done()})).next((function(){_v(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Pw(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return Lw(e).get(this.userId).next((function(e){return e||new uk(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return _v(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Pw(e,t,n){var r=ck.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Dw(e).Qt({range:a,jt:!0},(function(e,n,r){var a=fn(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Rw(e){return qk(e,sk.store)}function Dw(e){return qk(e,ck.store)}function Lw(e){return qk(e,uk.store)}var Mw=function(){function e(t){$t(this,e),this.ze=t}return Jt(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),Fw=function(){function e(t,n){$t(this,e),this.referenceDelegate=t,this.O=n}return Jt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new Mw(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return Bv.fromTimestamp(new zv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Uw(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return _v(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Uw(e).Qt((function(o,u){var s=ew(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Nk.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Uw(e).Qt((function(e,n){var r=ew(n);t(r)}))}},{key:"Ye",value:function(e){return jw(e).get(yk.key).next((function(e){return _v(null!==e),e}))}},{key:"Xe",value:function(e,t){return jw(e).put(yk.key,t)}},{key:"Ze",value:function(e,t){return Uw(e).put(tw(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=My(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Uw(e).Qt({range:r,index:pk.queryTargetsIndexName},(function(e,n,r){var a=ew(n);Fy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Vw(e);return t.forEach((function(t){var o=tk(t.path);i.push(a.put(new vk(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Nk.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Vw(e);return Nk.forEach(t,(function(t){var a=tk(t.path);return Nk.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Vw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Vw(e),i=fg();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=ik(e[1]),a=new fy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=tk(t.path),r=IDBKeyRange.bound([n],[qv(n)],!1,!0),i=0;return Vw(e).Qt({index:vk.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=fn(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return Uw(e).get(t).next((function(e){return e?ew(e):null}))}}]),e}();function Uw(e){return qk(e,pk.store)}function jw(e){return qk(e,yk.store)}function Vw(e){return qk(e,vk.store)}function qw(e){return zw.apply(this,arguments)}function zw(){return zw=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Iv.FAILED_PRECONDITION&&t.message===Ck){e.next=2;break}throw t;case 2:gv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Bw(e,t){var n=fn(e,2),r=n[0],i=n[1],a=fn(t,2),o=a[0],u=a[1],s=jv(r,o);return 0===s?jv(i,u):s}var Kw=function(){function e(t){$t(this,e),this.en=t,this.buffer=new ng(Bw),this.nn=0}return Jt(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Bw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ww=function(){function e(t,n){$t(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return Jt(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;gv("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Lk(n.t0)){n.next=12;break}gv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,qw(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Hw=function(){function e(t,n){$t(this,e),this.an=t,this.params=n}return Jt(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Nk.resolve(Mv.A);var r=new Kw(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(gv("LruGarbageCollector","Garbage collection skipped; disabled"),Nk.resolve(Tw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(gv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Tw):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(gv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),mv()<=Gn.DEBUG&&gv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Nk.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Gw=function(){function e(t,n){$t(this,e),this.db=t,this.garbageCollector=function(e,t){return new Hw(e,t)}(this,n)}return Jt(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Qw(e,n)}},{key:"removeReference",value:function(e,t,n){return Qw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Qw(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return Lw(e).Wt((function(r){return Pw(e,r,t).next((function(e){return e&&(n=!0),Nk.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,u){if(u<=t){var s=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Bv.min()),Vw(e).delete([0,tk(o.path)])}))}));i.push(s)}})).next((function(){return Nk.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Qw(e,t)}},{key:"_n",value:function(e,t){var n,r=Vw(e),i=Mv.A;return r.Qt({index:vk.documentTargetsIndex},(function(e,r){var a=fn(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Mv.A&&t(new fy(ik(n)),i),i=s,n=u):i=Mv.A})).next((function(){i!==Mv.A&&t(new fy(ik(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Qw(e,t){return Vw(e).put(function(e,t){return new vk(0,tk(e.path),t)}(t,e.currentSequenceNumber))}var $w=function(){function e(t,n){$t(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Jt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=fn(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Wv(this.inner,(function(t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=fn(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Hv(this.inner)}}]),e}(),Yw=function(){function e(){$t(this,e),this.changes=new $w((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Jt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ay.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Nk.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Jw=function(){function e(t){$t(this,e),this.O=t}return Jt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return eb(e).put(tb(t),n)}},{key:"removeEntry",value:function(e,t){var n=eb(e),r=tb(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return eb(e).get(tb(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return eb(e).get(tb(t)).next((function(e){return{document:n.gn(t,e),size:Nw(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=og();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=og(),i=new Zm(fy.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,Nw(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return Nk.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return eb(e).Qt({range:r},(function(e,t,r){for(var o=fy.fromSegments(e);a&&fy.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=og(),a=t.length+1,o={};if(n.isEqual(Bv.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=$k(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=hk.collectionReadTimeIndex}return eb(e).Qt(o,(function(e,n,o){if(e.length===a){var u=r.gn(fy.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Xw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Zw(e).get(dk.key).next((function(e){return _v(!!e),e}))}},{key:"mn",value:function(e,t){return Zw(e).put(dk.key,t)}},{key:"gn",value:function(e,t){if(t){var n=Gk(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(Bv.min()))return n}return Ay.newInvalidDocument(e)}}]),e}(),Xw=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new $w((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Jt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ng((function(e,t){return jv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.An.get(a);if(o.isValidDocument()){var s=Qk(t.Tn.O,o);i=i.add(a.path.popLast());var c=Nw(s);r+=c-u,n.push(t.Tn.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Qk(t.Tn.O,o.convertToNoDocument(Bv.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),Nk.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(Yw);function Zw(e){return qk(e,dk.store)}function eb(e){return qk(e,hk.store)}function tb(e){return e.path.toArray()}var nb=function(){function e(t){$t(this,e),this.O=t}return Jt(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Ok("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ok.store)}(e),function(e){e.createObjectStore(uk.store,{keyPath:uk.keyPath}),e.createObjectStore(sk.store,{keyPath:sk.keyPath,autoIncrement:!0}).createIndex(sk.userMutationsIndex,sk.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ck.store)}(e),rb(e),function(e){e.createObjectStore(hk.store)}(e));var o=Nk.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(vk.store),e.deleteObjectStore(pk.store),e.deleteObjectStore(yk.store)}(e),rb(e)),o=o.next((function(){return function(e){var t=e.store(yk.store),n=new yk(0,0,Bv.min().toTimestamp(),0);return t.put(yk.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(sk.store).qt().next((function(n){e.deleteObjectStore(sk.store),e.createObjectStore(sk.store,{keyPath:sk.keyPath,autoIncrement:!0}).createIndex(sk.userMutationsIndex,sk.userMutationsKeyPath,{unique:!0});var r=t.store(sk.store),i=n.map((function(e){return r.put(e)}));return Nk.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(gk.store,{keyPath:gk.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(dk.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(hk.store);t.createIndex(hk.readTimeIndex,hk.readTimeIndexPath,{unique:!1}),t.createIndex(hk.collectionReadTimeIndex,hk.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(kk.store,{keyPath:kk.keyPath})}(e),function(e){e.createObjectStore(wk.store,{keyPath:wk.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(Ek.store,{keyPath:Ek.keyPath});t.createIndex(Ek.collectionPathOverlayIndex,Ek.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(Ek.collectionGroupOverlayIndex,Ek.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(bk.store,{keyPath:bk.keyPath,autoIncrement:!0}).createIndex(bk.collectionGroupIndex,bk.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(xk.store,{keyPath:xk.keyPath}).createIndex(xk.sequenceNumberIndex,xk.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(_k.store,{keyPath:_k.keyPath}).createIndex(_k.documentKeyIndex,_k.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(hk.store).Qt((function(e,n){t+=Nw(n)})).next((function(){var n=new dk(t);return e.store(dk.store).put(dk.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store(uk.store),r=e.store(sk.store);return n.qt().next((function(n){return Nk.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(sk.userMutationsIndex,i).next((function(r){return Nk.forEach(r,(function(r){_v(r.userId===n.userId);var i=Zk(t.O,r);return Aw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(vk.store),n=e.store(hk.store);return e.store(yk.store).get(yk.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new Qv(n),o=function(e){return[0,tk(e)]}(a);r.push(t.get(o).next((function(n){return n?Nk.resolve():function(n){return t.put(new vk(0,tk(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Nk.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(mk.store,{keyPath:mk.keyPath});var n=t.store(mk.store),r=new bw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:tk(i)})}};return t.store(hk.store).Qt({jt:!0},(function(e,t){var n=new Qv(e);return i(n.popLast())})).next((function(){return t.store(ck.store).Qt({jt:!0},(function(e,t){var n=fn(e,3),r=(n[0],n[1]),a=(n[2],ik(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(pk.store);return n.Qt((function(e,r){var i=ew(r),a=tw(t.O,i);return n.put(a)}))}}]),e}();function rb(e){e.createObjectStore(vk.store,{keyPath:vk.keyPath}).createIndex(vk.documentTargetsIndex,vk.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pk.store,{keyPath:pk.keyPath}).createIndex(pk.queryTargetsIndexName,pk.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yk.store)}var ib="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ab=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if($t(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=u,this.Dn=c,this.Cn=l,this.schemaVersion=f,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new Sv(Iv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gw(this,i),this.Bn=n+"main",this.O=new Hk(s),this.Ln=new Pk(this.Bn,this.schemaVersion,new nb(this.O)),this.Un=new Fw(this.referenceDelegate,this.O),this.qn=function(e){return new Jw(e)}(this.O),this.Kn=new aw,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&kv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Jt(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Sv(Iv.FAILED_PRECONDITION,ib);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new Mv(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=Qt(un().mark((function n(r){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=Qt(un().mark((function t(n){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ub(t).put(new gk(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(Lk(t))return gv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return gv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return ob(e).get(ok.key).next((function(e){return Nk.resolve(t.ts(e))}))}},{key:"es",value:function(e){return ub(e).delete(this.clientId)}},{key:"ns",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i,a=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=qk(e,gk.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Nk.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=sn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?Nk.resolve(!0):ob(e).get(ok.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new Sv(Iv.FAILED_PRECONDITION,ib);return!1}}return!(!t.networkEnabled||!t.inForeground)||ub(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&gv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Qt(un().mark((function e(){var t=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[ok.store,gk.store],(function(e){var n=new Vk(e,Mv.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ub(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return Ow.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new xw(e)}},{key:"getDocumentOverlayCache",value:function(e){return sw.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;gv("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.schemaVersion)?Tk:12===i?Sk:11===i?Ik:void xv();return this.Ln.runTransaction(e,o,u,(function(i){return a=new Vk(i,r.Nn?r.Nn.next():Mv.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw kv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new Sv(Iv.FAILED_PRECONDITION,Ck);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return ob(e).get(ok.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Sv(Iv.FAILED_PRECONDITION,ib)}))}},{key:"Zn",value:function(e){var t=new ok(this.clientId,this.allowTabSynchronization,Date.now());return ob(e).put(ok.key,t)}},{key:"Xn",value:function(e){var t=this,n=ob(e);return n.get(ok.key).next((function(e){return t.ts(e)?(gv("IndexedDbPersistence","Releasing primary lease."),n.delete(ok.key)):Nk.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(kv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),!En()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return gv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return kv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(pf){kv("Failed to set zombie client id.",pf)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(pf){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return Pk.Vt()}}]),e}();function ob(e){return qk(e,ok.store)}function ub(e){return qk(e,gk.store)}function sb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var cb=Jt((function e(t,n){$t(this,e),this.progress=t,this.ws=n})),lb=function(){function e(t,n,r){$t(this,e),this.qn=t,this.gs=n,this.indexManager=r}return Jt(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=sn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=sn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):om(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new fy(t)).next((function(e){var t=sg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=sg();return this.indexManager.getCollectionParents(e,i).next((function(o){return Nk.forEach(o,(function(o){var u=function(e,t){return new Zy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=sn(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Ay.newInvalidDocument(s),r=r.insert(s,c)),Fm(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){dm(t,n)||(r=r.remove(e))})),r}))}}]),e}(),fb=function(){function e(t,n,r,i){$t(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return Jt(e,null,[{key:"Ss",value:function(t,n){var r,i=fg(),a=fg(),o=sn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),hb=function(){function e(){$t(this,e)}return Jt(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Bv.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(nm(t)||rm(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(mv()<=Gn.DEBUG&&gv("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hm(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new ng(pm(e));return t.forEach((function(t,r){dm(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return mv()<=Gn.DEBUG&&gv("QueryEngine","Using full collection scan to execute query:",hm(t)),this.Cs.As(e,t,Bv.min())}}]),e}(),db=function(){function e(t,n,r,i){$t(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new Zm(jv),this.$s=new $w((function(e){return My(e)}),Fy),this.Fs=Bv.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return Jt(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new lb(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function pb(e,t,n,r){return new db(e,t,n,r)}function vb(e,t){return yb.apply(this,arguments)}function yb(){return yb=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=fg(),s=sn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=sn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=sn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=sn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,u).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function mb(e,t){var n=Ev(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Nk.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);_v(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function gb(e){var t=Ev(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function kb(e,t){var n=Ev(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Xv.EMPTY_BYTE_STRING,Bv.min()).withLastLimboFreeSnapshotVersion(Bv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var u=og();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Bv.min())){var s=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Nk.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,u)})).next((function(){return u}))})).then((function(e){return n.Ms=i,e}))}function wb(e,t,n){var r=fg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=og();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Bv.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):gv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function bb(e,t){var n=Ev(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function xb(e,t){var n=Ev(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,Nk.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new Wk(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function _b(e,t,n){return Eb.apply(this,arguments)}function Eb(){return Eb=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ev(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Lk(e.t1)){e.next=12;break}throw e.t1;case 12:gv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Eb.apply(this,arguments)}function Ib(e,t,n){var r=Ev(e),i=Bv.min(),a=fg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ev(e),i=r.$s.get(n);return void 0!==i?Nk.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,sm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:Bv.min(),n?a:fg())})).next((function(e){return{documents:e,Ks:a}}))}))}function Sb(e,t){var n=Ev(e),r=Ev(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function Tb(e){var t=Ev(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Ev(e),i=og(),a=$k(n),o=eb(t),u=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:hk.readTimeIndex,range:u},(function(e,t){var n=Gk(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:Yk(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function Cb(e){return Ab.apply(this,arguments)}function Ab(){return Ab=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ev(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=eb(e),n=Bv.min();return t.Qt({index:hk.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Yk(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Nb(e,t,n,r){return Ob.apply(this,arguments)}function Ob(){return Ob=Qt(un().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ev(t),o=fg(),u=og(),s=sn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Gs(l.metadata.name),l.document&&(o=o.add(f)),(h=n.js(l)).setReadTime(n.Qs(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,xb(a,function(e){return sm(tm(Qv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return wb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Un.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Pb(e,t){return Rb.apply(this,arguments)}function Rb(){return Rb=Qt(un().mark((function e(t,n){var r,i,a,o=arguments;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:fg(),e.next=3,xb(t,sm(nw(n.bundledQuery)));case 3:return i=e.sent,a=Ev(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ag(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(Xv.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}var Db=function(){function e(t){$t(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return Jt(e,[{key:"getBundleMetadata",value:function(e,t){return Nk.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Ag(n.createTime)}),Nk.resolve()}},{key:"getNamedQuery",value:function(e,t){return Nk.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:nw(e.bundledQuery),readTime:Ag(e.readTime)}}(t)),Nk.resolve()}}]),e}(),Lb=function(){function e(){$t(this,e),this.overlays=new Zm(fy.comparator),this.Hs=new Map}return Jt(e,[{key:"getOverlay",value:function(e,t){return Nk.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),Nk.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),Nk.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new fy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Nk.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Zm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=new Map,i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(t,e)})),!(s.size>=r)););return Nk.resolve(s)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Kk(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),Mb=function(){function e(){$t(this,e),this.Js=new ng(Fb.Ys),this.Xs=new ng(Fb.Zs)}return Jt(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Fb(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new Fb(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new fy(new Qv([])),r=new Fb(n,e),i=new Fb(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new fy(new Qv([])),n=new Fb(t,e),r=new Fb(t,e+1),i=fg();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Fb(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Fb=function(){function e(t,n){$t(this,e),this.key=t,this.oi=n}return Jt(e,null,[{key:"Ys",value:function(e,t){return fy.comparator(e.key,t.key)||jv(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return jv(e.oi,t.oi)||fy.comparator(e.key,t.key)}}]),e}(),Ub=function(){function e(t,n){$t(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new ng(Fb.Ys)}return Jt(e,[{key:"checkEmpty",value:function(e){return Nk.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new zk(i,t,n,r);this.gs.push(a);var o,u=sn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ui=this.ui.add(new Fb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Nk.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Nk.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return Nk.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Nk.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return Nk.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Fb(t,0),i=new Fb(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),Nk.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ng(jv);return t.forEach((function(e){var t=new Fb(e,0),i=new Fb(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),Nk.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;fy.isDocumentKey(i)||(i=i.child(""));var a=new Fb(new fy(i),0),o=new ng(jv);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),Nk.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;_v(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return Nk.forEach(t.mutations,(function(i){var a=new Fb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Fb(t,0),r=this.ui.firstAfterOrEqual(n);return Nk.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,Nk.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),jb=function(){function e(t){$t(this,e),this.di=t,this.docs=new Zm(fy.comparator),this.size=0}return Jt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Nk.resolve(n?n.document.mutableCopy():Ay.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=og();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ay.newInvalidDocument(e))})),Nk.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=og(),i=new fy(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Nk.resolve(r)}},{key:"_i",value:function(e,t){return Nk.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Vb(this)}},{key:"getSize",value:function(e){return Nk.resolve(this.size)}}]),e}(),Vb=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).Tn=e,r}return Jt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),Nk.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(Yw),qb=function(){function e(t){$t(this,e),this.persistence=t,this.wi=new $w((function(e){return My(e)}),Fy),this.lastRemoteSnapshotVersion=Bv.min(),this.highestTargetId=0,this.mi=0,this.gi=new Mb,this.targetCount=0,this.yi=Mw.He()}return Jt(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),Nk.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Nk.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Nk.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),Nk.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Nk.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new Mw(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,Nk.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),Nk.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Nk.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Nk.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Nk.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return Nk.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),Nk.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Nk.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),Nk.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return Nk.resolve(n)}},{key:"containsKey",value:function(e,t){return Nk.resolve(this.gi.containsKey(t))}}]),e}(),zb=function(){function e(t,n){var r=this;$t(this,e),this.pi={},this.overlays={},this.Nn=new Mv(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new qb(this),this.indexManager=new ww,this.qn=new jb((function(e){return r.referenceDelegate.Ii(e)})),this.O=new Hk(n),this.Kn=new Db(this.O)}return Jt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Lb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new Ub(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;gv("MemoryPersistence","Starting transaction:",e);var i=new Bb(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return Nk.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Bb=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Jt(n)}(Ak),Kb=function(){function e(t){$t(this,e),this.persistence=t,this.Ri=new Mb,this.Pi=null}return Jt(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw xv()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Nk.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Nk.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),Nk.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nk.forEach(this.vi,(function(r){var i=fy.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,Bv.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return Nk.or([function(){return Nk.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function Wb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Hb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Qb=function(){function e(t,n,r,i){$t(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Jt(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Sv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(kv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),$b=function(){function e(t,n,r){$t(this,e),this.targetId=t,this.state=n,this.error=r}return Jt(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Sv(i.error.code,i.error.message))),a?new e(t,i.state,r):(kv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Yb=function(){function e(t,n){$t(this,e),this.clientId=t,this.activeTargetIds=n}return Jt(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=dg(),o=0;i&&o<r.activeTargetIds.length;++o)i=ly(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(kv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Jb=function(){function e(t,n){$t(this,e),this.clientId=t,this.onlineState=n}return Jt(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(kv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Xb=function(){function e(){$t(this,e),this.activeTargetIds=dg()}return Jt(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Zb=function(){function e(t,n,r,i,a){$t(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Zm(jv),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=Wb(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new Xb),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return Jt(e,[{key:"start",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=sn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Wb(this.persistenceKey,i)))&&(o=Yb.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(u=this.storage.getItem(this.Ki))&&(s=this.Qi(u))&&this.Wi(s),c=sn(this.$i);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Oi(f)}catch(d){c.e(d)}finally{c.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gb(this.persistenceKey,e));if(n){var r=$b.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return gv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){gv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){gv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(gv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void kv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(Qt(un().mark((function e(){var r,i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(u));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}s=function(e){var t=Mv.A;if(null!=e)try{var n=JSON.parse(e);_v("number"==typeof n),t=n}catch(e){kv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Mv.A&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new Qb(this.currentUser,e,t,n),i=Hb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=Hb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=Gb(this.persistenceKey,e),i=new $b(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return Yb.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qb.Si(new pv(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return $b.Si(r,t)}},{key:"Qi",value:function(e){return Jb.Si(e)}},{key:"rr",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:gv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.dr(o,u).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=dg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ex=function(){function e(){$t(this,e),this._r=new Xb,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Jt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new Xb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),tx=function(){function e(){$t(this,e)}return Jt(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),nx=function(){function e(){var t=this;$t(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return Jt(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){gv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=sn(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){gv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=sn(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ix=function(){function e(t){$t(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return Jt(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),ax=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Jt(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new hv;o.listenOnce(uv.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ov.NO_ERROR:var t=o.getResponseJson();gv("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ov.TIMEOUT:gv("Connection",'RPC "'+e+'" timed out'),a(new Sv(Iv.DEADLINE_EXCEEDED,"Request time out"));break;case ov.HTTP_ERROR:var n=o.getStatus();if(gv("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Iv).indexOf(t)>=0?t:Iv.UNKNOWN}(r.status);a(new Sv(u,r.message))}else a(new Sv(Iv.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Sv(Iv.UNAVAILABLE,"Connection failed."));break;default:xv()}}finally{gv("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=iv(),a=av(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new lv({})),this.Fr(o.initMessageHeaders,t,n),_n()||Sn()||xn().indexOf("Electron/")>=0||Tn()||xn().indexOf("MSAppHost/")>=0||In()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");gv("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ix({Ar:function(e){l?gv("Connection","Not sending because WebChannel is closed:",e):(c||(gv("Connection","Opening WebChannel transport."),s.open(),c=!0),gv("Connection","WebChannel sending:",e),s.send(e))},Rr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,fv.EventType.OPEN,(function(){l||gv("Connection","WebChannel transport opened.")})),h(s,fv.EventType.CLOSE,(function(){l||(l=!0,gv("Connection","WebChannel transport closed"),f.Cr())})),h(s,fv.EventType.ERROR,(function(e){l||(l=!0,wv("Connection","WebChannel transport errored:",e),f.Cr(new Sv(Iv.UNAVAILABLE,"The operation could not be completed")))})),h(s,fv.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];_v(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){gv("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Hm[e];if(void 0!==t)return Xm(t)}(a),u=i.message;void 0===o&&(o=Iv.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Cr(new Sv(o,u)),s.close()}else gv("Connection","WebChannel received:",n),f.Nr(n)}})),h(a,sv.STAT_EVENT,(function(e){e.stat===cv.PROXY?gv("Connection","Detected buffering proxy"):e.stat===cv.NOPROXY&&gv("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Dr()}),0),f}}]),n}(function(){function e(t){$t(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Jt(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);gv("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return gv("RestConnection","Received: ",e),e}),(function(t){throw wv("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=rx[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function ox(){return"undefined"!=typeof window?window:null}function ux(){return"undefined"!=typeof document?document:null}function sx(e){return new Ig(e,!0)}var cx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;$t(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return Jt(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&gv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),lx=function(){function e(t,n,r,i,a,o,u,s){$t(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new cx(t,n)}return Jt(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===Iv.RESOURCE_EXHAUSTED?(kv(n.toString()),kv("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===Iv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=fn(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new Sv(Iv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return gv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(gv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fx=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a,o,u){var s;return $t(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).O=o,s}return Jt(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(_v(void 0===t||"string"==typeof t),Xv.fromBase64String(t||"")):(_v(void 0===t||t instanceof Uint8Array),Xv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Iv.UNKNOWN:Xm(e.code);return new Sv(t,e.message||"")}(o);n=new gg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Rg(e,s.document.name),l=Ag(s.document.updateTime),f=new Ty({mapValue:{fields:s.document.fields}}),h=Ay.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new yg(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Rg(e,v.document),m=v.readTime?Ag(v.readTime):Bv.min(),g=Ay.newNoDocument(y,m),k=v.removedTargetIds||[];n=new yg([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Rg(e,w.document),x=w.removedTargetIds||[];n=new yg([],x,b,null)}else{if(!("filter"in t))return xv();t.filter;var _=t.filter;_.targetId;var E=_.count||0,I=new Ym(E),S=_.targetId;n=new mg(S,I)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return Bv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Bv.min():t.readTime?Ag(t.readTime):Bv.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=Mg(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=Uy(r)?{documents:Bg(e,r)}:{query:Kg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Tg(e,t.resumeToken):t.snapshotVersion.compareTo(Bv.min())>0&&(n.readTime=Sg(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=Mg(this.O),t.removeTarget=e,this.fo(t)}}]),n}(lx),hx=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a,o,u){var s;return $t(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).O=o,s.Po=!1,s}return Jt(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,jr(Zt(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(_v(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(_v(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ag(e.updateTime):Ag(t);return n.isEqual(Bv.min())&&(n=Ag(t)),new Pm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ag(e.commitTime);return this.listener.Vo(n,t)}return _v(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=Mg(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qg(t.O,e)}))};this.fo(n)}}]),n}(lx),dx=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a){var o;return $t(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return Jt(n,[{key:"No",value:function(){if(this.Co)throw new Sv(Iv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=fn(i,2),o=a[0],u=a[1];return r.eo.Mr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Iv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Sv(Iv.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=fn(i,2),o=a[0],u=a[1];return r.eo.Lr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Iv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Sv(Iv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return Jt((function e(){$t(this,e)}))}()),px=function(){function e(t,n){$t(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return Jt(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(kv(t),this.Oo=!1):gv("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),vx=Jt((function e(t,n,r,i,a){var o=this;$t(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr((function(e){r.enqueueAndForget(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Sx(o),!e.t0){e.next=5;break}return gv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ev(t)).Ko.add(4),e.next=4,gx(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,yx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new px(r,i)}));function yx(e){return mx.apply(this,arguments)}function mx(){return mx=Qt(un().mark((function e(t){var n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sx(t)){e.next=18;break}n=sn(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),mx.apply(this,arguments)}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=Qt(un().mark((function e(t){var n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sn(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kx.apply(this,arguments)}function wx(e,t){var n=Ev(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),Ix(n)?Ex(n):t_(n).co()&&xx(n,t))}function bx(e,t){var n=Ev(e),r=t_(n);n.qo.delete(t),r.co()&&_x(n,t),0===n.qo.size&&(r.co()?r.ho():Sx(n)&&n.Qo.set("Unknown"))}function xx(e,t){e.Wo.Z(t.targetId),t_(e).Ao(t)}function _x(e,t){e.Wo.Z(t),t_(e).Ro(t)}function Ex(e){e.Wo=new wg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),t_(e).start(),e.Qo.Mo()}function Ix(e){return Sx(e)&&!t_(e).oo()&&e.qo.size>0}function Sx(e){return 0===Ev(e).Ko.size}function Tx(e){e.Wo=void 0}function Cx(e){return Ax.apply(this,arguments)}function Ax(){return Ax=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){xx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Nx(e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tx(t),Ix(t)?(t.Qo.Bo(n),Ex(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Px(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=Qt(un().mark((function e(t,n,r){var i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof gg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=sn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),gv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof yg?t.Wo.ct(n):n instanceof mg?t.Wo._t(n):t.Wo.ht(n),r.isEqual(Bv.min())){e.next=29;break}return e.prev=14,e.next=17,gb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(Xv.EMPTY_BYTE_STRING,n.snapshotVersion)),_x(e,t);var r=new Wk(n.target,t,1,n.sequenceNumber);xx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),gv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Rx.apply(this,arguments)}function Dx(e,t,n){return Lx.apply(this,arguments)}function Lx(){return Lx=Qt(un().mark((function e(t,n,r){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lk(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,gx(t);case 5:t.Qo.set("Offline"),r||(r=function(){return gb(t.localStore)}),t.asyncQueue.enqueueRetryable(Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,yx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Mx(e,t){return t().catch((function(n){return Dx(e,n,t)}))}function Fx(e){return Ux.apply(this,arguments)}function Ux(){return Ux=Qt(un().mark((function e(t){var n,r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ev(t),r=n_(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!jx(n)){e.next=19;break}return e.prev=3,e.next=6,bb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,Vx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dx(n,e.t0);case 17:e.next=2;break;case 19:qx(n)&&zx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ux.apply(this,arguments)}function jx(e){return Sx(e)&&e.Uo.length<10}function Vx(e,t){e.Uo.push(t);var n=n_(e);n.co()&&n.bo&&n.vo(t.mutations)}function qx(e){return Sx(e)&&!n_(e).oo()&&e.Uo.length>0}function zx(e){n_(e).start()}function Bx(e){return Kx.apply(this,arguments)}function Kx(){return Kx=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n_(t).Do();case 1:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Wx(e){return Hx.apply(this,arguments)}function Hx(){return Hx=Qt(un().mark((function e(t){var n,r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=n_(t),r=sn(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Gx(e,t,n){return Qx.apply(this,arguments)}function Qx(){return Qx=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=Bk.from(i,n,r),e.next=3,Mx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fx(t);case 5:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function $x(e,t){return Yx.apply(this,arguments)}function Yx(){return Yx=Qt(un().mark((function e(t,n){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&n_(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Jm(i=n.code)||i===Iv.ABORTED){e.next=7;break}return r=t.Uo.shift(),n_(t).ao(),e.next=5,Mx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qx(t)&&zx(t);case 5:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function Jx(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ev(t)).asyncQueue.verifyOperationInProgress(),gv("RemoteStore","RemoteStore received new credentials"),i=Sx(r),r.Ko.add(3),e.next=6,gx(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,yx(r);case 12:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Zx(e,t){return e_.apply(this,arguments)}function e_(){return e_=Qt(un().mark((function e(t,n){var r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ev(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,yx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,gx(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e){return e.zo||(e.zo=function(e,t,n){var r=Ev(e);return r.No(),new fx(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Cx.bind(null,e),vr:Nx.bind(null,e),To:Px.bind(null,e)}),e.Go.push(function(){var t=Qt(un().mark((function t(n){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),Ix(e)?Ex(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:Tx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function n_(e){return e.Ho||(e.Ho=function(e,t,n){var r=Ev(e);return r.No(),new hx(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Bx.bind(null,e),vr:$x.bind(null,e),So:Wx.bind(null,e),Vo:Gx.bind(null,e)}),e.Go.push(function(){var t=Qt(un().mark((function t(n){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,Fx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(gv("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var r_=function(){function e(t,n,r,i,a){$t(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Tv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Jt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sv(Iv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function i_(e,t){if(kv("AsyncQueue","".concat(t,": ").concat(e)),Lk(e))return new Sv(Iv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var a_=function(){function e(t){$t(this,e),this.comparator=t?function(e,n){return t(e,n)||fy.comparator(e.key,n.key)}:function(e,t){return fy.comparator(e.key,t.key)},this.keyedMap=sg(),this.sortedSet=new Zm(this.comparator)}return Jt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),o_=function(){function e(){$t(this,e),this.Jo=new Zm(fy.comparator)}return Jt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):xv():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),u_=function(){function e(t,n,r,i,a,o,u,s){$t(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Jt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,a_.emptySet(n),a,r,i,!0,!1)}}]),e}(),s_=Jt((function e(){$t(this,e),this.Xo=void 0,this.listeners=[]})),c_=Jt((function e(){$t(this,e),this.queries=new $w((function(e){return fm(e)}),lm),this.onlineState="Unknown",this.Zo=new Set}));function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=Qt(un().mark((function e(t,n){var r,i,a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ev(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new s_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=i_(e.t0,"Initialization of query '".concat(hm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&y_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),f_.apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=Qt(un().mark((function e(t,n){var r,i,a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ev(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t){var n,r=Ev(e),i=!1,a=sn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=sn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Xo=o}}}catch(f){a.e(f)}finally{a.f()}i&&y_(r)}function v_(e,t,n){var r=Ev(e),i=r.queries.get(t);if(i){var a,o=sn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function y_(e){e.Zo.forEach((function(e){e.next()}))}var m_=function(){function e(t,n,r){$t(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return Jt(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=sn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new u_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=u_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),g_=function(){function e(t,n){$t(this,e),this.payload=t,this.byteLength=n}return Jt(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),k_=function(){function e(t){$t(this,e),this.O=t}return Jt(e,[{key:"Gs",value:function(e){return Rg(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?jg(this.O,e.document,!1):Ay.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return Ag(e)}}]),e}(),w_=function(){function e(t,n,r){$t(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=b_(t)}return Jt(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new k_(this.O),i=sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Gs(a.metadata.name),s=sn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||fg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nb(this.localStore,new k_(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=sn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Pb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new cb(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function b_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var x_=Jt((function e(t){$t(this,e),this.key=t})),__=Jt((function e(t){$t(this,e),this.key=t})),E_=function(){function e(t,n){$t(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=fg(),this.mutatedKeys=fg(),this.mc=pm(t),this.gc=new a_(this.mc)}return Jt(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new o_,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=nm(this.query)&&i.size===this.query.limit?i.last():null,c=rm(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=dm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Tc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.mc(f,s)>0||c&&n.mc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),nm(this.query)||rm(this.query))for(;o.size>this.query.limit;){var l=nm(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:u,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xv()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],u=0===this.wc.size&&this.current?1:0,s=u!==this._c;return this._c=u,0!==a.length||s?{snapshot:new u_(this.query,e.gc,i,a,e.mutatedKeys,0===u,s,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new o_,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=fg(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new __(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new x_(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=fg();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return u_.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),I_=Jt((function e(t,n,r){$t(this,e),this.query=t,this.targetId=n,this.view=r})),S_=Jt((function e(t){$t(this,e),this.key=t,this.Sc=!1})),T_=function(){function e(t,n,r,i,a,o){$t(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new $w((function(e){return fm(e)}),lm),this.Nc=new Map,this.xc=new Set,this.kc=new Zm(fy.comparator),this.Oc=new Map,this.Mc=new Mb,this.$c={},this.Fc=new Map,this.Bc=Mw.Je(),this.onlineState="Unknown",this.Lc=void 0}return Jt(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function C_(e,t){return A_.apply(this,arguments)}function A_(){return A_=Qt(un().mark((function e(t,n){var r,i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bE(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,xb(r.localStore,sm(n));case 8:return u=e.sent,r.isPrimaryClient&&wx(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,N_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function N_(e,t,n,r){return O_.apply(this,arguments)}function O_(){return O_=Qt(un().mark((function e(t,n,r,i){var a,o,u,s,c,l;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=Qt(un().mark((function e(t,n,r,i){var a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,Ib(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(J_(t,n.targetId,u.Pc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ib(t.localStore,n,!0);case 3:return a=e.sent,o=new E_(n,a.Ks),u=o.Ic(a.documents),s=vg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),J_(t,r,c.Pc),l=new I_(n,r,o),e.abrupt("return",(t.Cc.set(n,l),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function P_(e,t){return R_.apply(this,arguments)}function R_(){return R_=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ev(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!lm(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,_b(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bx(r.remoteStore,i.targetId),$_(r,i.targetId)})).catch(qw);case 9:e.next=14;break;case 11:return $_(r,i.targetId),e.next=14,_b(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function D_(e,t,n){return L_.apply(this,arguments)}function L_(){return L_=Qt(un().mark((function e(t,n,r){var i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xE(t),e.prev=1,e.next=4,function(e,t){var n,r=Ev(e),i=zv.now(),a=t.reduce((function(e,t){return e.add(t.key)}),fg());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,u=[],s=sn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Um(c,n.get(c.key));null!=l&&u.push(new zm(c.key,l,Cy(l.value.mapValue),Rm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.gs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new Zm(jv)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,eE(i,a.changes);case 9:return e.next=11,Fx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=i_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),L_.apply(this,arguments)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),e.prev=1,e.next=4,kb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(_v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?_v(n.Sc):e.removedDocuments.size>0&&(_v(n.Sc),n.Sc=!1))})),e.next=8,eE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,qw(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),F_.apply(this,arguments)}function U_(e,t,n){var r=Ev(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ev(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=sn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&y_(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function j_(e,t,n){return V_.apply(this,arguments)}function V_(){return V_=Qt(un().mark((function e(t,n,r){var i,a,o,u,s,c;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ev(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Zm(fy.comparator)).insert(o,Ay.newNoDocument(o,Bv.min())),s=fg().add(o),c=new pg(Bv.min(),new Map,new ng(jv),u,s),e.next=9,M_(i,c);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),Z_(i),e.next=16;break;case 14:return e.next=16,_b(i.localStore,n,!1).then((function(){return $_(i,n,r)})).catch(qw);case 16:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function q_(e,t){return z_.apply(this,arguments)}function z_(){return z_=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),i=n.batch.batchId,e.prev=1,e.next=4,mb(r.localStore,n);case 4:return a=e.sent,Q_(r,i,null),G_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,eE(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,qw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),z_.apply(this,arguments)}function B_(e,t,n){return K_.apply(this,arguments)}function K_(){return K_=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ev(t),e.prev=1,e.next=4,function(e,t){var n=Ev(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return _v(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Q_(i,n,r),G_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,eE(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,qw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),K_.apply(this,arguments)}function W_(e,t){return H_.apply(this,arguments)}function H_(){return H_=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sx((r=Ev(t)).remoteStore)||gv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ev(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=i_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),H_.apply(this,arguments)}function G_(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function Q_(e,t,n){var r=Ev(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function $_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=sn(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||Y_(e,t)}))}function Y_(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(bx(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),Z_(e))}function J_(e,t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof x_?(e.Mc.addReference(a.key,t),X_(e,a)):a instanceof __?(gv("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||Y_(e,a.key)):xv()}}catch(o){i.e(o)}finally{i.f()}}function X_(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(gv("SyncEngine","New document in limbo: "+n),e.xc.add(r),Z_(e))}function Z_(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new fy(Qv.fromString(t)),r=e.Bc.next();e.Oc.set(r,new S_(n)),e.kc=e.kc.insert(n,r),wx(e.remoteStore,new Wk(sm(tm(n.path)),r,2,Mv.A))}}function eE(e,t,n){return tE.apply(this,arguments)}function tE(){return tE=Qt(un().mark((function e(t,n,r){var i,a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ev(t),a=[],o=[],u=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){u.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=fb.Ss(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Dc.To(a),e.next=9,function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o,u,s,c,l;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Nk.forEach(n,(function(t){return Nk.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Nk.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Lk(e.t0)){e.next=10;break}throw e.t0;case 10:gv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=sn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ms.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ms=r.Ms.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ev(t)).currentUser.isEqual(n)){e.next=11;break}return gv("SyncEngine","User change. New user:",n.toKey()),e.next=5,vb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new Sv(Iv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,eE(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t){var n=Ev(e),r=n.Oc.get(t);if(r&&r.Sc)return fg().add(r.key);var i=fg(),a=n.Nc.get(t);if(!a)return i;var o,u=sn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Cc.get(s);i=i.unionWith(c.view.yc)}}catch(l){u.e(l)}finally{u.f()}return i}function aE(e,t){return oE.apply(this,arguments)}function oE(){return oE=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),e.next=3,Ib(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&J_(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function uE(e){return sE.apply(this,arguments)}function sE(){return sE=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ev(t),e.abrupt("return",Tb(n.localStore).then((function(e){return eE(n,e)})));case 2:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function cE(e,t,n,r){return lE.apply(this,arguments)}function lE(){return lE=Qt(un().mark((function e(t,n,r,i){var a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ev(t),e.next=3,function(e,t){var n=Ev(e),r=Ev(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):Nk.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Q_(a,n,i||null),G_(a,n),function(e,t){Ev(Ev(e).gs).Qe(t)}(a.localStore,n)):xv();case 11:return e.next=13,eE(a,o);case 13:e.next=16;break;case 15:gv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function fE(e,t){return hE.apply(this,arguments)}function hE(){return hE=Qt(un().mark((function e(t,n){var r,i,a,o,u,s,c,l;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bE(r=Ev(t)),xE(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,dE(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,Zx(r.remoteStore,!0);case 9:o=sn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,wx(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return c=[],l=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return $_(r,t),_b(r.localStore,t,!0)})),bx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,dE(r,c);case 21:return function(e){var t=Ev(e);t.Oc.forEach((function(e,n){bx(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new Zm(fy.comparator)}(r),r.Lc=!1,e.next=25,Zx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return pE=Qt(un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ev(t),a=[],o=[],u=sn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Nc.get(c))||0===f.length){e.next=34;break}return e.next=11,xb(i.localStore,sm(f[0]));case 11:l=e.sent,h=sn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Cc.get(p),e.next=20,aE(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Sb(i.localStore,c);case 36:return m=e.sent,e.next=39,xb(i.localStore,m);case 39:return l=e.sent,e.next=42,N_(i,vE(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pE.apply(this,arguments)}function vE(e){return em(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yE(e){var t=Ev(e);return Ev(Ev(t.localStore).persistence).ds()}function mE(e,t,n,r){return gE.apply(this,arguments)}function gE(){return gE=Qt(un().mark((function e(t,n,r,i){var a,o,u;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ev(t)).Lc){e.next=5;break}gv("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Tb(a.localStore);case 11:return o=e.sent,u=pg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,eE(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,_b(a.localStore,n,!0);case 18:return $_(a,n,i),e.abrupt("break",21);case 20:xv();case 21:case"end":return e.stop()}}),e)}))),gE.apply(this,arguments)}function kE(e,t,n){return wE.apply(this,arguments)}function wE(){return wE=Qt(un().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bE(t)).Lc){e.next=45;break}a=sn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Nc.has(u)){e.next=10;break}return gv("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Sb(i.localStore,u);case 12:return s=e.sent,e.next=15,xb(i.localStore,s);case 15:return c=e.sent,e.next=18,N_(i,vE(s),c.targetId,!1);case 18:wx(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=sn(r),e.prev=30,h=un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,_b(i.localStore,t,!1).then((function(){bx(i.remoteStore,t),$_(i,t)})).catch(qw);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),wE.apply(this,arguments)}function bE(e){var t=Ev(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=M_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=j_.bind(null,t),t.Dc.To=p_.bind(null,t.eventManager),t.Dc.qc=v_.bind(null,t.eventManager),t}function xE(e){var t=Ev(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=q_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=B_.bind(null,t),t}function _E(e,t,n){var r=Ev(e);(function(){var e=Qt(un().mark((function e(t,n,r){var i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ev(e),r=Ag(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(b_(i)),a=new w_(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,eE(t,s.ws,void 0);case 30:return e.next=32,function(e,t){var n=Ev(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),wv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var EE=function(){function e(){$t(this,e),this.synchronizeTabs=!1}return Jt(e,[{key:"initialize",value:function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=sx(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return pb(this.persistence,new hb,e.initialUser,this.O)}},{key:"jc",value:function(e){return new zb(Kb.bi,this.O)}},{key:"Gc",value:function(e){return new ex}},{key:"terminate",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),IE=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Jt(n,[{key:"initialize",value:function(){var e=Qt(un().mark((function e(t){var r=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(Zt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Cb(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,xE(this.zc.syncEngine);case 8:return e.next=10,Fx(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return pb(this.persistence,new hb,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Ww(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=sb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cw.withCacheSize(this.cacheSizeBytes):Cw.DEFAULT;return new ab(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ox(),ux(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new ex}}]),n}(EE),SE=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Jt(n,[{key:"initialize",value:function(){var e=Qt(un().mark((function e(t){var r,i=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(Zt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof Zb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:cE.bind(null,r),lr:mE.bind(null,r),dr:kE.bind(null,r),ds:yE.bind(null,r),ar:uE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fE(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=ox();if(!Zb.Vt(t))throw new Sv(Iv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(IE),TE=function(){function e(){$t(this,e)}return Jt(e,[{key:"initialize",value:function(){var e=Qt(un().mark((function e(t,n){var r=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return U_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nE.bind(null,this.syncEngine),e.next=12,Zx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new c_}},{key:"createDatastore",value:function(e){var t,n=sx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ax(t));return function(e,t,n,r){return new dx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return U_(o.syncEngine,e,0)},a=nx.Vt()?new nx:new tx,new vx(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new T_(e,t,n,r,i,a);return o&&(u.Lc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ev(t),gv("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,gx(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Qt(un().mark((function r(){var i;return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var AE=function(){function e(t){$t(this,e),this.observer=t,this.muted=!1}return Jt(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),NE=function(){function e(t,n){var r=this;$t(this,e),this.Yc=t,this.O=n,this.metadata=new Tv,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Jt(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=Qt(un().mark((function e(){var t,n,r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new g_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=Qt(un().mark((function e(){var t,n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=Qt(un().mark((function e(){var t,n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),OE=function(){function e(t){$t(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Jt(e,[{key:"lookup",value:function(){var e=Qt(un().mark((function e(t){var n,r=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Sv(Iv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),i=Mg(r.O)+"/documents",a={documents:n.map((function(e){return Pg(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Vg(r.O,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());_v(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Qm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Qt(un().mark((function e(){var t,n=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=fy.fromPath(t);n.mutations.push(new $m(r,n.precondition(r)))})),e.next=7,function(){var e=Qt(un().mark((function e(t,n){var r,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ev(t),i=Mg(r.O)+"/documents",a={writes:n.map((function(e){return qg(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xv();t=Bv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Sv(Iv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Rm.updateTime(t):Rm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bv.min()))throw new Sv(Iv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rm.updateTime(t)}return Rm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),PE=function(){function e(t,n,r,i){$t(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new cx(this.asyncQueue,"transaction_retry")}return Jt(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr(Qt(un().mark((function t(){var n,r;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new OE(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!sy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Jm(t)}return!1}}]),e}(),RE=function(){function e(t,n,r,i){var a=this;$t(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pv.UNAUTHENTICATED,this.clientId=Uv.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return gv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Jt(e,[{key:"getConfiguration",value:function(){var e=Qt(un().mark((function e(){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Sv(Iv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Tv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Qt(un().mark((function n(){var r;return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=i_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function DE(e,t){return LE.apply(this,arguments)}function LE(){return LE=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),gv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}function ME(e,t){return FE.apply(this,arguments)}function FE(){return FE=Qt(un().mark((function e(t,n){var r,i;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,UE(t);case 3:return r=e.sent,gv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Jx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Jx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}function UE(e){return jE.apply(this,arguments)}function jE(){return jE=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return gv("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,DE(t,new EE);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),jE.apply(this,arguments)}function VE(e){return qE.apply(this,arguments)}function qE(){return qE=Qt(un().mark((function e(t){return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return gv("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ME(t,new TE);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function zE(e){return UE(e).then((function(e){return e.persistence}))}function BE(e){return UE(e).then((function(e){return e.localStore}))}function KE(e){return VE(e).then((function(e){return e.remoteStore}))}function WE(e){return VE(e).then((function(e){return e.syncEngine}))}function HE(e){return GE.apply(this,arguments)}function GE(){return GE=Qt(un().mark((function e(t){var n,r;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=C_.bind(null,n.syncEngine),r.onUnlisten=P_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}function QE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function i(){return un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new AE({next:function(a){t.enqueueAndForget((function(){return h_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Sv(Iv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Sv(Iv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new m_(tm(n.path),a,{includeMetadataChanges:!0,uc:!0});return l_(e,o)},i.next=3,HE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function i(){return un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new AE({next:function(n){t.enqueueAndForget((function(){return h_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Sv(Iv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new m_(n,a,{includeMetadataChanges:!0,uc:!0});return l_(e,o)},i.next=3,HE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var YE=new Map;function JE(e,t,n){if(!n)throw new Sv(Iv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function XE(e,t,n,r){if(!0===t&&!0===r)throw new Sv(Iv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ZE(e){if(!fy.isDocumentKey(e))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function eI(e){if(fy.isDocumentKey(e))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":xv()}function nI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Sv(Iv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tI(e);throw new Sv(Iv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function rI(e,t){if(t<=0)throw new Sv(Iv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var iI=function(){function e(t){var n;if($t(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Sv(Iv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Sv(Iv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,XE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Jt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),aI=function(){function e(t,n,r){$t(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iI({}),this._settingsFrozen=!1,t instanceof uy?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Sv(Iv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uy(e.options.projectId)}(t))}return Jt(e,[{key:"app",get:function(){if(!this._app)throw new Sv(Iv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Sv(Iv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Av;switch(e.type){case"gapi":var t=e.client;return _v(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Rv(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Sv(Iv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=YE.get(e);t&&(gv("ComponentProvider","Removing Datastore"),YE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function oI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=nI(e,aI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&wv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=pv.MOCK_USER;else{o=bn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Sv(Iv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pv(s)}e._authCredentials=new Nv(new Cv(o,u))}}var uI=function(){function e(t,n,r){$t(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Jt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new cI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),sI=function(){function e(t,n,r){$t(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Jt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),cI=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this,e,r,tm(i)))._path=i,a.type="collection",a}return Jt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new uI(this.firestore,null,new fy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(sI);function lI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zn(e),JE("collection","path",t),e instanceof aI){var a=Qv.fromString.apply(Qv,[t].concat(r));return eI(a),new cI(e,null,a)}if(!(e instanceof uI||e instanceof cI))throw new Sv(Iv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qv.fromString.apply(Qv,[t].concat(r)));return eI(o),new cI(e.firestore,null,o)}function fI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=zn(e),1===arguments.length&&(t=Uv.R()),JE("doc","path",t),e instanceof aI){var a=Qv.fromString.apply(Qv,[t].concat(r));return ZE(a),new uI(e,null,new fy(a))}if(!(e instanceof uI||e instanceof cI))throw new Sv(Iv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qv.fromString.apply(Qv,[t].concat(r)));return ZE(o),new uI(e.firestore,e instanceof cI?e.converter:null,new fy(o))}function hI(e,t){return e=zn(e),t=zn(t),(e instanceof uI||e instanceof cI)&&(t instanceof uI||t instanceof cI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function dI(e,t){return e=zn(e),t=zn(t),e instanceof sI&&t instanceof sI&&e.firestore===t.firestore&&lm(e._query,t._query)&&e.converter===t.converter}var pI=function(){function e(){var t=this;$t(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new cx(this,"async_queue_retry"),this.yu=function(){var e=ux();e&&gv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=ux();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return Jt(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=ux();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new Tv;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=Qt(un().mark((function e(){var t=this;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Lk(e.t0)){e.next=12;break}throw e.t0;case 12:gv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw kv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=r_.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&xv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=Qt(un().mark((function e(){var t;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=sn(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=sn(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function vI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=sn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var yI=function(){function e(){$t(this,e),this._progressObserver={},this._taskCompletionResolver=new Tv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Jt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),mI=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new pI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Jt(n,[{key:"_terminate",value:function(){return this._firestoreClient||kI(this),this._firestoreClient.terminate()}}]),n}(aI);function gI(e){return e._firestoreClient||kI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new oy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new RE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function wI(e,t,n){var r=new Tv;return e.asyncQueue.enqueue(Qt(un().mark((function i(){return un().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,DE(e,n);case 3:return i.next=5,ME(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Iv.FAILED_PRECONDITION||e.code===Iv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function bI(e){return function(e){return e.asyncQueue.enqueue(Qt(un().mark((function t(){var n,r;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zE(e);case 2:return n=t.sent,t.next=5,KE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ev(e);return t.Ko.delete(0),yx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gI(e=nI(e,mI)))}function xI(e){return function(e){return e.asyncQueue.enqueue(Qt(un().mark((function t(){var n,r;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zE(e);case 2:return n=t.sent,t.next=5,KE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ev(t)).Ko.add(0),e.next=4,gx(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gI(e=nI(e,mI)))}function _I(e,t){var n=gI(e=nI(e,mI)),r=new yI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new NE(e,t)}(function(e,t){if(e instanceof Uint8Array)return CE(e,t);if(e instanceof ArrayBuffer)return CE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,sx(t));e.asyncQueue.enqueueAndForget(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_E,t.next=3,WE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function EI(e,t){return function(e,t){return e.asyncQueue.enqueue(Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ev(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,BE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gI(e=nI(e,mI)),t).then((function(t){return t?new sI(e,null,t.query):null}))}function II(e){if(e._initialized||e._terminated)throw new Sv(Iv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var SI=function(){function e(){$t(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yv(n)}return Jt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var TI=function(){function e(t){$t(this,e),this._byteString=t}return Jt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Xv.fromBase64String(t))}catch(t){throw new Sv(Iv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Xv.fromUint8Array(t))}}]),e}(),CI=Jt((function e(t){$t(this,e),this._methodName=t})),AI=function(){function e(t,n){if($t(this,e),!isFinite(t)||t<-90||t>90)throw new Sv(Iv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Sv(Iv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Jt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return jv(this._lat,e._lat)||jv(this._long,e._long)}}]),e}(),NI=/^__.*__$/,OI=function(){function e(t,n,r){$t(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Jt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new zm(e,this.data,this.fieldMask,t,this.fieldTransforms):new qm(e,this.data,t,this.fieldTransforms)}}]),e}(),PI=function(){function e(t,n,r){$t(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Jt(e,[{key:"toMutation",value:function(e,t){return new zm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function RI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xv()}}var DI=function(){function e(t,n,r,i,a,o){$t(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Jt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return eS(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(RI(this.Vu)&&NI.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),LI=function(){function e(t,n,r){$t(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||sx(t)}return Jt(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new DI({Vu:e,methodName:t,$u:n,path:Yv.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function MI(e){var t=e._freezeSettings(),n=sx(e._databaseId);return new LI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);YI("Data must be an object, but it was:",o,r);var u,s,c=QI(r,o);if(a.merge)u=new Jv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=sn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=JI(t,d,n);if(!o.contains(p))throw new Sv(Iv.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));tS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Jv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new OI(new Ty(c),u,s)}var UI=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI);function jI(e,t,n){return new DI({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var VI=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"_toFieldTransform",value:function(e){return new Om(e.path,new _m)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CI),qI=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e)).Bu=r,i}return Jt(n,[{key:"_toFieldTransform",value:function(e){var t=jI(this,e,!0),n=this.Bu.map((function(e){return GI(e,t)})),r=new Em(n);return new Om(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI),zI=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e)).Bu=r,i}return Jt(n,[{key:"_toFieldTransform",value:function(e){var t=jI(this,e,!0),n=this.Bu.map((function(e){return GI(e,t)})),r=new Sm(n);return new Om(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI),BI=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e)).Lu=r,i}return Jt(n,[{key:"_toFieldTransform",value:function(e){var t=new Cm(e.O,gm(e.O,this.Lu));return new Om(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CI);function KI(e,t,n,r){var i=e.Fu(1,t,n);YI("Data must be an object, but it was:",i,r);var a=[],o=Ty.empty();Wv(r,(function(e,r){var u=ZI(t,e,n);r=zn(r);var s=i.xu(u);if(r instanceof UI)a.push(u);else{var c=GI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Jv(a);return new PI(o,u,i.fieldTransforms)}function WI(e,t,n,r,i,a){var o=e.Fu(1,t,n),u=[JI(t,r,n)],s=[i];if(a.length%2!=0)throw new Sv(Iv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(JI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ty.empty(),h=u.length-1;h>=0;--h)if(!tS(l,u[h])){var d=u[h],p=s[h];p=zn(p);var v=o.xu(d);if(p instanceof UI)l.push(d);else{var y=GI(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Jv(l);return new PI(f,m,o.fieldTransforms)}function HI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GI(n,e.Fu(r?4:3,t))}function GI(e,t){if($I(e=zn(e)))return YI("Unsupported field value:",t,e),QI(e,t);if(e instanceof CI)return function(e,t){if(!RI(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=sn(e);try{for(a.s();!(n=a.n()).done;){var o=GI(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=zn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gm(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=zv.fromDate(e);return{timestampValue:Sg(t.O,n)}}if(e instanceof zv){var r=new zv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sg(t.O,r)}}if(e instanceof AI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof TI)return{bytesValue:Tg(t.O,e._byteString)};if(e instanceof uI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ng(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(tI(e)))}(e,t)}function QI(e,t){var n={};return Hv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wv(e,(function(e,r){var i=GI(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function $I(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zv||e instanceof AI||e instanceof TI||e instanceof uI||e instanceof CI)}function YI(e,t,n){if(!$I(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=tI(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function JI(e,t,n){if((t=zn(t))instanceof SI)return t._internalPath;if("string"==typeof t)return ZI(e,t);throw eS("Field path arguments must be of type string or ",e,!1,void 0,n)}var XI=new RegExp("[~\\*/\\[\\]]");function ZI(e,t,n){if(t.search(XI)>=0)throw eS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return hn(SI,Ut(t.split(".")))._internalPath}catch(r){throw eS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Sv(Iv.INVALID_ARGUMENT,u+e+s)}function tS(e,t){return e.some((function(e){return e.isEqual(t)}))}var nS=function(){function e(t,n,r,i,a){$t(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Jt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new uI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new rS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),rS=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"data",value:function(){return jr(Zt(n.prototype),"data",this).call(this)}}]),n}(nS);function iS(e,t){return"string"==typeof t?ZI(e,t):t instanceof SI?t._internalPath:t._delegate._internalPath}var aS=function(){function e(t,n){$t(this,e),this.hasPendingWrites=t,this.fromCache=n}return Jt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),oS=function(e){Xt(n,e);var t=an(n);function n(e,r,i,a,o,u){var s;return $t(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Jt(n,[{key:"exists",value:function(){return jr(Zt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new uS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(nS),uS=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jr(Zt(n.prototype),"data",this).call(this,e)}}]),n}(oS),sS=function(){function e(t,n,r,i){$t(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new aS(i.hasPendingWrites,i.fromCache),this.query=r}return Jt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new uS(n._firestore,n._userDataWriter,r.key,r,new aS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Sv(Iv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new uS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new uS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:cS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function cS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xv()}}function lS(e,t){return e instanceof oS&&t instanceof oS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sS&&t instanceof sS&&e._firestore===t._firestore&&dI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function fS(e){if(rm(e)&&0===e.explicitOrderBy.length)throw new Sv(Iv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hS=Jt((function e(){$t(this,e)}));function dS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var pS=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return Jt(n,[{key:"_apply",value:function(e){var t=MI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){IS(o,a);var s,c=[],l=sn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ES(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=ES(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||IS(o,a),u=HI(n,"where",o,"in"===a||"not-in"===a);var h=jy.create(i,a,u);return function(e,t){if(t.S()){var n=am(e);if(null!==n&&!n.isEqual(t.field))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=im(e);null!==r&&SS(e,t.field,r)}var i=function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new sI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(hS);var vS=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return Jt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $y(t,n);return function(e,t){if(null===im(e)){var n=am(e);null!==n&&SS(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new sI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Zy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(hS);var yS=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return Jt(n,[{key:"_apply",value:function(e){return new sI(e.firestore,e.converter,cm(e._query,this.ju,this.Qu))}}]),n}(hS);var mS=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return Jt(n,[{key:"_apply",value:function(e){var t=_S(e,this.type,this.Wu,this.zu);return new sI(e.firestore,e.converter,function(e,t){return new Zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(hS);function gS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mS("startAt",t,!0)}function kS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mS("startAfter",t,!1)}var wS=function(e){Xt(n,e);var t=an(n);function n(e,r,i){var a;return $t(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return Jt(n,[{key:"_apply",value:function(e){var t=_S(e,this.type,this.Wu,this.zu);return new sI(e.firestore,e.converter,function(e,t){return new Zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(hS);function bS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wS("endBefore",t,!1)}function xS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wS("endAt",t,!0)}function _S(e,t,n,r){if(n[0]=zn(n[0]),n[0]instanceof nS)return function(e,t,n,r,i){if(!r)throw new Sv(Iv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=sn(um(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(wy(t,r.key));else{var c=r.data.field(s.field);if(ry(c))throw new Sv(Iv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Qy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Sv(Iv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!om(e)&&-1!==c.indexOf("/"))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qv.fromString(c));if(!fy.isDocumentKey(l))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new fy(l);u.push(wy(t,f))}else{var h=HI(n,r,c);u.push(h)}}return new Qy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ES(e,t,n){if("string"==typeof(n=zn(n))){if(""===n)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!om(t)&&-1!==n.indexOf("/"))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qv.fromString(n));if(!fy.isDocumentKey(r))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wy(e,new fy(r))}if(n instanceof uI)return wy(e,n._key);throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tI(n),"."))}function IS(e,t){if(!Array.isArray(e)||0===e.length)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function SS(e,t,n){if(!n.isEqual(t))throw new Sv(Iv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var TS=function(){function e(){$t(this,e)}return Jt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(dy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ty(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ny(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Wv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new AI(ty(e.latitude),ty(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=iy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ay(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ey(e);return new zv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qv.fromString(e);_v(ek(n));var r=new uy(n.get(1),n.get(3)),i=new fy(n.popFirst(5));return r.isEqual(t)||kv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function CS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var AS=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).firestore=e,r}return Jt(n,[{key:"convertBytes",value:function(e){return new TI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uI(this.firestore,null,t)}}]),n}(TS),NS=function(){function e(t,n){$t(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=MI(t)}return Jt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=OS(e,this._firestore),i=CS(r.converter,t,n),a=FI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Rm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=OS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=zn(t))||t instanceof SI?WI(this._dataReader,"WriteBatch.update",i._key,t,n,o):KI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Rm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=OS(e,this._firestore);return this._mutations=this._mutations.concat(new Qm(t._key,Rm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Sv(Iv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function OS(e,t){if((e=zn(e)).firestore!==t)throw new Sv(Iv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var PS=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).firestore=e,r}return Jt(n,[{key:"convertBytes",value:function(e){return new TI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uI(this.firestore,null,t)}}]),n}(TS);function RS(e){e=nI(e,uI);var t=nI(e.firestore,mI),n=gI(t),r=new PS(t);return function(e,t){var n=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function r(){return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qt(un().mark((function e(t,n,r){var i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ev(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Sv(Iv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=i_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,BE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new oS(t,r,e._key,n,new aS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function DS(e){e=nI(e,sI);var t=nI(e.firestore,mI),n=gI(t),r=new PS(t);return function(e,t){var n=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function r(){return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qt(un().mark((function e(t,n,r){var i,a,o,u,s;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ib(t,n,!0);case 3:i=e.sent,a=new E_(n,i.Ks),o=a.Ic(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=i_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,BE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new sS(t,r,e,n)}))}function LS(e,t,n){e=nI(e,uI);var r=nI(e.firestore,mI),i=CS(e.converter,t,n);return jS(r,[FI(MI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rm.none())])}function MS(e,t,n){e=nI(e,uI);for(var r=nI(e.firestore,mI),i=MI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return jS(r,[("string"==typeof(t=zn(t))||t instanceof SI?WI(i,"updateDoc",e._key,t,n,o):KI(i,"updateDoc",e._key,t)).toMutation(e._key,Rm.exists(!0))])}function FS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=zn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||vI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(vI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof uI)l=nI(e.firestore,mI),f=tm(e._key.path),c={next:function(t){n[s]&&n[s](VS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=nI(e,sI);l=nI(p.firestore,mI),f=p._query;var v=new PS(l);c={next:function(e){n[s]&&n[s](new sS(l,v,p,e))},error:n[s+1],complete:n[s+2]},fS(e._query)}return function(e,t,n,r){var i=new AE(r),a=new m_(t,i,n);return e.asyncQueue.enqueueAndForget(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l_,t.next=3,HE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=h_,t.next=3,HE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gI(l),f,h,c)}function US(e,t){return function(e,t){var n=new AE(t);return e.asyncQueue.enqueueAndForget(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ev(e).Zo.add(t),t.next()},t.next=3,HE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget(Qt(un().mark((function t(){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ev(e).Zo.delete(t)},t.next=3,HE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gI(e=nI(e,mI)),vI(t)?t:{next:t})}function jS(e,t){return function(e,t){var n=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function r(){return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=D_,r.next=3,WE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gI(e),t)}function VS(e,t,n){var r=n.docs.get(t._key),i=new PS(e);return new oS(e,i,t._key,r,new aS(n.hasPendingWrites,n.fromCache),t.converter)}var qS=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,r))._firestore=e,i}return Jt(n,[{key:"get",value:function(e){var t=this,r=OS(e,this._firestore),i=new PS(this._firestore);return jr(Zt(n.prototype),"get",this).call(this,e).then((function(e){return new oS(t._firestore,i,r._key,e._document,new aS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){$t(this,e),this._firestore=t,this._transaction=n,this._dataReader=MI(t)}return Jt(e,[{key:"get",value:function(e){var t=this,n=OS(e,this._firestore),r=new AS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return xv();var i=e[0];if(i.isFoundDocument())return new nS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new nS(t._firestore,r,n._key,null,n.converter);throw xv()}))}},{key:"set",value:function(e,t,n){var r=OS(e,this._firestore),i=CS(r.converter,t,n),a=FI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=OS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=zn(t))||t instanceof SI?WI(this._dataReader,"Transaction.update",i._key,t,n,o):KI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=OS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zS(e,t){return function(e,t){var n=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function r(){var i;return un().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return VE(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new PE(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(gI(e=nI(e,mI)),(function(n){return t(new qS(e,n))}))}function BS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qI("arrayUnion",t)}function KS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vv=e}(xr),dr(new Bn("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new mI(i,new Ov(e.getProvider("auth-internal")),new Lv(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Cr(dv,"3.4.5",e),Cr(dv,"3.4.5","esm2017")}();function WS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Sv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function HS(){if("undefined"===typeof Uint8Array)throw new Sv("unimplemented","Uint8Arrays are not available in this environment.")}function GS(){if("undefined"==typeof atob)throw new Sv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var QS=function(){function e(t){$t(this,e),this._delegate=t}return Jt(e,[{key:"toBase64",value:function(){return GS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return HS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return GS(),new e(TI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return HS(),new e(TI.fromUint8Array(t))}}]),e}();function $S(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=sn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YS=function(){function e(){$t(this,e)}return Jt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){II(e=nI(e,mI));var n=gI(e),r=e._freezeSettings(),i=new TE;return wI(n,i,new IE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){II(e=nI(e,mI));var t=gI(e),n=e._freezeSettings(),r=new TE;return wI(t,r,new SE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Sv(Iv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Tv;return e._queue.enqueueAndForgetEvenWhileRestricted(Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Qt(un().mark((function e(t){var n;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pk.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Pk.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(sb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),JS=function(){function e(t,n,r){var i=this;$t(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof uy||(this._appCompat=t)}return Jt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||wv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return bI(this._delegate)}},{key:"disableNetwork",value:function(){return xI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&XE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Tv;return e.asyncQueue.enqueueAndForget(Qt(un().mark((function n(){return un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=W_,n.next=3,WE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gI(e=nI(e,mI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return US(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Sv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new fT(this,lI(this._delegate,e))}catch(t){throw rT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new nT(this,fI(this._delegate,e))}catch(t){throw rT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new sT(this,function(e,t){if(e=nI(e,aI),JE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Sv(Iv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new sI(e,null,function(e){return new Zy(Qv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw rT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zS(this._delegate,(function(n){return e(new ZS(t,n))}))}},{key:"batch",value:function(){var e=this;return gI(this._delegate),new eT(new NS(this._delegate,(function(t){return jS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return _I(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return EI(this._delegate,e).then((function(e){return e?new sT(t,e):null}))}}]),e}(),XS=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this)).firestore=e,r}return Jt(n,[{key:"convertBytes",value:function(e){return new QS(new TI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return nT.forKey(t,this.firestore,null)}}]),n}(TS);var ZS=function(){function e(t,n){$t(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new XS(t)}return Jt(e,[{key:"get",value:function(e){var t=this,n=hT(e);return this._delegate.get(n).then((function(e){return new oT(t._firestore,new oS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=hT(e);return n?(WS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=hT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hT(e);return this._delegate.delete(t),this}}]),e}(),eT=function(){function e(t){$t(this,e),this._delegate=t}return Jt(e,[{key:"set",value:function(e,t,n){var r=hT(e);return n?(WS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=hT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),tT=function(){function e(t,n,r){$t(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Jt(e,[{key:"fromFirestore",value:function(e,t){var n=new uS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new XS(t),n),i.set(n,a)),a}}]),e}();tT.INSTANCES=new WeakMap;var nT=function(){function e(t,n){$t(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new XS(t)}return Jt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new fT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new fT(this.firestore,lI(this._delegate,e))}catch(t){throw rT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=zn(e))instanceof uI&&hI(this._delegate,e)}},{key:"set",value:function(e,t){t=WS("DocumentReference.set",t);try{return t?LS(this._delegate,e,t):LS(this._delegate,e)}catch(n){throw rT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?MS(this._delegate,e):MS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw rT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return jS(nI(e.firestore,mI),[new Qm(e._key,Rm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iT(n),a=aT(n,(function(t){return new oT(e.firestore,new oS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return FS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?RS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nI(e,uI);var t=nI(e.firestore,mI);return QE(gI(t),e._key,{source:"server"}).then((function(n){return VS(t,e,n)}))}(this._delegate):function(e){e=nI(e,uI);var t=nI(e.firestore,mI);return QE(gI(t),e._key).then((function(n){return VS(t,e,n)}))}(this._delegate),t.then((function(e){return new oT(n.firestore,new oS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(tT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Sv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new uI(n._delegate,r,new fy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new uI(n._delegate,r,t))}}]),e}();function rT(e,t,n){return e.message=e.message.replace(t,n),e}function iT(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!$S(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function aT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=$S(e[0])?e[0]:$S(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var oT=function(){function e(t,n){$t(this,e),this._firestore=t,this._delegate=n}return Jt(e,[{key:"ref",get:function(){return new nT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return lS(this._delegate,e._delegate)}}]),e}(),uT=function(e){Xt(n,e);var t=an(n);function n(){return $t(this,n),t.apply(this,arguments)}return Jt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||xv()}(void 0!==t),t}}]),n}(oT),sT=function(){function e(t,n){$t(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new XS(t)}return Jt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,dS(this._delegate,function(e,t,n){var r=t,i=iS("where",e);return new pS(i,r,n)}(t,n,r)))}catch(i){throw rT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,dS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iS("orderBy",e);return new vS(n,t)}(t,n)))}catch(r){throw rT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,dS(this._delegate,function(e){return rI("limit",e),new yS("limit",e,"F")}(t)))}catch(n){throw rT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,dS(this._delegate,function(e){return rI("limitToLast",e),new yS("limitToLast",e,"L")}(t)))}catch(n){throw rT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,dS(this._delegate,gS.apply(void 0,arguments)))}catch(t){throw rT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,dS(this._delegate,kS.apply(void 0,arguments)))}catch(t){throw rT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,dS(this._delegate,bS.apply(void 0,arguments)))}catch(t){throw rT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,dS(this._delegate,xS.apply(void 0,arguments)))}catch(t){throw rT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return dI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?DS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nI(e,sI);var t=nI(e.firestore,mI),n=gI(t),r=new PS(t);return $E(n,e._query,{source:"server"}).then((function(n){return new sS(t,r,e,n)}))}(this._delegate):function(e){e=nI(e,sI);var t=nI(e.firestore,mI),n=gI(t),r=new PS(t);return fS(e._query),$E(n,e._query).then((function(n){return new sS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new lT(n.firestore,new sS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iT(n),a=aT(n,(function(t){return new lT(e.firestore,new sS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return FS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(tT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),cT=function(){function e(t,n){$t(this,e),this._firestore=t,this._delegate=n}return Jt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new uT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),lT=function(){function e(t,n){$t(this,e),this._firestore=t,this._delegate=n}return Jt(e,[{key:"query",get:function(){return new sT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new uT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new cT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new uT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return lS(this._delegate,e._delegate)}}]),e}(),fT=function(e){Xt(n,e);var t=an(n);function n(e,r){var i;return $t(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Jt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new nT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new nT(this.firestore,void 0===e?fI(this._delegate):fI(this._delegate,e))}catch(t){throw rT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=nI(e.firestore,mI),r=fI(e),i=CS(e.converter,t);return jS(n,[FI(MI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new nT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return hI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(tT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(sT);function hT(e){return nI(e,uI)}var dT=function(){function e(){$t(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=hn(SI,n)}return Jt(e,[{key:"isEqual",value:function(e){return(e=zn(e))instanceof SI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Yv.keyField().canonicalString())}}]),e}(),pT=function(){function e(t){$t(this,e),this._delegate=t}return Jt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new VI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new UI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=BS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=KS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new BI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),vT={Firestore:JS,GeoPoint:AI,Timestamp:zv,Blob:QS,Transaction:ZS,WriteBatch:eT,DocumentReference:nT,DocumentSnapshot:oT,Query:sT,QueryDocumentSnapshot:uT,QuerySnapshot:lT,CollectionReference:fT,FieldPath:dT,FieldValue:pT,setLogLevel:function(e){!function(e){yv.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Bn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},vT)))}(e,(function(e,t){return new JS(e,t,new YS)})),e.registerVersion("@firebase/firestore-compat","0.1.14")}(Fr);var yT=Fr.initializeApp({apiKey:"AIzaSyB_vEdLMXk3Fh649VwaLvg7iWCbwx0Jx08",authDomain:"ajbpos.firebaseapp.com",projectId:"ajbpos",storageBucket:"ajbpos.appspot.com",messagingSenderId:"955048515609",appId:"1:955048515609:web:01ad37f2cdcbf4016f7288",measurementId:"G-F0RFSFCFP6"}),mT=function(){var e=Qt(un().mark((function e(t,n){var r,i,a,o;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=kT.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=17;break}return i=t.displayName,a=t.email,o=new Date,e.prev=9,e.next=12,r.set(ut({displayName:i,email:a,createAt:o},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user ",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),gT=Fr.auth(yT),kT=Fr.firestore(),wT=new Fr.auth.GoogleAuthProvider;wT.setCustomParameters({prompt:"select_account"});var bT=function(){return gT.signInWithPopup(wT)};function xT(e,t){if(null==e)return{};var n,r,i=K(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _T(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ET=n(613),IT=n.n(ET);var ST=function(e){function t(e,r,s,c,h){for(var d,p,v,y,w,x=0,_=0,E=0,I=0,S=0,P=0,D=v=d=0,M=0,F=0,U=0,j=0,V=s.length,q=V-1,z="",B="",K="",W="";M<V;){if(p=s.charCodeAt(M),M===q&&0!==_+I+E+x&&(0!==_&&(p=47===_?10:47),I=E=x=0,V++,q++),0===_+I+E+x){if(M===q&&(0<F&&(z=z.replace(f,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=s.charAt(M)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,j=++M;M<V;){switch(p=s.charCodeAt(M)){case 123:v++;break;case 125:v--;break;case 47:switch(p=s.charCodeAt(M+1)){case 42:case 47:e:{for(D=M+1;D<q;++D)switch(s.charCodeAt(D)){case 47:if(42===p&&42===s.charCodeAt(D-1)&&M+2!==D){M=D+1;break e}break;case 10:if(47===p){M=D+1;break e}}M=D}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<q&&s.charCodeAt(M)!==p;);}if(0===v)break;M++}if(v=s.substring(j,M),0===d&&(d=(z=z.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<F&&(z=z.replace(f,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=O}if(j=(v=t(r,F,v,p,h+1)).length,0<R&&(w=u(3,v,F=n(O,z,U),r,C,T,j,p,h,c),z=F.join(""),void 0!==w&&0===(j=(v=w.trim()).length)&&(p=0,v="")),0<j)switch(p){case 115:z=z.replace(b,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(m,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===c&&(B+=v,v="")}else v=""}else v=t(r,n(r,z,U),v,c,h+1);K+=v,v=U=F=D=d=0,z="",p=s.charCodeAt(++M);break;case 125:case 59:if(1<(j=(z=(0<F?z.replace(f,""):z).trim()).length))switch(0===D&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(j=(z=z.replace(" ",":")).length),0<R&&void 0!==(w=u(1,z,r,e,C,T,B.length,c,h,c))&&0===(j=(z=w.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){W+=z+s.charAt(M);break}default:58!==z.charCodeAt(j-1)&&(B+=i(z,d,p,z.charCodeAt(2)))}U=F=D=d=0,z="",p=s.charCodeAt(++M)}}switch(p){case 13:case 10:47===_?_=0:0===1+d&&107!==c&&0<z.length&&(F=1,z+="\0"),0<R*L&&u(0,z,r,e,C,T,B.length,c,h,c),T=1,C++;break;case 59:case 125:if(0===_+I+E+x){T++;break}default:switch(T++,y=s.charAt(M),p){case 9:case 32:if(0===I+x+_)switch(S){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===I+_+x&&(F=U=1,y="\f"+y);break;case 108:if(0===I+_+x+A&&0<D)switch(M-D){case 2:112===S&&58===s.charCodeAt(M-3)&&(A=S);case 8:111===P&&(A=P)}break;case 58:0===I+_+x&&(D=M);break;case 44:0===_+E+I+x&&(F=1,y+="\r");break;case 34:case 39:0===_&&(I=I===p?0:0===I?p:I);break;case 91:0===I+_+E&&x++;break;case 93:0===I+_+E&&x--;break;case 41:0===I+_+x&&E--;break;case 40:if(0===I+_+x){if(0===d)if(2*S+3*P===533);else d=1;E++}break;case 64:0===_+E+I+x+D+v&&(v=1);break;case 42:case 47:if(!(0<I+x+E))switch(_){case 0:switch(2*p+3*s.charCodeAt(M+1)){case 235:_=47;break;case 220:j=M,_=42}break;case 42:47===p&&42===S&&j+2!==M&&(33===s.charCodeAt(j+2)&&(B+=s.substring(j,M+1)),y="",_=0)}}0===_&&(z+=y)}P=S,S=p,M++}if(0<(j=B.length)){if(F=r,0<R&&(void 0!==(w=u(2,B,F,e,C,T,j,c,h,c))&&0===(B=w).length))return W+B+K;if(B=F.join(",")+"{"+B+"}",0!==N*A){switch(2!==N||a(B,2)||(A=0),A){case 111:B=B.replace(k,":-moz-$1")+B;break;case 112:B=B.replace(g,"::-webkit-input-$1")+B.replace(g,"::-moz-$1")+B.replace(g,":-ms-input-$1")+B}A=0}}return W+B+K}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var u=0;for(e=0===o?"":e[0]+" ";u<a;++u)t[u]=r(e,t[u],n).trim();break;default:var s=u=0;for(t=[];u<a;++u)for(var c=0;c<o;++c)t[s++]=r(e[c]+" ",i[u],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",u=2*t+3*n+4*r;if(944===u){e=o.indexOf(":",9)+1;var s=o.substring(e,o.length-1).trim();return s=o.substring(0,e).trim()+s+";",1===N||2===N&&a(s,1)?"-webkit-"+s+s:s}if(0===N||2===N&&!a(o,1))return o;switch(u){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(S,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(s=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+s+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(s=o.substring(13).trim()).indexOf("-")+1,s.charCodeAt(0)+s.charCodeAt(t)){case 226:s=o.replace(w,"tb");break;case 232:s=o.replace(w,"tb-rl");break;case 220:s=o.replace(w,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+s+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,u=(s=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|s.charCodeAt(7))){case 203:if(111>s.charCodeAt(8))break;case 115:o=o.replace(s,"-webkit-"+s)+";"+o;break;case 207:case 102:o=o.replace(s,"-webkit-"+(102<u?"inline-":"")+"box")+";"+o.replace(s,"-webkit-"+s)+";"+o.replace(s,"-ms-"+s+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return s=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+s+"-ms-flex-"+s+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(_,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(_,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===I.test(e))return 115===(s=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(s,"-webkit-"+s)+o.replace(s,"-moz-"+s.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(E,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(x," or ($1)").substring(4):"("+t+")"}function u(e,t,n,r,i,a,o,u,s,l){for(var f,h=0,d=t;h<R;++h)switch(f=P[h].call(c,e,d,n,r,i,a,o,u,s,l)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?N=1:(N=2,D=e):N=0),s}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=u(-1,n,r,r,C,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(O,r,n,0,0);return 0<R&&(void 0!==(i=u(-2,a,r,r,C,T,a.length,0,0,0))&&(a=i)),"",A=0,T=C=1,a}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,_=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,I=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,T=1,C=1,A=0,N=1,O=[],P=[],R=0,D=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:R=P.length=0;break;default:if("function"===typeof t)P[R++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=s,void 0!==e&&s(e),c},TT={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var CT=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},AT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,NT=CT((function(e){return AT.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function OT(){return(OT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var PT=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},RT=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,Ae.typeOf)(e)},DT=Object.freeze([]),LT=Object.freeze({});function MT(e){return"function"==typeof e}function FT(e){return e.displayName||e.name||"Component"}function UT(e){return e&&"string"==typeof e.styledComponentId}var jT="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",VT="undefined"!=typeof window&&"HTMLElement"in window,qT=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/point-of-sale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function zT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var BT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&zT(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),u=0,s=t.length;u<s;u++)this.tag.insertRule(o,t[u])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),KT=new Map,WT=new Map,HT=1,GT=function(e){if(KT.has(e))return KT.get(e);for(;WT.has(HT);)HT++;var t=HT++;return KT.set(e,t),WT.set(t,e),t},QT=function(e){return WT.get(e)},$T=function(e,t){t>=HT&&(HT=t+1),KT.set(e,t),WT.set(t,e)},YT="style["+jT+'][data-styled-version="5.3.3"]',JT=new RegExp("^"+jT+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),XT=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},ZT=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var u=o.match(JT);if(u){var s=0|parseInt(u[1],10),c=u[2];0!==s&&($T(c,s),XT(e,c,u[3]),e.getTag().insertRules(s,r)),r.length=0}else r.push(o)}}},eC=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},tC=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(jT))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(jT,"active"),r.setAttribute("data-styled-version","5.3.3");var o=eC();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},nC=function(){function e(e){var t=this.element=tC(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}zT(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),rC=function(){function e(e){var t=this.element=tC(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),iC=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),aC=VT,oC={isServer:!VT,useCSSOMInjection:!qT},uC=function(){function e(e,t,n){void 0===e&&(e=LT),void 0===t&&(t={}),this.options=OT({},oC,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&VT&&aC&&(aC=!1,function(e){for(var t=document.querySelectorAll(YT),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(jT)&&(ZT(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return GT(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(OT({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new iC(i):r?new nC(i):new rC(i),new BT(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(GT(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(GT(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(GT(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=QT(i);if(void 0!==a){var o=e.names.get(a),u=t.getGroup(i);if(o&&u&&o.size){var s=jT+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+u+s+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),sC=/(a)(d)/gi,cC=function(e){return String.fromCharCode(e+(e>25?39:97))};function lC(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=cC(t%52)+n;return(cC(t%52)+n).replace(sC,"$1-$2")}var fC=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},hC=function(e){return fC(5381,e)};function dC(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(MT(n)&&!UT(n))return!1}return!0}var pC=hC("5.3.3"),vC=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&dC(e),this.componentId=t,this.baseHash=fC(pC,t),this.baseStyle=n,uC.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=RC(this.rules,e,t,n).join(""),o=lC(fC(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var u=n(a,"."+o,void 0,r);t.insertRules(r,o,u)}i.push(o),this.staticRulesId=o}else{for(var s=this.rules.length,c=fC(this.baseHash,n.hash),l="",f=0;f<s;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var d=RC(h,e,t,n),p=Array.isArray(d)?d.join(""):d;c=fC(c,p+f),l+=p}}if(l){var v=lC(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),yC=/^\s*\/\/.*$/gm,mC=[":","[",".","#"];function gC(e){var t,n,r,i,a=void 0===e?LT:e,o=a.options,u=void 0===o?LT:o,s=a.plugins,c=void 0===s?DT:s,l=new ST(u),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,u,s,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==mC.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,u){void 0===u&&(u="&");var s=e.replace(yC,""),c=a&&o?o+" "+a+" { "+s+" }":s;return t=u,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||zT(15),fC(e,t.name)}),5381).toString():"",p}var kC=t.createContext(),wC=(kC.Consumer,t.createContext()),bC=(wC.Consumer,new uC),xC=gC();function _C(){return(0,t.useContext)(kC)||bC}function EC(){return(0,t.useContext)(wC)||xC}function IC(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],a=_C(),o=(0,t.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,t.useMemo)((function(){return gC({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){IT()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(kC.Provider,{value:o},t.createElement(wC.Provider,{value:u},e.children))}var SC=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=xC);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return zT(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=xC),this.name+e.hash},e}(),TC=/([A-Z])/,CC=/([A-Z])/g,AC=/^ms-/,NC=function(e){return"-"+e.toLowerCase()};function OC(e){return TC.test(e)?e.replace(CC,NC).replace(AC,"-ms-"):e}var PC=function(e){return null==e||!1===e||""===e};function RC(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,u=e.length;o<u;o+=1)""!==(i=RC(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return PC(e)?"":UT(e)?"."+e.styledComponentId:MT(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:RC(e(t),t,n,r):e instanceof SC?n?(e.inject(n,r),e.getName(r)):e:RT(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!PC(t[o])&&(Array.isArray(t[o])&&t[o].isCss||MT(t[o])?a.push(OC(o)+":",t[o],";"):RT(t[o])?a.push.apply(a,e(t[o],o)):a.push(OC(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in TT?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var s}var DC=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function LC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return MT(e)||RT(e)?DC(RC(PT(DT,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:DC(RC(PT(e,n)))}new Set;var MC=function(e,t,n){return void 0===n&&(n=LT),e.theme!==n.theme&&e.theme||t||n.theme},FC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,UC=/(^-|-$)/g;function jC(e){return e.replace(FC,"-").replace(UC,"")}var VC=function(e){return lC(hC(e)>>>0)};function qC(e){return"string"==typeof e&&!0}var zC=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},BC=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function KC(e,t,n){var r=e[n];zC(t)&&zC(r)?WC(r,t):e[n]=t}function WC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(zC(o))for(var u in o)BC(u)&&KC(e,o[u],u)}return e}var HC=t.createContext();HC.Consumer;var GC={};function QC(e,n,r){var i=UT(e),a=!qC(e),o=n.attrs,u=void 0===o?DT:o,s=n.componentId,c=void 0===s?function(e,t){var n="string"!=typeof e?"sc":jC(e);GC[n]=(GC[n]||0)+1;var r=n+"-"+VC("5.3.3"+n+GC[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):s,l=n.displayName,f=void 0===l?function(e){return qC(e)?"styled."+e:"Styled("+FT(e)+")"}(e):l,h=n.displayName&&n.componentId?jC(n.displayName)+"-"+n.componentId:n.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,u).filter(Boolean):u,p=n.shouldForwardProp;i&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var v,y=new vC(r,h,i?e.componentStyle:void 0),m=y.isStatic&&0===u.length,g=function(e,n){return function(e,n,r,i){var a=e.attrs,o=e.componentStyle,u=e.defaultProps,s=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=LT);var r=OT({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in MT(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(MC(n,(0,t.useContext)(HC),u)||LT,n,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=_C(),a=EC();return t?e.generateAndInjectStyles(LT,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),y=r,m=p.$as||n.$as||p.as||n.as||f,g=qC(m),k=p!==n?OT({},n,{},p):n,w={};for(var b in k)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?w.as=k[b]:(c?c(b,NT,m):!g||NT(b))&&(w[b]=k[b]));return n.style&&p.style!==n.style&&(w.style=OT({},n.style,{},p.style)),w.className=Array.prototype.concat(s,l,v!==l?v:null,n.className,p.className).filter(Boolean).join(" "),w.ref=y,(0,t.createElement)(m,w)}(v,e,n,m)};return g.displayName=f,(v=t.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):DT,v.styledComponentId=h,v.target=i?e.target:e,v.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),a=t&&t+"-"+(qC(e)?e:jC(FT(e)));return QC(e,OT({},i,{attrs:d,componentId:a}),r)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?WC({},e.defaultProps,t):t}}),v.toString=function(){return"."+v.styledComponentId},a&&H()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var $C=function(e){return function e(t,n,r){if(void 0===r&&(r=LT),!(0,Ae.isValidElementType)(n))return zT(1,String(n));var i=function(){return t(n,r,LC.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,OT({},r,{},i))},i.attrs=function(i){return e(t,n,OT({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(QC,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){$C[e]=$C(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=dC(e),uC.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(RC(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&uC.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=eC();return"<style "+[n&&'nonce="'+n+'"',jT+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?zT(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return zT(2);var r=((n={})[jT]="",n["data-styled-version"]="5.3.3",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=eC();return i&&(r.nonce=i),[t.createElement("style",OT({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new uC({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?zT(2):t.createElement(IC,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return zT(3)}}();var YC,JC,XC,ZC,eA,tA,nA,rA,iA,aA,oA,uA,sA,cA,lA,fA,hA,dA,pA,vA,yA,mA=$C,gA=mA.div(YC||(YC=_T(["\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),kA=mA.div(JC||(JC=_T(["\n  display: inline-block;\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: #636767;\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n  @-webkit-keyframes spin {\n    to {\n      -webkit-transform: rotate(360deg);\n    }\n  }\n"]))),wA=n(184),bA=["isLoading"],xA=function(e){return function(t){var n=t.isLoading,r=xT(t,bA);return n?(0,wA.jsx)(gA,{children:(0,wA.jsx)(kA,{})}):(0,wA.jsx)(e,ut({},r))}},_A=function(e){return{type:Dt,payload:e}},EA=function(e){return e.cart},IA=It([EA],(function(e){return e.cartItems})),SA=(It([EA],(function(e){return e.hidden})),It([IA],(function(e){return e.reduce((function(e,t){return e+t.quantity}),0)})),It([IA],(function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0)}))),TA=It([IA],(function(e,t){return e.filter((function(e){return e.id===t}))})),CA=mA.div(XC||(XC=_T(["\n    width: auto;\n    display: flex;\n    justify-content: space-between;\n    cursor: pointer;\n   \n"]))),AA=mA.div(ZC||(ZC=_T(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n"]))),NA=mA.div(eA||(eA=_T(["\n    width: auto;\n    padding: 10px 0;\n    display: flex;\n    justify-conent: space-between;\n    border-bottom: 1px solid darkgrey;\n"]))),OA=(mA.div(tA||(tA=_T(["\n    text-transform: capitalize;\n    width: 23%;\n\n    &:last-child {\n        width: 8%\n    }\n"]))),mA.span(nA||(nA=_T(["\n    text-transform: capitalize;\n    width: 40%;\n"])))),PA=mA.span(rA||(rA=_T(["\n    text-transform: capitalize;\n    width: 15%;\n"]))),RA=mA.span(iA||(iA=_T(["\n    display: flex;\n    text-transform: capitalize;\n    width: 20%;\n"]))),DA=mA.span(aA||(aA=_T(["\n    text-transform: capitalize;\n    width: 10%;\n"]))),LA=rt(St({cartItems:IA}),(function(e){return{addItem:function(t){return e(function(e){return{type:Pt,payload:e}}(t))},removeItem:function(t){return e(function(e){return{type:Rt,payload:e}}(t))},clearItem:function(t){return e(_A(t))},incShopItem:function(t){return e(function(e){return{type:kt.INC_SHOP_ITEM,payload:e}}(t))},getCartItemQuantity:function(t){return e(TA(t))}}}))((function(e){var t=e.item,n=e.addItem,r=e.removeItem,i=e.clearItem,a=e.incShopItem,o=e.cartItems,u=t.name,s=t.price,c=function(e,t){return e.find((function(e){return e.id===t}))}(o,t.id),l=c?c.quantity:0;return console.log("QTY:",c?c.quantity:0),(0,wA.jsxs)(CA,{children:[(0,wA.jsx)(OA,{children:u}),(0,wA.jsxs)(PA,{children:["$",s]}),(0,wA.jsxs)(RA,{children:[(0,wA.jsx)("div",{onClick:function(){return r(t)},children:"\u276e  "}),(0,wA.jsx)("span",{children:l}),(0,wA.jsx)("div",{onClick:function(){a(t.id),n(t)},children:"\u276f"})]}),(0,wA.jsxs)(PA,{children:["$",s*l]}),(0,wA.jsx)(DA,{onClick:function(){return i(t)},children:"\u2715"})]})})),MA=rt(St({collections:Ct}))((function(e){var t=e.collections;return(0,wA.jsxs)(AA,{children:[(0,wA.jsxs)(NA,{children:[(0,wA.jsx)(OA,{children:"Descripcion"}),(0,wA.jsx)(PA,{children:"Precio"}),(0,wA.jsx)(RA,{children:"Cant."}),(0,wA.jsx)(PA,{children:"S.Total"}),(0,wA.jsx)(DA,{children:"Borrar"})]}),null!==t?t.map((function(e){return(0,wA.jsx)(LA,{item:e},e.id)})):null]})})),FA=mA.div(oA||(oA=_T(["\n  width: 100%;\n  display: flex;\n  min-height: 10px;\n  font-size: 20px;\n  align-items: center;\n"]))),UA=mA.span(uA||(uA=_T(["\n  width: 40%;\n"]))),jA=mA.span(sA||(sA=_T(["\n  width: 20%;\n"]))),VA=(mA.div(cA||(cA=_T(["\n  padding-left: 12px;\n  cursor: pointer;\n"]))),rt(null,(function(e){return{clearItem:function(t){return e(_A(t))}}}))((function(e){var t=e.cartItem,n=(e.clearItem,t.name),r=t.price,i=t.quantity;return(0,wA.jsxs)(FA,{children:[(0,wA.jsx)(UA,{children:n}),(0,wA.jsx)(jA,{children:i}),(0,wA.jsxs)(UA,{children:["$",r]})]})}))),qA=mA.div(lA||(lA=_T(["\n    width: 75%;\n    min-height: 90vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin: 50px auto 0;\n    border: 1px solid darkgrey;\n    padding: 5px;\n    "]))),zA=(mA.div(fA||(fA=_T(["\n    width: auto;\n    padding: 10px 0;\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid darkgrey;\n"]))),mA.div(hA||(hA=_T(["\n    text-transform: capitalize;\n    width: 23%;\n\n    &:last-child {\n        width: 8%\n    }\n"]))),mA.div(dA||(dA=_T(["\n  margin-top: 30px;\n  margin-left: auto;\n  font-size: 36px;\n"])))),BA=(mA.div(pA||(pA=_T(["\n  text-align: center;\n  margin-top: 40px;\n  font-size: 24px;\n  color: red;\n"]))),rt(St({cartItems:IA,total:SA}))((function(e){var t=e.cartItems,n=e.total;return(0,wA.jsxs)(qA,{children:[t.map((function(e){return(0,wA.jsx)(VA,{cartItem:e},e.id)})),(0,wA.jsxs)(zA,{children:["TOTAL: $",n]})]})}))),KA=mA.div(vA||(vA=_T(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 20px 80px;\n"]))),WA=xA(MA),HA=xA(BA),GA=function(e){Xt(n,e);var t=an(n);function n(){var e;$t(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0},e.unsubscribeFromSnapshot=null,e}return Jt(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.updateCollections;kT.collection("collections").get().then((function(n){var r=n.docs.map((function(e){var t=e.data(),n=t.name,r=t.category,i=t.price,a=t.color,o=t.enable;return{id:e.id,name:n,price:i,category:r,color:a,enable:o}})).reduce((function(e,t){return e[t.name.toLowerCase()]=t,e}),{});t(r),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.state.loading;return(0,wA.jsxs)(KA,{children:[(0,wA.jsx)(WA,{isLoading:e}),(0,wA.jsx)(HA,{isLoading:e})]})}}]),n}(t.Component),QA=rt(null,(function(e){return{updateCollections:function(t){return e(function(e){return{type:kt.UPDATE_COLLECTIONS,payload:e}}(t))}}}))(GA),$A=["title","titleId"];function YA(){return YA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YA.apply(this,arguments)}function JA(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XA(e,n){var r=e.title,i=e.titleId,a=JA(e,$A);return t.createElement("svg",YA({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,yA||(yA=t.createElement("g",{fill:"#61DAFB"},t.createElement("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),t.createElement("circle",{cx:420.9,cy:296.5,r:45.7}),t.createElement("path",{d:"M520.5 78.1z"}))))}var ZA,eN,tN,nN,rN,iN,aN,oN,uN,sN,cN,lN,fN,hN,dN,pN,vN,yN,mN,gN=t.forwardRef(XA),kN=(n.p,It([function(e){return e.user}],(function(e){return e.currentUser}))),wN=mA.div(ZA||(ZA=_T(["\n    height: 70px;\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 25px;\n"]))),bN=mA(ke)(eN||(eN=_T(["\n    height: 100%;\n    width:75px;\n    padding: 5px;\n"]))),xN=mA.div(tN||(tN=_T(["\n    width: 85%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n"]))),_N=mA(ke)(nN||(nN=_T(["\n    padding: 10px 15px;\n    cursor: pointer;\n"]))),EN=rt(St({currentUser:kN}))((function(e){var t=e.currentUser;return(0,wA.jsxs)(wN,{children:[(0,wA.jsx)(bN,{to:"/",children:(0,wA.jsx)(gN,{className:"logo"})}),(0,wA.jsxs)(xN,{children:[(0,wA.jsx)(_N,{to:"/config",children:"CONFIG"}),t?(0,wA.jsx)(_N,{as:"div",onClick:function(){return gT.signOut()},children:"SIGN OUT"}):(0,wA.jsx)(_N,{to:"/signin",children:"SIGN IN"})]})]})})),IN="grey",SN=LC(rN||(rN=_T(["\n  top: -14px;\n  font-size: 12px;\n  color: ",";\n"])),"black"),TN=mA.div(iN||(iN=_T(["\n  position: relative;\n  margin: 45px 0;\n  input[type='password'] {\n    letter-spacing: 0.3em;\n  }\n"]))),CN=mA.input(aN||(aN=_T(["\n  background: none;\n  background-color: white;\n  color: ",";\n  font-size: 18px;\n  padding: 10px 10px 10px 5px;\n  display: block;\n  width: 100%;\n  border: none;\n  border-radius: 0;\n  border-bottom: 1px solid ",";\n  margin: 25px 0;\n  &:focus {\n    outline: none;\n  }\n  &:focus ~ label {\n    ","\n  }\n"])),IN,IN,SN),AN=mA.label(oN||(oN=_T(["\n  color: ",";\n  font-size: 16px;\n  font-weight: normal;\n  position: absolute;\n  pointer-events: none;\n  left: 5px;\n  top: 10px;\n  transition: 300ms ease all;\n  &.shrink {\n    ","\n  }\n"])),IN,SN),NN=["handleChange","label"],ON=function(e){var t=e.handleChange,n=e.label,r=xT(e,NN);return(0,wA.jsxs)(TN,{children:[(0,wA.jsx)(CN,ut({onChange:t},r)),n?(0,wA.jsx)(AN,{className:r.value.length?"shrink":"",children:n}):null]})},PN=LC(uN||(uN=_T(["\n  background-color: black;\n  color: white;\n  border: none;\n  &:hover {\n    background-color: white;\n    color: black;\n    border: 1px solid black;\n  }\n"]))),RN=LC(sN||(sN=_T(["\n  background-color: white;\n  color: black;\n  border: 1px solid black;\n  &:hover {\n    background-color: black;\n    color: white;\n    border: none;\n  }\n"]))),DN=LC(cN||(cN=_T(["\n  background-color: #4285f4;\n  color: white;\n  &:hover {\n    background-color: #357ae8;\n    border: none;\n  }\n"]))),LN=mA.button(lN||(lN=_T(["\n  min-width: 165px;\n  width: auto;\n  height: 50px;\n  letter-spacing: 0.5px;\n  line-height: 50px;\n  padding: 0 35px 0 35px;\n  font-size: 15px;\n  text-transform: uppercase;\n  font-family: 'Open Sans Condensed';\n  font-weight: bolder;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  ","\n"])),(function(e){return e.isGoogleSignIn?DN:e.inverted?RN:PN})),MN=["children"],FN=function(e){var t=e.children,n=xT(e,MN);return(0,wA.jsx)(LN,ut(ut({},n),{},{children:t}))},UN=mA.div(fN||(fN=_T(["\n  width: 380px;\n  display: flex;\n  flex-direction: column;\n"]))),jN=mA.h2(hN||(hN=_T(["\n  margin: 10px 0;\n"]))),VN=mA.div(dN||(dN=_T(["\n  display: flex;\n  justify-content: space-between;\n"]))),qN=function(e){Xt(n,e);var t=an(n);function n(e){var r;return $t(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Qt(un().mark((function e(t){var n,i,a;return un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,i=n.email,a=n.password,e.prev=2,e.next=5,gT.signInWithEmailAndPassword(i,a);case 5:r.setState({email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(at({},i,n))},r.state={email:"",password:""},r}return Jt(n,[{key:"render",value:function(){return(0,wA.jsxs)(UN,{children:[(0,wA.jsx)(jN,{children:"I already have an account"}),(0,wA.jsx)("span",{children:"Sign in with your email anda password"}),(0,wA.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,wA.jsx)(ON,{name:"email",type:"email",label:"Email",value:this.state.email,handleChange:this.handleChange,required:!0}),(0,wA.jsx)(ON,{name:"password",type:"password",label:"Password",value:this.state.password,handleChange:this.handleChange,required:!0}),(0,wA.jsxs)(VN,{children:[(0,wA.jsx)(FN,{type:"submit",children:" Sign In "}),(0,wA.jsx)(FN,{type:"button",onClick:bT,isGoogleSignIn:!0,children:"Sign in with Google"})]})]})]})}}]),n}(t.Component),zN=qN,BN=mA.div(pN||(pN=_T(["\n    display: flex;\n    flex-direction: column;\n    width: 380px;\n"]))),KN=mA.h2(vN||(vN=_T(["\n    margin: 10px 0;\n"]))),WN=mA.form(yN||(yN=_T(["\n"]))),HN=function(e){Xt(n,e);var t=an(n);function n(){var e;return $t(this,n),(e=t.call(this)).handleSubmit=function(){var t=Qt(un().mark((function t(n){var r,i,a,o,u,s,c;return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,i=r.displayName,a=r.email,o=r.password,u=r.confirmPassword,o===u){t.next=5;break}return alert("password don't match"),t.abrupt("return");case 5:return t.prev=5,t.next=8,gT.createUserWithEmailAndPassword(a,o);case 8:return s=t.sent,c=s.user,t.next=12,mT(c,{displayName:i});case 12:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(at({},r,i))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return Jt(n,[{key:"render",value:function(){return(0,wA.jsxs)(BN,{children:[(0,wA.jsx)(KN,{children:"I do not have a account"}),(0,wA.jsx)("span",{children:"Sign up with your email anda password"}),(0,wA.jsxs)(WN,{onSubmit:this.handleSubmit,children:[(0,wA.jsx)(ON,{type:"text",name:"displayName",value:this.state.displayName,label:"display name",onChange:this.handleChange}),(0,wA.jsx)(ON,{type:"email",name:"email",value:this.state.email,label:"email",onChange:this.handleChange}),(0,wA.jsx)(ON,{type:"password",name:"password",value:this.state.password,label:"password",onChange:this.handleChange}),(0,wA.jsx)(ON,{type:"password",name:"confirmPassword",value:this.state.confirmPassword,label:"confirm password",onChange:this.handleChange}),(0,wA.jsx)(FN,{type:"submit",children:"SIGN UP"})]})]})}}]),n}(t.Component),GN=HN,QN=mA.div(mN||(mN=_T(["\n    width: 850px;\n    display: flex;\n    justify-content: space-between;\n    margin: 30px auto;\n"]))),$N=function(){return(0,wA.jsxs)(QN,{children:[(0,wA.jsx)(zN,{}),(0,wA.jsx)(GN,{})]})},YN=function(e){Xt(n,e);var t=an(n);function n(){var e;$t(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).unsubscribeFromAuth=null,e}return Jt(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=gT.onAuthStateChanged(function(){var t=Qt(un().mark((function t(n){return un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,mT(n);case 3:t.sent.onSnapshot((function(t){e(ut({id:t.id},t.data()))}));case 5:e(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this.props.currentUser;return(0,wA.jsxs)("div",{children:[(0,wA.jsx)(EN,{}),(0,wA.jsxs)(he,{children:[(0,wA.jsx)(oe,{exact:!0,path:"/",render:function(){return e?(0,wA.jsx)(QA,{}):(0,wA.jsx)($N,{})}}),(0,wA.jsx)(oe,{exact:!0,path:"/SignIn",render:function(){return e?(0,wA.jsx)(ne,{to:"/"}):(0,wA.jsx)($N,{})}})]})]})}}]),n}(t.Component),JN=rt(St({currentUser:kN}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:yt,payload:e}}(t))}}}))(YN);r.render((0,wA.jsx)(Ce,{store:Ht,children:(0,wA.jsx)(de,{children:(0,wA.jsx)(JN,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.db267bac.js.map